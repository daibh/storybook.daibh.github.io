/*! For license information please see 483.eff1e90e.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_oniwa_angular=self.webpackChunk_oniwa_angular||[]).push([[483],{"./node_modules/@angular/forms/fesm2022/forms.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u5:()=>FormsModule});var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),from=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),isArray=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(args){if(1===args.length){var first_1=args[0];if(isArray(first_1))return{args:first_1,keys:null};if(function isPOJO(obj){return obj&&"object"==typeof obj&&getPrototypeOf(obj)===objectProto}(first_1)){var keys=getKeys(first_1);return{args:keys.map((function(key){return first_1[key]})),keys}}}return{args,keys:null}}var innerFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),util_args=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/args.js"),OperatorSubscriber=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),mapOneOrManyArgs=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js");var map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js");class BaseControlValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}setProperty(key,value){this._renderer.setProperty(this._elementRef.nativeElement,key,value)}registerOnTouched(fn){this.onTouched=fn}registerOnChange(fn){this.onChange=fn}setDisabledState(isDisabled){this.setProperty("disabled",isDisabled)}}BaseControlValueAccessor.ɵfac=function BaseControlValueAccessor_Factory(t){return new(t||BaseControlValueAccessor)(core["ɵɵdirectiveInject"](core.Renderer2),core["ɵɵdirectiveInject"](core.ElementRef))},BaseControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:BaseControlValueAccessor}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](BaseControlValueAccessor,[{type:core.Directive}],(function(){return[{type:core.Renderer2},{type:core.ElementRef}]}),null);class BuiltInControlValueAccessor extends BaseControlValueAccessor{}BuiltInControlValueAccessor.ɵfac=function(){let ɵBuiltInControlValueAccessor_BaseFactory;return function BuiltInControlValueAccessor_Factory(t){return(ɵBuiltInControlValueAccessor_BaseFactory||(ɵBuiltInControlValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](BuiltInControlValueAccessor)))(t||BuiltInControlValueAccessor)}}(),BuiltInControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:BuiltInControlValueAccessor,features:[core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](BuiltInControlValueAccessor,[{type:core.Directive}],null,null);const NG_VALUE_ACCESSOR=new core.InjectionToken("NgValueAccessor"),CHECKBOX_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>CheckboxControlValueAccessor)),multi:!0};class CheckboxControlValueAccessor extends BuiltInControlValueAccessor{writeValue(value){this.setProperty("checked",value)}}CheckboxControlValueAccessor.ɵfac=function(){let ɵCheckboxControlValueAccessor_BaseFactory;return function CheckboxControlValueAccessor_Factory(t){return(ɵCheckboxControlValueAccessor_BaseFactory||(ɵCheckboxControlValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](CheckboxControlValueAccessor)))(t||CheckboxControlValueAccessor)}}(),CheckboxControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:CheckboxControlValueAccessor,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function CheckboxControlValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("change",(function CheckboxControlValueAccessor_change_HostBindingHandler($event){return ctx.onChange($event.target.checked)}))("blur",(function CheckboxControlValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},features:[core["ɵɵProvidersFeature"]([CHECKBOX_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CheckboxControlValueAccessor,[{type:core.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[CHECKBOX_VALUE_ACCESSOR]}]}],null,null);const DEFAULT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>DefaultValueAccessor)),multi:!0};const COMPOSITION_BUFFER_MODE=new core.InjectionToken("CompositionEventMode");class DefaultValueAccessor extends BaseControlValueAccessor{constructor(renderer,elementRef,_compositionMode){super(renderer,elementRef),this._compositionMode=_compositionMode,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _isAndroid(){const userAgent=(0,common["ɵgetDOM"])()?(0,common["ɵgetDOM"])().getUserAgent():"";return/android (\d+)/.test(userAgent.toLowerCase())}())}writeValue(value){const normalizedValue=null==value?"":value;this.setProperty("value",normalizedValue)}_handleInput(value){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(value)}_compositionStart(){this._composing=!0}_compositionEnd(value){this._composing=!1,this._compositionMode&&this.onChange(value)}}function isEmptyInputValue(value){return null==value||("string"==typeof value||Array.isArray(value))&&0===value.length}function hasValidLength(value){return null!=value&&"number"==typeof value.length}DefaultValueAccessor.ɵfac=function DefaultValueAccessor_Factory(t){return new(t||DefaultValueAccessor)(core["ɵɵdirectiveInject"](core.Renderer2),core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](COMPOSITION_BUFFER_MODE,8))},DefaultValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:DefaultValueAccessor,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function DefaultValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("input",(function DefaultValueAccessor_input_HostBindingHandler($event){return ctx._handleInput($event.target.value)}))("blur",(function DefaultValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))("compositionstart",(function DefaultValueAccessor_compositionstart_HostBindingHandler(){return ctx._compositionStart()}))("compositionend",(function DefaultValueAccessor_compositionend_HostBindingHandler($event){return ctx._compositionEnd($event.target.value)}))},features:[core["ɵɵProvidersFeature"]([DEFAULT_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](DefaultValueAccessor,[{type:core.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[DEFAULT_VALUE_ACCESSOR]}]}],(function(){return[{type:core.Renderer2},{type:core.ElementRef},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[COMPOSITION_BUFFER_MODE]}]}]}),null);const NG_VALIDATORS=new core.InjectionToken("NgValidators"),NG_ASYNC_VALIDATORS=new core.InjectionToken("NgAsyncValidators"),EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function minValidator(min){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(min))return null;const value=parseFloat(control.value);return!isNaN(value)&&value<min?{min:{min,actual:control.value}}:null}}function maxValidator(max){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(max))return null;const value=parseFloat(control.value);return!isNaN(value)&&value>max?{max:{max,actual:control.value}}:null}}function requiredValidator(control){return isEmptyInputValue(control.value)?{required:!0}:null}function requiredTrueValidator(control){return!0===control.value?null:{required:!0}}function emailValidator(control){return isEmptyInputValue(control.value)||EMAIL_REGEXP.test(control.value)?null:{email:!0}}function minLengthValidator(minLength){return control=>isEmptyInputValue(control.value)||!hasValidLength(control.value)?null:control.value.length<minLength?{minlength:{requiredLength:minLength,actualLength:control.value.length}}:null}function maxLengthValidator(maxLength){return control=>hasValidLength(control.value)&&control.value.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:control.value.length}}:null}function patternValidator(pattern){if(!pattern)return nullValidator;let regex,regexStr;return"string"==typeof pattern?(regexStr="","^"!==pattern.charAt(0)&&(regexStr+="^"),regexStr+=pattern,"$"!==pattern.charAt(pattern.length-1)&&(regexStr+="$"),regex=new RegExp(regexStr)):(regexStr=pattern.toString(),regex=pattern),control=>{if(isEmptyInputValue(control.value))return null;const value=control.value;return regex.test(value)?null:{pattern:{requiredPattern:regexStr,actualValue:value}}}}function nullValidator(control){return null}function isPresent(o){return null!=o}function toObservable(value){const obs=(0,core["ɵisPromise"])(value)?(0,from.D)(value):value;if(("undefined"==typeof ngDevMode||ngDevMode)&&!(0,core["ɵisSubscribable"])(obs)){let errorMessage="Expected async validator to return Promise or Observable.";throw"object"==typeof value&&(errorMessage+=" Are you using a synchronous validator where an async validator is expected?"),new core["ɵRuntimeError"](-1101,errorMessage)}return obs}function mergeErrors(arrayOfErrors){let res={};return arrayOfErrors.forEach((errors=>{res=null!=errors?{...res,...errors}:res})),0===Object.keys(res).length?null:res}function executeValidators(control,validators){return validators.map((validator=>validator(control)))}function normalizeValidators(validators){return validators.map((validator=>function isValidatorFn(validator){return!validator.validate}(validator)?validator:c=>validator.validate(c)))}function compose(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return mergeErrors(executeValidators(control,presentValidators))}}function composeValidators(validators){return null!=validators?compose(normalizeValidators(validators)):null}function composeAsync(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return function forkJoin(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var resultSelector=(0,util_args.jO)(args),_a=argsArgArrayOrObject(args),sources=_a.args,keys=_a.keys,result=new Observable.y((function(subscriber){var length=sources.length;if(length)for(var values=new Array(length),remainingCompletions=length,remainingEmissions=length,_loop_1=function(sourceIndex){var hasValue=!1;(0,innerFrom.Xf)(sources[sourceIndex]).subscribe((0,OperatorSubscriber.x)(subscriber,(function(value){hasValue||(hasValue=!0,remainingEmissions--),values[sourceIndex]=value}),(function(){return remainingCompletions--}),void 0,(function(){remainingCompletions&&hasValue||(remainingEmissions||subscriber.next(keys?function createObject(keys,values){return keys.reduce((function(result,key,i){return result[key]=values[i],result}),{})}(keys,values):values),subscriber.complete())})))},sourceIndex=0;sourceIndex<length;sourceIndex++)_loop_1(sourceIndex);else subscriber.complete()}));return resultSelector?result.pipe((0,mapOneOrManyArgs.Z)(resultSelector)):result}(executeValidators(control,presentValidators).map(toObservable)).pipe((0,map.U)(mergeErrors))}}function composeAsyncValidators(validators){return null!=validators?composeAsync(normalizeValidators(validators)):null}function mergeValidators(controlValidators,dirValidator){return null===controlValidators?[dirValidator]:Array.isArray(controlValidators)?[...controlValidators,dirValidator]:[controlValidators,dirValidator]}function getControlValidators(control){return control._rawValidators}function getControlAsyncValidators(control){return control._rawAsyncValidators}function makeValidatorsArray(validators){return validators?Array.isArray(validators)?validators:[validators]:[]}function hasValidator(validators,validator){return Array.isArray(validators)?validators.includes(validator):validators===validator}function addValidators(validators,currentValidators){const current=makeValidatorsArray(currentValidators);return makeValidatorsArray(validators).forEach((v=>{hasValidator(current,v)||current.push(v)})),current}function removeValidators(validators,currentValidators){return makeValidatorsArray(currentValidators).filter((v=>!hasValidator(validators,v)))}class AbstractControlDirective{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(validators){this._rawValidators=validators||[],this._composedValidatorFn=composeValidators(this._rawValidators)}_setAsyncValidators(validators){this._rawAsyncValidators=validators||[],this._composedAsyncValidatorFn=composeAsyncValidators(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(fn){this._onDestroyCallbacks.push(fn)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach((fn=>fn())),this._onDestroyCallbacks=[]}reset(value=void 0){this.control&&this.control.reset(value)}hasError(errorCode,path){return!!this.control&&this.control.hasError(errorCode,path)}getError(errorCode,path){return this.control?this.control.getError(errorCode,path):null}}class ControlContainer extends AbstractControlDirective{get formDirective(){return null}get path(){return null}}class NgControl extends AbstractControlDirective{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class AbstractControlStatus{constructor(cd){this._cd=cd}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}const ngControlStatusHost={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ngGroupStatusHost={...ngControlStatusHost,"[class.ng-submitted]":"isSubmitted"};class NgControlStatus extends AbstractControlStatus{constructor(cd){super(cd)}}NgControlStatus.ɵfac=function NgControlStatus_Factory(t){return new(t||NgControlStatus)(core["ɵɵdirectiveInject"](NgControl,2))},NgControlStatus.ɵdir=core["ɵɵdefineDirective"]({type:NgControlStatus,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function NgControlStatus_HostBindings(rf,ctx){2&rf&&core["ɵɵclassProp"]("ng-untouched",ctx.isUntouched)("ng-touched",ctx.isTouched)("ng-pristine",ctx.isPristine)("ng-dirty",ctx.isDirty)("ng-valid",ctx.isValid)("ng-invalid",ctx.isInvalid)("ng-pending",ctx.isPending)},features:[core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgControlStatus,[{type:core.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:ngControlStatusHost}]}],(function(){return[{type:NgControl,decorators:[{type:core.Self}]}]}),null);class NgControlStatusGroup extends AbstractControlStatus{constructor(cd){super(cd)}}NgControlStatusGroup.ɵfac=function NgControlStatusGroup_Factory(t){return new(t||NgControlStatusGroup)(core["ɵɵdirectiveInject"](ControlContainer,10))},NgControlStatusGroup.ɵdir=core["ɵɵdefineDirective"]({type:NgControlStatusGroup,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function NgControlStatusGroup_HostBindings(rf,ctx){2&rf&&core["ɵɵclassProp"]("ng-untouched",ctx.isUntouched)("ng-touched",ctx.isTouched)("ng-pristine",ctx.isPristine)("ng-dirty",ctx.isDirty)("ng-valid",ctx.isValid)("ng-invalid",ctx.isInvalid)("ng-pending",ctx.isPending)("ng-submitted",ctx.isSubmitted)},features:[core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgControlStatusGroup,[{type:core.Directive,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:ngGroupStatusHost}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Optional},{type:core.Self}]}]}),null);const formControlNameExample='\n  <div [formGroup]="myGroup">\n    <input formControlName="firstName">\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      firstName: new FormControl()\n  });',formGroupNameExample='\n  <div [formGroup]="myGroup">\n      <div formGroupName="person">\n        <input formControlName="firstName">\n      </div>\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      person: new FormGroup({ firstName: new FormControl() })\n  });',ngModelGroupExample='\n  <form>\n      <div ngModelGroup="person">\n        <input [(ngModel)]="person.name" name="firstName">\n      </div>\n  </form>';const disabledAttrWarning="\n  It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n  when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n  you. We recommend using this approach to avoid 'changed after checked' errors.\n\n  Example:\n  // Specify the `disabled` property at control creation time:\n  form = new FormGroup({\n    first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n    last: new FormControl('Drew', Validators.required)\n  });\n\n  // Controls can also be enabled/disabled after creation:\n  form.get('first')?.enable();\n  form.get('last')?.disable();\n";function describeKey(isFormGroup,key){return isFormGroup?`with name: '${key}'`:`at index: ${key}`}function pickValidators(validatorOrOpts){return(isOptionsObj(validatorOrOpts)?validatorOrOpts.validators:validatorOrOpts)||null}function pickAsyncValidators(asyncValidator,validatorOrOpts){return("undefined"==typeof ngDevMode||ngDevMode)&&isOptionsObj(validatorOrOpts)&&asyncValidator&&console.warn("\n  It looks like you're constructing using a FormControl with both an options argument and an\n  async validators argument. Mixing these arguments will cause your async validators to be dropped.\n  You should either put all your validators in the options object, or in separate validators\n  arguments. For example:\n\n  // Using validators arguments\n  fc = new FormControl(42, Validators.required, myAsyncValidator);\n\n  // Using AbstractControlOptions\n  fc = new FormControl(42, {validators: Validators.required, asyncValidators: myAV});\n\n  // Do NOT mix them: async validators will be dropped!\n  fc = new FormControl(42, {validators: Validators.required}, /* Oops! */ myAsyncValidator);\n"),(isOptionsObj(validatorOrOpts)?validatorOrOpts.asyncValidators:asyncValidator)||null}function isOptionsObj(validatorOrOpts){return null!=validatorOrOpts&&!Array.isArray(validatorOrOpts)&&"object"==typeof validatorOrOpts}function assertControlPresent(parent,isGroup,key){const controls=parent.controls;if(!(isGroup?Object.keys(controls):controls).length)throw new core["ɵRuntimeError"](1e3,"undefined"==typeof ngDevMode||ngDevMode?function noControlsError(isFormGroup){return`\n    There are no form controls registered with this ${isFormGroup?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(isGroup):"");if(!controls[key])throw new core["ɵRuntimeError"](1001,"undefined"==typeof ngDevMode||ngDevMode?function missingControlError(isFormGroup,key){return`Cannot find form control ${describeKey(isFormGroup,key)}`}(isGroup,key):"")}function assertAllValuesPresent(control,isGroup,value){control._forEachChild(((_,key)=>{if(void 0===value[key])throw new core["ɵRuntimeError"](1002,"undefined"==typeof ngDevMode||ngDevMode?function missingControlValueError(isFormGroup,key){return`Must supply a value for form control ${describeKey(isFormGroup,key)}`}(isGroup,key):"")}))}class AbstractControl{constructor(validators,asyncValidators){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(validators),this._assignAsyncValidators(asyncValidators)}get validator(){return this._composedValidatorFn}set validator(validatorFn){this._rawValidators=this._composedValidatorFn=validatorFn}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(asyncValidatorFn){this._rawAsyncValidators=this._composedAsyncValidatorFn=asyncValidatorFn}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(validators){this._assignValidators(validators)}setAsyncValidators(validators){this._assignAsyncValidators(validators)}addValidators(validators){this.setValidators(addValidators(validators,this._rawValidators))}addAsyncValidators(validators){this.setAsyncValidators(addValidators(validators,this._rawAsyncValidators))}removeValidators(validators){this.setValidators(removeValidators(validators,this._rawValidators))}removeAsyncValidators(validators){this.setAsyncValidators(removeValidators(validators,this._rawAsyncValidators))}hasValidator(validator){return hasValidator(this._rawValidators,validator)}hasAsyncValidator(validator){return hasValidator(this._rawAsyncValidators,validator)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(opts={}){this.touched=!0,this._parent&&!opts.onlySelf&&this._parent.markAsTouched(opts)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild((control=>control.markAllAsTouched()))}markAsUntouched(opts={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild((control=>{control.markAsUntouched({onlySelf:!0})})),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}markAsDirty(opts={}){this.pristine=!1,this._parent&&!opts.onlySelf&&this._parent.markAsDirty(opts)}markAsPristine(opts={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild((control=>{control.markAsPristine({onlySelf:!0})})),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}markAsPending(opts={}){this.status="PENDING",!1!==opts.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!opts.onlySelf&&this._parent.markAsPending(opts)}disable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((control=>{control.disable({...opts,onlySelf:!0})})),this._updateValue(),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach((changeFn=>changeFn(!0)))}enable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="VALID",this._forEachChild((control=>{control.enable({...opts,onlySelf:!0})})),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent}),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach((changeFn=>changeFn(!1)))}_updateAncestors(opts){this._parent&&!opts.onlySelf&&(this._parent.updateValueAndValidity(opts),opts.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(parent){this._parent=parent}getRawValue(){return this.value}updateValueAndValidity(opts={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(opts.emitEvent)),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!opts.onlySelf&&this._parent.updateValueAndValidity(opts)}_updateTreeValidity(opts={emitEvent:!0}){this._forEachChild((ctrl=>ctrl._updateTreeValidity(opts))),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(emitEvent){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe((errors=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(errors,{emitEvent})}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(errors,opts={}){this.errors=errors,this._updateControlsErrors(!1!==opts.emitEvent)}get(path){let currPath=path;return null==currPath?null:(Array.isArray(currPath)||(currPath=currPath.split(".")),0===currPath.length?null:currPath.reduce(((control,name)=>control&&control._find(name)),this))}getError(errorCode,path){const control=path?this.get(path):this;return control&&control.errors?control.errors[errorCode]:null}hasError(errorCode,path){return!!this.getError(errorCode,path)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(emitEvent){this.status=this._calculateStatus(),emitEvent&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(emitEvent)}_initObservables(){this.valueChanges=new core.EventEmitter,this.statusChanges=new core.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(status){return this._anyControls((control=>control.status===status))}_anyControlsDirty(){return this._anyControls((control=>control.dirty))}_anyControlsTouched(){return this._anyControls((control=>control.touched))}_updatePristine(opts={}){this.pristine=!this._anyControlsDirty(),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}_updateTouched(opts={}){this.touched=this._anyControlsTouched(),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}_registerOnCollectionChange(fn){this._onCollectionChange=fn}_setUpdateStrategy(opts){isOptionsObj(opts)&&null!=opts.updateOn&&(this._updateOn=opts.updateOn)}_parentMarkedDirty(onlySelf){const parentDirty=this._parent&&this._parent.dirty;return!onlySelf&&!!parentDirty&&!this._parent._anyControlsDirty()}_find(name){return null}_assignValidators(validators){this._rawValidators=Array.isArray(validators)?validators.slice():validators,this._composedValidatorFn=function coerceToValidator(validator){return Array.isArray(validator)?composeValidators(validator):validator||null}(this._rawValidators)}_assignAsyncValidators(validators){this._rawAsyncValidators=Array.isArray(validators)?validators.slice():validators,this._composedAsyncValidatorFn=function coerceToAsyncValidator(asyncValidator){return Array.isArray(asyncValidator)?composeAsyncValidators(asyncValidator):asyncValidator||null}(this._rawAsyncValidators)}}class FormGroup extends AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange),control)}addControl(name,control,options={}){this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}removeControl(name,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange((()=>{})),delete this.controls[name],this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}setControl(name,control,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange((()=>{})),delete this.controls[name],control&&this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}contains(controlName){return this.controls.hasOwnProperty(controlName)&&this.controls[controlName].enabled}setValue(value,options={}){assertAllValuesPresent(this,!0,value),Object.keys(value).forEach((name=>{assertControlPresent(this,!0,name),this.controls[name].setValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})})),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(Object.keys(value).forEach((name=>{const control=this.controls[name];control&&control.patchValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})})),this.updateValueAndValidity(options))}reset(value={},options={}){this._forEachChild(((control,name)=>{control.reset(value[name],{onlySelf:!0,emitEvent:options.emitEvent})})),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this._reduceChildren({},((acc,control,name)=>(acc[name]=control.getRawValue(),acc)))}_syncPendingControls(){let subtreeUpdated=this._reduceChildren(!1,((updated,child)=>!!child._syncPendingControls()||updated));return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){Object.keys(this.controls).forEach((key=>{const control=this.controls[key];control&&cb(control,key)}))}_setUpControls(){this._forEachChild((control=>{control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}))}_updateValue(){this.value=this._reduceValue()}_anyControls(condition){for(const[controlName,control]of Object.entries(this.controls))if(this.contains(controlName)&&condition(control))return!0;return!1}_reduceValue(){return this._reduceChildren({},((acc,control,name)=>((control.enabled||this.disabled)&&(acc[name]=control.value),acc)))}_reduceChildren(initValue,fn){let res=initValue;return this._forEachChild(((control,name)=>{res=fn(res,control,name)})),res}_allControlsDisabled(){for(const controlName of Object.keys(this.controls))if(this.controls[controlName].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(name){return this.controls.hasOwnProperty(name)?this.controls[name]:null}}class FormRecord extends FormGroup{}const CALL_SET_DISABLED_STATE=new core.InjectionToken("CallSetDisabledState",{providedIn:"root",factory:()=>setDisabledStateDefault}),setDisabledStateDefault="always";function controlPath(name,parent){return[...parent.path,name]}function setUpControl(control,dir,callSetDisabledState=setDisabledStateDefault){("undefined"==typeof ngDevMode||ngDevMode)&&(control||_throwError(dir,"Cannot find control with"),dir.valueAccessor||function _throwMissingValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new core["ɵRuntimeError"](-1203,`No value accessor for form control ${loc}.`)}(dir)),setUpValidators(control,dir),dir.valueAccessor.writeValue(control.value),(control.disabled||"always"===callSetDisabledState)&&dir.valueAccessor.setDisabledState?.(control.disabled),function setUpViewChangePipeline(control,dir){dir.valueAccessor.registerOnChange((newValue=>{control._pendingValue=newValue,control._pendingChange=!0,control._pendingDirty=!0,"change"===control.updateOn&&updateControl(control,dir)}))}(control,dir),function setUpModelChangePipeline(control,dir){const onChange=(newValue,emitModelEvent)=>{dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)};control.registerOnChange(onChange),dir._registerOnDestroy((()=>{control._unregisterOnChange(onChange)}))}(control,dir),function setUpBlurPipeline(control,dir){dir.valueAccessor.registerOnTouched((()=>{control._pendingTouched=!0,"blur"===control.updateOn&&control._pendingChange&&updateControl(control,dir),"submit"!==control.updateOn&&control.markAsTouched()}))}(control,dir),function setUpDisabledChangeHandler(control,dir){if(dir.valueAccessor.setDisabledState){const onDisabledChange=isDisabled=>{dir.valueAccessor.setDisabledState(isDisabled)};control.registerOnDisabledChange(onDisabledChange),dir._registerOnDestroy((()=>{control._unregisterOnDisabledChange(onDisabledChange)}))}}(control,dir)}function cleanUpControl(control,dir,validateControlPresenceOnChange=!0){const noop=()=>{validateControlPresenceOnChange&&("undefined"==typeof ngDevMode||ngDevMode)&&function _noControlError(dir){return _throwError(dir,"There is no FormControl instance attached to form control element with")}(dir)};dir.valueAccessor&&(dir.valueAccessor.registerOnChange(noop),dir.valueAccessor.registerOnTouched(noop)),cleanUpValidators(control,dir),control&&(dir._invokeOnDestroyCallbacks(),control._registerOnCollectionChange((()=>{})))}function registerOnValidatorChange(validators,onChange){validators.forEach((validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(onChange)}))}function setUpValidators(control,dir){const validators=getControlValidators(control);null!==dir.validator?control.setValidators(mergeValidators(validators,dir.validator)):"function"==typeof validators&&control.setValidators([validators]);const asyncValidators=getControlAsyncValidators(control);null!==dir.asyncValidator?control.setAsyncValidators(mergeValidators(asyncValidators,dir.asyncValidator)):"function"==typeof asyncValidators&&control.setAsyncValidators([asyncValidators]);const onValidatorChange=()=>control.updateValueAndValidity();registerOnValidatorChange(dir._rawValidators,onValidatorChange),registerOnValidatorChange(dir._rawAsyncValidators,onValidatorChange)}function cleanUpValidators(control,dir){let isControlUpdated=!1;if(null!==control){if(null!==dir.validator){const validators=getControlValidators(control);if(Array.isArray(validators)&&validators.length>0){const updatedValidators=validators.filter((validator=>validator!==dir.validator));updatedValidators.length!==validators.length&&(isControlUpdated=!0,control.setValidators(updatedValidators))}}if(null!==dir.asyncValidator){const asyncValidators=getControlAsyncValidators(control);if(Array.isArray(asyncValidators)&&asyncValidators.length>0){const updatedAsyncValidators=asyncValidators.filter((asyncValidator=>asyncValidator!==dir.asyncValidator));updatedAsyncValidators.length!==asyncValidators.length&&(isControlUpdated=!0,control.setAsyncValidators(updatedAsyncValidators))}}}const noop=()=>{};return registerOnValidatorChange(dir._rawValidators,noop),registerOnValidatorChange(dir._rawAsyncValidators,noop),isControlUpdated}function updateControl(control,dir){control._pendingDirty&&control.markAsDirty(),control.setValue(control._pendingValue,{emitModelToViewChange:!1}),dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1}function setUpFormContainer(control,dir){null!=control||"undefined"!=typeof ngDevMode&&!ngDevMode||_throwError(dir,"Cannot find control with"),setUpValidators(control,dir)}function _throwError(dir,message){const messageEnd=_describeControlLocation(dir);throw new Error(`${message} ${messageEnd}`)}function _describeControlLocation(dir){const path=dir.path;return path&&path.length>1?`path: '${path.join(" -> ")}'`:path?.[0]?`name: '${path}'`:"unspecified name attribute"}function isPropertyUpdated(changes,viewModel){if(!changes.hasOwnProperty("model"))return!1;const change=changes.model;return!!change.isFirstChange()||!Object.is(viewModel,change.currentValue)}function syncPendingControls(form,directives){form._syncPendingControls(),directives.forEach((dir=>{const control=dir.control;"submit"===control.updateOn&&control._pendingChange&&(dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1)}))}function selectValueAccessor(dir,valueAccessors){if(!valueAccessors)return null;let defaultAccessor,builtinAccessor,customAccessor;return Array.isArray(valueAccessors)||"undefined"!=typeof ngDevMode&&!ngDevMode||function _throwInvalidValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new core["ɵRuntimeError"](1200,`Value accessor was not provided as an array for form control with ${loc}. Check that the \`NG_VALUE_ACCESSOR\` token is configured as a \`multi: true\` provider.`)}(dir),valueAccessors.forEach((v=>{v.constructor===DefaultValueAccessor?defaultAccessor=v:!function isBuiltInAccessor(valueAccessor){return Object.getPrototypeOf(valueAccessor.constructor)===BuiltInControlValueAccessor}(v)?(customAccessor&&("undefined"==typeof ngDevMode||ngDevMode)&&_throwError(dir,"More than one custom value accessor matches form control with"),customAccessor=v):(builtinAccessor&&("undefined"==typeof ngDevMode||ngDevMode)&&_throwError(dir,"More than one built-in value accessor matches form control with"),builtinAccessor=v)})),customAccessor||(builtinAccessor||(defaultAccessor||(("undefined"==typeof ngDevMode||ngDevMode)&&_throwError(dir,"No valid value accessor for form control with"),null)))}function _ngModelWarning(name,type,instance,warningConfig){"never"!==warningConfig&&((null!==warningConfig&&"once"!==warningConfig||type._ngModelWarningSentOnce)&&("always"!==warningConfig||instance._ngModelWarningSent)||(console.warn(function ngModelWarning(directiveName){return`\n  It looks like you're using ngModel on the same form field as ${directiveName}.\n  Support for using the ngModel input property and ngModelChange event with\n  reactive form directives has been deprecated in Angular v6 and will be removed\n  in a future version of Angular.\n\n  For more information on this, see our API docs here:\n  https://angular.io/api/forms/${"formControl"===directiveName?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n  `}(name)),type._ngModelWarningSentOnce=!0,instance._ngModelWarningSent=!0))}const formDirectiveProvider$1={provide:ControlContainer,useExisting:(0,core.forwardRef)((()=>NgForm))},resolvedPromise$1=Promise.resolve();class NgForm extends ControlContainer{constructor(validators,asyncValidators,callSetDisabledState){super(),this.callSetDisabledState=callSetDisabledState,this.submitted=!1,this._directives=new Set,this.ngSubmit=new core.EventEmitter,this.form=new FormGroup({},composeValidators(validators),composeAsyncValidators(asyncValidators))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(dir){resolvedPromise$1.then((()=>{const container=this._findContainer(dir.path);dir.control=container.registerControl(dir.name,dir.control),setUpControl(dir.control,dir,this.callSetDisabledState),dir.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(dir)}))}getControl(dir){return this.form.get(dir.path)}removeControl(dir){resolvedPromise$1.then((()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name),this._directives.delete(dir)}))}addFormGroup(dir){resolvedPromise$1.then((()=>{const container=this._findContainer(dir.path),group=new FormGroup({});setUpFormContainer(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})}))}removeFormGroup(dir){resolvedPromise$1.then((()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name)}))}getFormGroup(dir){return this.form.get(dir.path)}updateModel(dir,value){resolvedPromise$1.then((()=>{this.form.get(dir.path).setValue(value)}))}setValue(value){this.control.setValue(value)}onSubmit($event){return this.submitted=!0,syncPendingControls(this.form,this._directives),this.ngSubmit.emit($event),"dialog"===$event?.target?.method}onReset(){this.resetForm()}resetForm(value=void 0){this.form.reset(value),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(path){return path.pop(),path.length?this.form.get(path):this.form}}function removeListItem(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}function isFormControlState(formState){return"object"==typeof formState&&null!==formState&&2===Object.keys(formState).length&&"value"in formState&&"disabled"in formState}NgForm.ɵfac=function NgForm_Factory(t){return new(t||NgForm)(core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10),core["ɵɵdirectiveInject"](CALL_SET_DISABLED_STATE,8))},NgForm.ɵdir=core["ɵɵdefineDirective"]({type:NgForm,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function NgForm_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("submit",(function NgForm_submit_HostBindingHandler($event){return ctx.onSubmit($event)}))("reset",(function NgForm_reset_HostBindingHandler(){return ctx.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[core["ɵɵProvidersFeature"]([formDirectiveProvider$1]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgForm,[{type:core.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]",providers:[formDirectiveProvider$1],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],(function(){return[{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[CALL_SET_DISABLED_STATE]}]}]}),{options:[{type:core.Input,args:["ngFormOptions"]}]});const FormControl=class FormControl extends AbstractControl{constructor(formState=null,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(formState),this._setUpdateStrategy(validatorOrOpts),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),isOptionsObj(validatorOrOpts)&&(validatorOrOpts.nonNullable||validatorOrOpts.initialValueIsDefault)&&(isFormControlState(formState)?this.defaultValue=formState.value:this.defaultValue=formState)}setValue(value,options={}){this.value=this._pendingValue=value,this._onChange.length&&!1!==options.emitModelToViewChange&&this._onChange.forEach((changeFn=>changeFn(this.value,!1!==options.emitViewToModelChange))),this.updateValueAndValidity(options)}patchValue(value,options={}){this.setValue(value,options)}reset(formState=this.defaultValue,options={}){this._applyFormState(formState),this.markAsPristine(options),this.markAsUntouched(options),this.setValue(this.value,options),this._pendingChange=!1}_updateValue(){}_anyControls(condition){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(fn){this._onChange.push(fn)}_unregisterOnChange(fn){removeListItem(this._onChange,fn)}registerOnDisabledChange(fn){this._onDisabledChange.push(fn)}_unregisterOnDisabledChange(fn){removeListItem(this._onDisabledChange,fn)}_forEachChild(cb){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)}_applyFormState(formState){isFormControlState(formState)?(this.value=this._pendingValue=formState.value,formState.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=formState}};class AbstractFormGroupDirective extends ControlContainer{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}AbstractFormGroupDirective.ɵfac=function(){let ɵAbstractFormGroupDirective_BaseFactory;return function AbstractFormGroupDirective_Factory(t){return(ɵAbstractFormGroupDirective_BaseFactory||(ɵAbstractFormGroupDirective_BaseFactory=core["ɵɵgetInheritedFactory"](AbstractFormGroupDirective)))(t||AbstractFormGroupDirective)}}(),AbstractFormGroupDirective.ɵdir=core["ɵɵdefineDirective"]({type:AbstractFormGroupDirective,features:[core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](AbstractFormGroupDirective,[{type:core.Directive}],null,null);const modelGroupProvider={provide:ControlContainer,useExisting:(0,core.forwardRef)((()=>NgModelGroup))};class NgModelGroup extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this.name="",this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}_checkParentType(){if(!(this._parent instanceof NgModelGroup)&&!(this._parent instanceof NgForm)&&("undefined"==typeof ngDevMode||ngDevMode))throw function modelGroupParentException(){return new core["ɵRuntimeError"](1353,`\n    ngModelGroup cannot be used with a parent formGroup directive.\n\n    Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n    ${ngModelGroupExample}`)}()}}NgModelGroup.ɵfac=function NgModelGroup_Factory(t){return new(t||NgModelGroup)(core["ɵɵdirectiveInject"](ControlContainer,5),core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10))},NgModelGroup.ɵdir=core["ɵɵdefineDirective"]({type:NgModelGroup,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[core["ɵɵProvidersFeature"]([modelGroupProvider]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgModelGroup,[{type:core.Directive,args:[{selector:"[ngModelGroup]",providers:[modelGroupProvider],exportAs:"ngModelGroup"}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Host},{type:core.SkipSelf}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]}]}),{name:[{type:core.Input,args:["ngModelGroup"]}]});const formControlBinding$1={provide:NgControl,useExisting:(0,core.forwardRef)((()=>NgModel))},resolvedPromise=Promise.resolve();class NgModel extends NgControl{constructor(parent,validators,asyncValidators,valueAccessors,_changeDetectorRef,callSetDisabledState){super(),this._changeDetectorRef=_changeDetectorRef,this.callSetDisabledState=callSetDisabledState,this.control=new FormControl,this._registered=!1,this.name="",this.update=new core.EventEmitter,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(this,valueAccessors)}ngOnChanges(changes){if(this._checkForErrors(),!this._registered||"name"in changes){if(this._registered&&(this._checkName(),this.formDirective)){const oldName=changes.name.previousValue;this.formDirective.removeControl({name:oldName,path:this._getPath(oldName)})}this._setUpControl()}"isDisabled"in changes&&this._updateDisabled(changes),isPropertyUpdated(changes,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){setUpControl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){if("undefined"==typeof ngDevMode||ngDevMode){if(!(this._parent instanceof NgModelGroup)&&this._parent instanceof AbstractFormGroupDirective)throw function formGroupNameException(){return new core["ɵRuntimeError"](1351,`\n    ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n    Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n    ${ngModelGroupExample}`)}();if(!(this._parent instanceof NgModelGroup||this._parent instanceof NgForm))throw function modelParentException(){return new core["ɵRuntimeError"](1350,`\n    ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n    formGroup's partner directive "formControlName" instead.  Example:\n\n    ${formControlNameExample}\n\n    Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n    Example:\n\n    \n  <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n      <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n  </div>\n`)}()}}_checkName(){if(this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&!this.name&&("undefined"==typeof ngDevMode||ngDevMode))throw function missingNameException(){return new core["ɵRuntimeError"](1352,'If ngModel is used within a form tag, either the name attribute must be set or the form\n    control must be defined as \'standalone\' in ngModelOptions.\n\n    Example 1: <input [(ngModel)]="person.firstName" name="first">\n    Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}()}_updateValue(value){resolvedPromise.then((()=>{this.control.setValue(value,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()}))}_updateDisabled(changes){const disabledValue=changes.isDisabled.currentValue,isDisabled=0!==disabledValue&&(0,core["ɵcoerceToBoolean"])(disabledValue);resolvedPromise.then((()=>{isDisabled&&!this.control.disabled?this.control.disable():!isDisabled&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()}))}_getPath(controlName){return this._parent?controlPath(controlName,this._parent):[controlName]}}NgModel.ɵfac=function NgModel_Factory(t){return new(t||NgModel)(core["ɵɵdirectiveInject"](ControlContainer,9),core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_VALUE_ACCESSOR,10),core["ɵɵdirectiveInject"](core.ChangeDetectorRef,8),core["ɵɵdirectiveInject"](CALL_SET_DISABLED_STATE,8))},NgModel.ɵdir=core["ɵɵdefineDirective"]({type:NgModel,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[core["ɵɵProvidersFeature"]([formControlBinding$1]),core["ɵɵInheritDefinitionFeature"],core["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgModel,[{type:core.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[formControlBinding$1],exportAs:"ngModel"}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Optional},{type:core.Host}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALUE_ACCESSOR]}]},{type:core.ChangeDetectorRef,decorators:[{type:core.Optional},{type:core.Inject,args:[core.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[CALL_SET_DISABLED_STATE]}]}]}),{name:[{type:core.Input}],isDisabled:[{type:core.Input,args:["disabled"]}],model:[{type:core.Input,args:["ngModel"]}],options:[{type:core.Input,args:["ngModelOptions"]}],update:[{type:core.Output,args:["ngModelChange"]}]});class ɵNgNoValidate{}ɵNgNoValidate.ɵfac=function ɵNgNoValidate_Factory(t){return new(t||ɵNgNoValidate)},ɵNgNoValidate.ɵdir=core["ɵɵdefineDirective"]({type:ɵNgNoValidate,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](ɵNgNoValidate,[{type:core.Directive,args:[{selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}}]}],null,null);const NUMBER_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>NumberValueAccessor)),multi:!0};class NumberValueAccessor extends BuiltInControlValueAccessor{writeValue(value){const normalizedValue=null==value?"":value;this.setProperty("value",normalizedValue)}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}}NumberValueAccessor.ɵfac=function(){let ɵNumberValueAccessor_BaseFactory;return function NumberValueAccessor_Factory(t){return(ɵNumberValueAccessor_BaseFactory||(ɵNumberValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](NumberValueAccessor)))(t||NumberValueAccessor)}}(),NumberValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:NumberValueAccessor,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function NumberValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("input",(function NumberValueAccessor_input_HostBindingHandler($event){return ctx.onChange($event.target.value)}))("blur",(function NumberValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},features:[core["ɵɵProvidersFeature"]([NUMBER_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NumberValueAccessor,[{type:core.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[NUMBER_VALUE_ACCESSOR]}]}],null,null);const RADIO_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>RadioControlValueAccessor)),multi:!0};class RadioControlRegistryModule{}RadioControlRegistryModule.ɵfac=function RadioControlRegistryModule_Factory(t){return new(t||RadioControlRegistryModule)},RadioControlRegistryModule.ɵmod=core["ɵɵdefineNgModule"]({type:RadioControlRegistryModule}),RadioControlRegistryModule.ɵinj=core["ɵɵdefineInjector"]({}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](RadioControlRegistryModule,[{type:core.NgModule}],null,null);class RadioControlRegistry{constructor(){this._accessors=[]}add(control,accessor){this._accessors.push([control,accessor])}remove(accessor){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===accessor)return void this._accessors.splice(i,1)}select(accessor){this._accessors.forEach((c=>{this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck(accessor.value)}))}_isSameGroup(controlPair,accessor){return!!controlPair[0].control&&(controlPair[0]._parent===accessor._control._parent&&controlPair[1].name===accessor.name)}}RadioControlRegistry.ɵfac=function RadioControlRegistry_Factory(t){return new(t||RadioControlRegistry)},RadioControlRegistry.ɵprov=core["ɵɵdefineInjectable"]({token:RadioControlRegistry,factory:RadioControlRegistry.ɵfac,providedIn:RadioControlRegistryModule}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](RadioControlRegistry,[{type:core.Injectable,args:[{providedIn:RadioControlRegistryModule}]}],null,null);class RadioControlValueAccessor extends BuiltInControlValueAccessor{constructor(renderer,elementRef,_registry,_injector){super(renderer,elementRef),this._registry=_registry,this._injector=_injector,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,core.inject)(CALL_SET_DISABLED_STATE,{optional:!0})??setDisabledStateDefault}ngOnInit(){this._control=this._injector.get(NgControl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(value){this._state=value===this.value,this.setProperty("checked",this._state)}registerOnChange(fn){this._fn=fn,this.onChange=()=>{fn(this.value),this._registry.select(this)}}setDisabledState(isDisabled){(this.setDisabledStateFired||isDisabled||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",isDisabled),this.setDisabledStateFired=!0}fireUncheck(value){this.writeValue(value)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&("undefined"==typeof ngDevMode||ngDevMode)&&function throwNameError(){throw new core["ɵRuntimeError"](1202,'\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}(),!this.name&&this.formControlName&&(this.name=this.formControlName)}}RadioControlValueAccessor.ɵfac=function RadioControlValueAccessor_Factory(t){return new(t||RadioControlValueAccessor)(core["ɵɵdirectiveInject"](core.Renderer2),core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](RadioControlRegistry),core["ɵɵdirectiveInject"](core.Injector))},RadioControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:RadioControlValueAccessor,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function RadioControlValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("change",(function RadioControlValueAccessor_change_HostBindingHandler(){return ctx.onChange()}))("blur",(function RadioControlValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[core["ɵɵProvidersFeature"]([RADIO_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](RadioControlValueAccessor,[{type:core.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[RADIO_VALUE_ACCESSOR]}]}],(function(){return[{type:core.Renderer2},{type:core.ElementRef},{type:RadioControlRegistry},{type:core.Injector}]}),{name:[{type:core.Input}],formControlName:[{type:core.Input}],value:[{type:core.Input}]});const RANGE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>RangeValueAccessor)),multi:!0};class RangeValueAccessor extends BuiltInControlValueAccessor{writeValue(value){this.setProperty("value",parseFloat(value))}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}}RangeValueAccessor.ɵfac=function(){let ɵRangeValueAccessor_BaseFactory;return function RangeValueAccessor_Factory(t){return(ɵRangeValueAccessor_BaseFactory||(ɵRangeValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](RangeValueAccessor)))(t||RangeValueAccessor)}}(),RangeValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:RangeValueAccessor,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function RangeValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("change",(function RangeValueAccessor_change_HostBindingHandler($event){return ctx.onChange($event.target.value)}))("input",(function RangeValueAccessor_input_HostBindingHandler($event){return ctx.onChange($event.target.value)}))("blur",(function RangeValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},features:[core["ɵɵProvidersFeature"]([RANGE_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](RangeValueAccessor,[{type:core.Directive,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[RANGE_VALUE_ACCESSOR]}]}],null,null);const NG_MODEL_WITH_FORM_CONTROL_WARNING=new core.InjectionToken("NgModelWithFormControlWarning"),formControlBinding={provide:NgControl,useExisting:(0,core.forwardRef)((()=>FormControlDirective))};class FormControlDirective extends NgControl{set isDisabled(isDisabled){("undefined"==typeof ngDevMode||ngDevMode)&&console.warn(disabledAttrWarning)}constructor(validators,asyncValidators,valueAccessors,_ngModelWarningConfig,callSetDisabledState){super(),this._ngModelWarningConfig=_ngModelWarningConfig,this.callSetDisabledState=callSetDisabledState,this.update=new core.EventEmitter,this._ngModelWarningSent=!1,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(this,valueAccessors)}ngOnChanges(changes){if(this._isControlChanged(changes)){const previousForm=changes.form.previousValue;previousForm&&cleanUpControl(previousForm,this,!1),setUpControl(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}isPropertyUpdated(changes,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&_ngModelWarning("formControl",FormControlDirective,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&cleanUpControl(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_isControlChanged(changes){return changes.hasOwnProperty("form")}}FormControlDirective._ngModelWarningSentOnce=!1,FormControlDirective.ɵfac=function FormControlDirective_Factory(t){return new(t||FormControlDirective)(core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_VALUE_ACCESSOR,10),core["ɵɵdirectiveInject"](NG_MODEL_WITH_FORM_CONTROL_WARNING,8),core["ɵɵdirectiveInject"](CALL_SET_DISABLED_STATE,8))},FormControlDirective.ɵdir=core["ɵɵdefineDirective"]({type:FormControlDirective,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[core["ɵɵProvidersFeature"]([formControlBinding]),core["ɵɵInheritDefinitionFeature"],core["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormControlDirective,[{type:core.Directive,args:[{selector:"[formControl]",providers:[formControlBinding],exportAs:"ngForm"}]}],(function(){return[{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALUE_ACCESSOR]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[NG_MODEL_WITH_FORM_CONTROL_WARNING]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[CALL_SET_DISABLED_STATE]}]}]}),{form:[{type:core.Input,args:["formControl"]}],isDisabled:[{type:core.Input,args:["disabled"]}],model:[{type:core.Input,args:["ngModel"]}],update:[{type:core.Output,args:["ngModelChange"]}]});const formDirectiveProvider={provide:ControlContainer,useExisting:(0,core.forwardRef)((()=>FormGroupDirective))};class FormGroupDirective extends ControlContainer{constructor(validators,asyncValidators,callSetDisabledState){super(),this.callSetDisabledState=callSetDisabledState,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new core.EventEmitter,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnChanges(changes){this._checkFormPresent(),changes.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cleanUpValidators(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange((()=>{})))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(dir){const ctrl=this.form.get(dir.path);return setUpControl(ctrl,dir,this.callSetDisabledState),ctrl.updateValueAndValidity({emitEvent:!1}),this.directives.push(dir),ctrl}getControl(dir){return this.form.get(dir.path)}removeControl(dir){cleanUpControl(dir.control||null,dir,!1),function removeListItem$1(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}(this.directives,dir)}addFormGroup(dir){this._setUpFormContainer(dir)}removeFormGroup(dir){this._cleanUpFormContainer(dir)}getFormGroup(dir){return this.form.get(dir.path)}addFormArray(dir){this._setUpFormContainer(dir)}removeFormArray(dir){this._cleanUpFormContainer(dir)}getFormArray(dir){return this.form.get(dir.path)}updateModel(dir,value){this.form.get(dir.path).setValue(value)}onSubmit($event){return this.submitted=!0,syncPendingControls(this.form,this.directives),this.ngSubmit.emit($event),"dialog"===$event?.target?.method}onReset(){this.resetForm()}resetForm(value=void 0){this.form.reset(value),this.submitted=!1}_updateDomValue(){this.directives.forEach((dir=>{const oldCtrl=dir.control,newCtrl=this.form.get(dir.path);oldCtrl!==newCtrl&&(cleanUpControl(oldCtrl||null,dir),newCtrl instanceof FormControl&&(setUpControl(newCtrl,dir,this.callSetDisabledState),dir.control=newCtrl))})),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(dir){const ctrl=this.form.get(dir.path);setUpFormContainer(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(dir){if(this.form){const ctrl=this.form.get(dir.path);if(ctrl){const isControlUpdated=function cleanUpFormContainer(control,dir){return cleanUpValidators(control,dir)}(ctrl,dir);isControlUpdated&&ctrl.updateValueAndValidity({emitEvent:!1})}}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange((()=>{}))}_updateValidators(){setUpValidators(this.form,this),this._oldForm&&cleanUpValidators(this._oldForm,this)}_checkFormPresent(){if(!this.form&&("undefined"==typeof ngDevMode||ngDevMode))throw function missingFormException(){return new core["ɵRuntimeError"](1052,`formGroup expects a FormGroup instance. Please pass one in.\n\n      Example:\n\n      ${formControlNameExample}`)}()}}FormGroupDirective.ɵfac=function FormGroupDirective_Factory(t){return new(t||FormGroupDirective)(core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10),core["ɵɵdirectiveInject"](CALL_SET_DISABLED_STATE,8))},FormGroupDirective.ɵdir=core["ɵɵdefineDirective"]({type:FormGroupDirective,selectors:[["","formGroup",""]],hostBindings:function FormGroupDirective_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("submit",(function FormGroupDirective_submit_HostBindingHandler($event){return ctx.onSubmit($event)}))("reset",(function FormGroupDirective_reset_HostBindingHandler(){return ctx.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[core["ɵɵProvidersFeature"]([formDirectiveProvider]),core["ɵɵInheritDefinitionFeature"],core["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormGroupDirective,[{type:core.Directive,args:[{selector:"[formGroup]",providers:[formDirectiveProvider],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],(function(){return[{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[CALL_SET_DISABLED_STATE]}]}]}),{form:[{type:core.Input,args:["formGroup"]}],ngSubmit:[{type:core.Output}]});const formGroupNameProvider={provide:ControlContainer,useExisting:(0,core.forwardRef)((()=>FormGroupName))};class FormGroupName extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this.name=null,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}_checkParentType(){if(_hasInvalidParent(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode))throw function groupParentException(){return new core["ɵRuntimeError"](1053,`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n    directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formGroupNameExample}`)}()}}FormGroupName.ɵfac=function FormGroupName_Factory(t){return new(t||FormGroupName)(core["ɵɵdirectiveInject"](ControlContainer,13),core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10))},FormGroupName.ɵdir=core["ɵɵdefineDirective"]({type:FormGroupName,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[core["ɵɵProvidersFeature"]([formGroupNameProvider]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormGroupName,[{type:core.Directive,args:[{selector:"[formGroupName]",providers:[formGroupNameProvider]}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Optional},{type:core.Host},{type:core.SkipSelf}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]}]}),{name:[{type:core.Input,args:["formGroupName"]}]});const formArrayNameProvider={provide:ControlContainer,useExisting:(0,core.forwardRef)((()=>FormArrayName))};class FormArrayName extends ControlContainer{constructor(parent,validators,asyncValidators){super(),this.name=null,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){if(_hasInvalidParent(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode))throw function arrayParentException(){return new core["ɵRuntimeError"](1054,'formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      \n  <div [formGroup]="myGroup">\n    <div formArrayName="cities">\n      <div *ngFor="let city of cityArray.controls; index as i">\n        <input [formControlName]="i">\n      </div>\n    </div>\n  </div>\n\n  In your class:\n\n  this.cityArray = new FormArray([new FormControl(\'SF\')]);\n  this.myGroup = new FormGroup({\n    cities: this.cityArray\n  });')}()}}function _hasInvalidParent(parent){return!(parent instanceof FormGroupName||parent instanceof FormGroupDirective||parent instanceof FormArrayName)}FormArrayName.ɵfac=function FormArrayName_Factory(t){return new(t||FormArrayName)(core["ɵɵdirectiveInject"](ControlContainer,13),core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10))},FormArrayName.ɵdir=core["ɵɵdefineDirective"]({type:FormArrayName,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[core["ɵɵProvidersFeature"]([formArrayNameProvider]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormArrayName,[{type:core.Directive,args:[{selector:"[formArrayName]",providers:[formArrayNameProvider]}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Optional},{type:core.Host},{type:core.SkipSelf}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]}]}),{name:[{type:core.Input,args:["formArrayName"]}]});const controlNameBinding={provide:NgControl,useExisting:(0,core.forwardRef)((()=>FormControlName))};class FormControlName extends NgControl{set isDisabled(isDisabled){("undefined"==typeof ngDevMode||ngDevMode)&&console.warn(disabledAttrWarning)}constructor(parent,validators,asyncValidators,valueAccessors,_ngModelWarningConfig){super(),this._ngModelWarningConfig=_ngModelWarningConfig,this._added=!1,this.name=null,this.update=new core.EventEmitter,this._ngModelWarningSent=!1,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(this,valueAccessors)}ngOnChanges(changes){this._added||this._setUpControl(),isPropertyUpdated(changes,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&_ngModelWarning("formControlName",FormControlName,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){if("undefined"==typeof ngDevMode||ngDevMode){if(!(this._parent instanceof FormGroupName)&&this._parent instanceof AbstractFormGroupDirective)throw function ngModelGroupException(){return new core["ɵRuntimeError"](1051,`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n      that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n      Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n      ${formGroupNameExample}\n\n      Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n      ${ngModelGroupExample}`)}();if(!(this._parent instanceof FormGroupName||this._parent instanceof FormGroupDirective||this._parent instanceof FormArrayName))throw function controlParentException(){return new core["ɵRuntimeError"](1050,`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formControlNameExample}`)}()}}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}FormControlName._ngModelWarningSentOnce=!1,FormControlName.ɵfac=function FormControlName_Factory(t){return new(t||FormControlName)(core["ɵɵdirectiveInject"](ControlContainer,13),core["ɵɵdirectiveInject"](NG_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_ASYNC_VALIDATORS,10),core["ɵɵdirectiveInject"](NG_VALUE_ACCESSOR,10),core["ɵɵdirectiveInject"](NG_MODEL_WITH_FORM_CONTROL_WARNING,8))},FormControlName.ɵdir=core["ɵɵdefineDirective"]({type:FormControlName,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[core["ɵɵProvidersFeature"]([controlNameBinding]),core["ɵɵInheritDefinitionFeature"],core["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormControlName,[{type:core.Directive,args:[{selector:"[formControlName]",providers:[controlNameBinding]}]}],(function(){return[{type:ControlContainer,decorators:[{type:core.Optional},{type:core.Host},{type:core.SkipSelf}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_ASYNC_VALIDATORS]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Self},{type:core.Inject,args:[NG_VALUE_ACCESSOR]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[NG_MODEL_WITH_FORM_CONTROL_WARNING]}]}]}),{name:[{type:core.Input,args:["formControlName"]}],isDisabled:[{type:core.Input,args:["disabled"]}],model:[{type:core.Input,args:["ngModel"]}],update:[{type:core.Output,args:["ngModelChange"]}]});const SELECT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>SelectControlValueAccessor)),multi:!0};function _buildValueString$1(id,value){return null==id?`${value}`:(value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))}class SelectControlValueAccessor extends BuiltInControlValueAccessor{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(fn){if("function"!=typeof fn&&("undefined"==typeof ngDevMode||ngDevMode))throw new core["ɵRuntimeError"](1201,`compareWith must be a function, but received ${JSON.stringify(fn)}`);this._compareWith=fn}writeValue(value){this.value=value;const valueString=_buildValueString$1(this._getOptionId(value),value);this.setProperty("value",valueString)}registerOnChange(fn){this.onChange=valueString=>{this.value=this._getOptionValue(valueString),fn(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(value){for(const id of this._optionMap.keys())if(this._compareWith(this._optionMap.get(id),value))return id;return null}_getOptionValue(valueString){const id=function _extractId$1(valueString){return valueString.split(":")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id):valueString}}SelectControlValueAccessor.ɵfac=function(){let ɵSelectControlValueAccessor_BaseFactory;return function SelectControlValueAccessor_Factory(t){return(ɵSelectControlValueAccessor_BaseFactory||(ɵSelectControlValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](SelectControlValueAccessor)))(t||SelectControlValueAccessor)}}(),SelectControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:SelectControlValueAccessor,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function SelectControlValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("change",(function SelectControlValueAccessor_change_HostBindingHandler($event){return ctx.onChange($event.target.value)}))("blur",(function SelectControlValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},inputs:{compareWith:"compareWith"},features:[core["ɵɵProvidersFeature"]([SELECT_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](SelectControlValueAccessor,[{type:core.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[SELECT_VALUE_ACCESSOR]}]}],null,{compareWith:[{type:core.Input}]});class NgSelectOption{constructor(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,this._select&&(this.id=this._select._registerOption())}set ngValue(value){null!=this._select&&(this._select._optionMap.set(this.id,value),this._setElementValue(_buildValueString$1(this.id,value)),this._select.writeValue(this._select.value))}set value(value){this._setElementValue(value),this._select&&this._select.writeValue(this._select.value)}_setElementValue(value){this._renderer.setProperty(this._element.nativeElement,"value",value)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}NgSelectOption.ɵfac=function NgSelectOption_Factory(t){return new(t||NgSelectOption)(core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](core.Renderer2),core["ɵɵdirectiveInject"](SelectControlValueAccessor,9))},NgSelectOption.ɵdir=core["ɵɵdefineDirective"]({type:NgSelectOption,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgSelectOption,[{type:core.Directive,args:[{selector:"option"}]}],(function(){return[{type:core.ElementRef},{type:core.Renderer2},{type:SelectControlValueAccessor,decorators:[{type:core.Optional},{type:core.Host}]}]}),{ngValue:[{type:core.Input,args:["ngValue"]}],value:[{type:core.Input,args:["value"]}]});const SELECT_MULTIPLE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,core.forwardRef)((()=>SelectMultipleControlValueAccessor)),multi:!0};function _buildValueString(id,value){return null==id?`${value}`:("string"==typeof value&&(value=`'${value}'`),value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))}class SelectMultipleControlValueAccessor extends BuiltInControlValueAccessor{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(fn){if("function"!=typeof fn&&("undefined"==typeof ngDevMode||ngDevMode))throw new core["ɵRuntimeError"](1201,`compareWith must be a function, but received ${JSON.stringify(fn)}`);this._compareWith=fn}writeValue(value){let optionSelectedStateSetter;if(this.value=value,Array.isArray(value)){const ids=value.map((v=>this._getOptionId(v)));optionSelectedStateSetter=(opt,o)=>{opt._setSelected(ids.indexOf(o.toString())>-1)}}else optionSelectedStateSetter=(opt,o)=>{opt._setSelected(!1)};this._optionMap.forEach(optionSelectedStateSetter)}registerOnChange(fn){this.onChange=element=>{const selected=[],selectedOptions=element.selectedOptions;if(void 0!==selectedOptions){const options=selectedOptions;for(let i=0;i<options.length;i++){const opt=options[i],val=this._getOptionValue(opt.value);selected.push(val)}}else{const options=element.options;for(let i=0;i<options.length;i++){const opt=options[i];if(opt.selected){const val=this._getOptionValue(opt.value);selected.push(val)}}}this.value=selected,fn(selected)}}_registerOption(value){const id=(this._idCounter++).toString();return this._optionMap.set(id,value),id}_getOptionId(value){for(const id of this._optionMap.keys())if(this._compareWith(this._optionMap.get(id)._value,value))return id;return null}_getOptionValue(valueString){const id=function _extractId(valueString){return valueString.split(":")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id)._value:valueString}}SelectMultipleControlValueAccessor.ɵfac=function(){let ɵSelectMultipleControlValueAccessor_BaseFactory;return function SelectMultipleControlValueAccessor_Factory(t){return(ɵSelectMultipleControlValueAccessor_BaseFactory||(ɵSelectMultipleControlValueAccessor_BaseFactory=core["ɵɵgetInheritedFactory"](SelectMultipleControlValueAccessor)))(t||SelectMultipleControlValueAccessor)}}(),SelectMultipleControlValueAccessor.ɵdir=core["ɵɵdefineDirective"]({type:SelectMultipleControlValueAccessor,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function SelectMultipleControlValueAccessor_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("change",(function SelectMultipleControlValueAccessor_change_HostBindingHandler($event){return ctx.onChange($event.target)}))("blur",(function SelectMultipleControlValueAccessor_blur_HostBindingHandler(){return ctx.onTouched()}))},inputs:{compareWith:"compareWith"},features:[core["ɵɵProvidersFeature"]([SELECT_MULTIPLE_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](SelectMultipleControlValueAccessor,[{type:core.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[SELECT_MULTIPLE_VALUE_ACCESSOR]}]}],null,{compareWith:[{type:core.Input}]});class ɵNgSelectMultipleOption{constructor(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,this._select&&(this.id=this._select._registerOption(this))}set ngValue(value){null!=this._select&&(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))}set value(value){this._select?(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value)):this._setElementValue(value)}_setElementValue(value){this._renderer.setProperty(this._element.nativeElement,"value",value)}_setSelected(selected){this._renderer.setProperty(this._element.nativeElement,"selected",selected)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function toInteger(value){return"number"==typeof value?value:parseInt(value,10)}function toFloat(value){return"number"==typeof value?value:parseFloat(value)}ɵNgSelectMultipleOption.ɵfac=function ɵNgSelectMultipleOption_Factory(t){return new(t||ɵNgSelectMultipleOption)(core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](core.Renderer2),core["ɵɵdirectiveInject"](SelectMultipleControlValueAccessor,9))},ɵNgSelectMultipleOption.ɵdir=core["ɵɵdefineDirective"]({type:ɵNgSelectMultipleOption,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](ɵNgSelectMultipleOption,[{type:core.Directive,args:[{selector:"option"}]}],(function(){return[{type:core.ElementRef},{type:core.Renderer2},{type:SelectMultipleControlValueAccessor,decorators:[{type:core.Optional},{type:core.Host}]}]}),{ngValue:[{type:core.Input,args:["ngValue"]}],value:[{type:core.Input,args:["value"]}]});class AbstractValidatorDirective{constructor(){this._validator=nullValidator}ngOnChanges(changes){if(this.inputName in changes){const input=this.normalizeInput(changes[this.inputName].currentValue);this._enabled=this.enabled(input),this._validator=this._enabled?this.createValidator(input):nullValidator,this._onChange&&this._onChange()}}validate(control){return this._validator(control)}registerOnValidatorChange(fn){this._onChange=fn}enabled(input){return null!=input}}AbstractValidatorDirective.ɵfac=function AbstractValidatorDirective_Factory(t){return new(t||AbstractValidatorDirective)},AbstractValidatorDirective.ɵdir=core["ɵɵdefineDirective"]({type:AbstractValidatorDirective,features:[core["ɵɵNgOnChangesFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](AbstractValidatorDirective,[{type:core.Directive}],null,null);const MAX_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>MaxValidator)),multi:!0};class MaxValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=input=>toFloat(input),this.createValidator=max=>maxValidator(max)}}MaxValidator.ɵfac=function(){let ɵMaxValidator_BaseFactory;return function MaxValidator_Factory(t){return(ɵMaxValidator_BaseFactory||(ɵMaxValidator_BaseFactory=core["ɵɵgetInheritedFactory"](MaxValidator)))(t||MaxValidator)}}(),MaxValidator.ɵdir=core["ɵɵdefineDirective"]({type:MaxValidator,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function MaxValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("max",ctx._enabled?ctx.max:null)},inputs:{max:"max"},features:[core["ɵɵProvidersFeature"]([MAX_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](MaxValidator,[{type:core.Directive,args:[{selector:"input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]",providers:[MAX_VALIDATOR],host:{"[attr.max]":"_enabled ? max : null"}}]}],null,{max:[{type:core.Input}]});const MIN_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>MinValidator)),multi:!0};class MinValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=input=>toFloat(input),this.createValidator=min=>minValidator(min)}}MinValidator.ɵfac=function(){let ɵMinValidator_BaseFactory;return function MinValidator_Factory(t){return(ɵMinValidator_BaseFactory||(ɵMinValidator_BaseFactory=core["ɵɵgetInheritedFactory"](MinValidator)))(t||MinValidator)}}(),MinValidator.ɵdir=core["ɵɵdefineDirective"]({type:MinValidator,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function MinValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("min",ctx._enabled?ctx.min:null)},inputs:{min:"min"},features:[core["ɵɵProvidersFeature"]([MIN_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](MinValidator,[{type:core.Directive,args:[{selector:"input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]",providers:[MIN_VALIDATOR],host:{"[attr.min]":"_enabled ? min : null"}}]}],null,{min:[{type:core.Input}]});const REQUIRED_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>RequiredValidator)),multi:!0},CHECKBOX_REQUIRED_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>CheckboxRequiredValidator)),multi:!0};class RequiredValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=core["ɵcoerceToBoolean"],this.createValidator=input=>requiredValidator}enabled(input){return input}}RequiredValidator.ɵfac=function(){let ɵRequiredValidator_BaseFactory;return function RequiredValidator_Factory(t){return(ɵRequiredValidator_BaseFactory||(ɵRequiredValidator_BaseFactory=core["ɵɵgetInheritedFactory"](RequiredValidator)))(t||RequiredValidator)}}(),RequiredValidator.ɵdir=core["ɵɵdefineDirective"]({type:RequiredValidator,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function RequiredValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("required",ctx._enabled?"":null)},inputs:{required:"required"},features:[core["ɵɵProvidersFeature"]([REQUIRED_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](RequiredValidator,[{type:core.Directive,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[REQUIRED_VALIDATOR],host:{"[attr.required]":'_enabled ? "" : null'}}]}],null,{required:[{type:core.Input}]});class CheckboxRequiredValidator extends RequiredValidator{constructor(){super(...arguments),this.createValidator=input=>requiredTrueValidator}}CheckboxRequiredValidator.ɵfac=function(){let ɵCheckboxRequiredValidator_BaseFactory;return function CheckboxRequiredValidator_Factory(t){return(ɵCheckboxRequiredValidator_BaseFactory||(ɵCheckboxRequiredValidator_BaseFactory=core["ɵɵgetInheritedFactory"](CheckboxRequiredValidator)))(t||CheckboxRequiredValidator)}}(),CheckboxRequiredValidator.ɵdir=core["ɵɵdefineDirective"]({type:CheckboxRequiredValidator,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function CheckboxRequiredValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("required",ctx._enabled?"":null)},features:[core["ɵɵProvidersFeature"]([CHECKBOX_REQUIRED_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CheckboxRequiredValidator,[{type:core.Directive,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[CHECKBOX_REQUIRED_VALIDATOR],host:{"[attr.required]":'_enabled ? "" : null'}}]}],null,null);const EMAIL_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>EmailValidator)),multi:!0};class EmailValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=core["ɵcoerceToBoolean"],this.createValidator=input=>emailValidator}enabled(input){return input}}EmailValidator.ɵfac=function(){let ɵEmailValidator_BaseFactory;return function EmailValidator_Factory(t){return(ɵEmailValidator_BaseFactory||(ɵEmailValidator_BaseFactory=core["ɵɵgetInheritedFactory"](EmailValidator)))(t||EmailValidator)}}(),EmailValidator.ɵdir=core["ɵɵdefineDirective"]({type:EmailValidator,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[core["ɵɵProvidersFeature"]([EMAIL_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](EmailValidator,[{type:core.Directive,args:[{selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[EMAIL_VALIDATOR]}]}],null,{email:[{type:core.Input}]});const MIN_LENGTH_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>MinLengthValidator)),multi:!0};class MinLengthValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=input=>toInteger(input),this.createValidator=minlength=>minLengthValidator(minlength)}}MinLengthValidator.ɵfac=function(){let ɵMinLengthValidator_BaseFactory;return function MinLengthValidator_Factory(t){return(ɵMinLengthValidator_BaseFactory||(ɵMinLengthValidator_BaseFactory=core["ɵɵgetInheritedFactory"](MinLengthValidator)))(t||MinLengthValidator)}}(),MinLengthValidator.ɵdir=core["ɵɵdefineDirective"]({type:MinLengthValidator,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function MinLengthValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("minlength",ctx._enabled?ctx.minlength:null)},inputs:{minlength:"minlength"},features:[core["ɵɵProvidersFeature"]([MIN_LENGTH_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](MinLengthValidator,[{type:core.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[MIN_LENGTH_VALIDATOR],host:{"[attr.minlength]":"_enabled ? minlength : null"}}]}],null,{minlength:[{type:core.Input}]});const MAX_LENGTH_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>MaxLengthValidator)),multi:!0};class MaxLengthValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=input=>toInteger(input),this.createValidator=maxlength=>maxLengthValidator(maxlength)}}MaxLengthValidator.ɵfac=function(){let ɵMaxLengthValidator_BaseFactory;return function MaxLengthValidator_Factory(t){return(ɵMaxLengthValidator_BaseFactory||(ɵMaxLengthValidator_BaseFactory=core["ɵɵgetInheritedFactory"](MaxLengthValidator)))(t||MaxLengthValidator)}}(),MaxLengthValidator.ɵdir=core["ɵɵdefineDirective"]({type:MaxLengthValidator,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function MaxLengthValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("maxlength",ctx._enabled?ctx.maxlength:null)},inputs:{maxlength:"maxlength"},features:[core["ɵɵProvidersFeature"]([MAX_LENGTH_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](MaxLengthValidator,[{type:core.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[MAX_LENGTH_VALIDATOR],host:{"[attr.maxlength]":"_enabled ? maxlength : null"}}]}],null,{maxlength:[{type:core.Input}]});const PATTERN_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,core.forwardRef)((()=>PatternValidator)),multi:!0};class PatternValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=input=>input,this.createValidator=input=>patternValidator(input)}}PatternValidator.ɵfac=function(){let ɵPatternValidator_BaseFactory;return function PatternValidator_Factory(t){return(ɵPatternValidator_BaseFactory||(ɵPatternValidator_BaseFactory=core["ɵɵgetInheritedFactory"](PatternValidator)))(t||PatternValidator)}}(),PatternValidator.ɵdir=core["ɵɵdefineDirective"]({type:PatternValidator,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function PatternValidator_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("pattern",ctx._enabled?ctx.pattern:null)},inputs:{pattern:"pattern"},features:[core["ɵɵProvidersFeature"]([PATTERN_VALIDATOR]),core["ɵɵInheritDefinitionFeature"]]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](PatternValidator,[{type:core.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[PATTERN_VALIDATOR],host:{"[attr.pattern]":"_enabled ? pattern : null"}}]}],null,{pattern:[{type:core.Input}]});const SHARED_FORM_DIRECTIVES=[ɵNgNoValidate,NgSelectOption,ɵNgSelectMultipleOption,DefaultValueAccessor,NumberValueAccessor,RangeValueAccessor,CheckboxControlValueAccessor,SelectControlValueAccessor,SelectMultipleControlValueAccessor,RadioControlValueAccessor,NgControlStatus,NgControlStatusGroup,RequiredValidator,MinLengthValidator,MaxLengthValidator,PatternValidator,CheckboxRequiredValidator,EmailValidator,MinValidator,MaxValidator],TEMPLATE_DRIVEN_DIRECTIVES=[NgModel,NgModelGroup,NgForm],REACTIVE_DRIVEN_DIRECTIVES=[FormControlDirective,FormGroupDirective,FormControlName,FormGroupName,FormArrayName];class ɵInternalFormsSharedModule{}ɵInternalFormsSharedModule.ɵfac=function ɵInternalFormsSharedModule_Factory(t){return new(t||ɵInternalFormsSharedModule)},ɵInternalFormsSharedModule.ɵmod=core["ɵɵdefineNgModule"]({type:ɵInternalFormsSharedModule,declarations:[ɵNgNoValidate,NgSelectOption,ɵNgSelectMultipleOption,DefaultValueAccessor,NumberValueAccessor,RangeValueAccessor,CheckboxControlValueAccessor,SelectControlValueAccessor,SelectMultipleControlValueAccessor,RadioControlValueAccessor,NgControlStatus,NgControlStatusGroup,RequiredValidator,MinLengthValidator,MaxLengthValidator,PatternValidator,CheckboxRequiredValidator,EmailValidator,MinValidator,MaxValidator],imports:[RadioControlRegistryModule],exports:[ɵNgNoValidate,NgSelectOption,ɵNgSelectMultipleOption,DefaultValueAccessor,NumberValueAccessor,RangeValueAccessor,CheckboxControlValueAccessor,SelectControlValueAccessor,SelectMultipleControlValueAccessor,RadioControlValueAccessor,NgControlStatus,NgControlStatusGroup,RequiredValidator,MinLengthValidator,MaxLengthValidator,PatternValidator,CheckboxRequiredValidator,EmailValidator,MinValidator,MaxValidator]}),ɵInternalFormsSharedModule.ɵinj=core["ɵɵdefineInjector"]({imports:[RadioControlRegistryModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](ɵInternalFormsSharedModule,[{type:core.NgModule,args:[{declarations:SHARED_FORM_DIRECTIVES,imports:[RadioControlRegistryModule],exports:SHARED_FORM_DIRECTIVES}]}],null,null);class FormArray extends AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(index){return this.controls[this._adjustIndex(index)]}push(control,options={}){this.controls.push(control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}insert(index,control,options={}){this.controls.splice(index,0,control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent})}removeAt(index,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange((()=>{})),this.controls.splice(adjustedIndex,1),this.updateValueAndValidity({emitEvent:options.emitEvent})}setControl(index,control,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange((()=>{})),this.controls.splice(adjustedIndex,1),control&&(this.controls.splice(adjustedIndex,0,control),this._registerControl(control)),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(value,options={}){assertAllValuesPresent(this,!1,value),value.forEach(((newValue,index)=>{assertControlPresent(this,!1,index),this.at(index).setValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})})),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(value.forEach(((newValue,index)=>{this.at(index)&&this.at(index).patchValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})})),this.updateValueAndValidity(options))}reset(value=[],options={}){this._forEachChild(((control,index)=>{control.reset(value[index],{onlySelf:!0,emitEvent:options.emitEvent})})),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this.controls.map((control=>control.getRawValue()))}clear(options={}){this.controls.length<1||(this._forEachChild((control=>control._registerOnCollectionChange((()=>{})))),this.controls.splice(0),this.updateValueAndValidity({emitEvent:options.emitEvent}))}_adjustIndex(index){return index<0?index+this.length:index}_syncPendingControls(){let subtreeUpdated=this.controls.reduce(((updated,child)=>!!child._syncPendingControls()||updated),!1);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){this.controls.forEach(((control,index)=>{cb(control,index)}))}_updateValue(){this.value=this.controls.filter((control=>control.enabled||this.disabled)).map((control=>control.value))}_anyControls(condition){return this.controls.some((control=>control.enabled&&condition(control)))}_setUpControls(){this._forEachChild((control=>this._registerControl(control)))}_allControlsDisabled(){for(const control of this.controls)if(control.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(control){control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}_find(name){return this.at(name)??null}}function isAbstractControlOptions(options){return!!options&&(void 0!==options.asyncValidators||void 0!==options.validators||void 0!==options.updateOn)}class FormBuilder{constructor(){this.useNonNullable=!1}get nonNullable(){const nnfb=new FormBuilder;return nnfb.useNonNullable=!0,nnfb}group(controls,options=null){const reducedControls=this._reduceControls(controls);let newOptions={};return isAbstractControlOptions(options)?newOptions=options:null!==options&&(newOptions.validators=options.validator,newOptions.asyncValidators=options.asyncValidator),new FormGroup(reducedControls,newOptions)}record(controls,options=null){const reducedControls=this._reduceControls(controls);return new FormRecord(reducedControls,options)}control(formState,validatorOrOpts,asyncValidator){let newOptions={};return this.useNonNullable?(isAbstractControlOptions(validatorOrOpts)?newOptions=validatorOrOpts:(newOptions.validators=validatorOrOpts,newOptions.asyncValidators=asyncValidator),new FormControl(formState,{...newOptions,nonNullable:!0})):new FormControl(formState,validatorOrOpts,asyncValidator)}array(controls,validatorOrOpts,asyncValidator){const createdControls=controls.map((c=>this._createControl(c)));return new FormArray(createdControls,validatorOrOpts,asyncValidator)}_reduceControls(controls){const createdControls={};return Object.keys(controls).forEach((controlName=>{createdControls[controlName]=this._createControl(controls[controlName])})),createdControls}_createControl(controls){if(controls instanceof FormControl)return controls;if(controls instanceof AbstractControl)return controls;if(Array.isArray(controls)){const value=controls[0],validator=controls.length>1?controls[1]:null,asyncValidator=controls.length>2?controls[2]:null;return this.control(value,validator,asyncValidator)}return this.control(controls)}}FormBuilder.ɵfac=function FormBuilder_Factory(t){return new(t||FormBuilder)},FormBuilder.ɵprov=core["ɵɵdefineInjectable"]({token:FormBuilder,factory:FormBuilder.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormBuilder,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);class NonNullableFormBuilder{}NonNullableFormBuilder.ɵfac=function NonNullableFormBuilder_Factory(t){return new(t||NonNullableFormBuilder)},NonNullableFormBuilder.ɵprov=core["ɵɵdefineInjectable"]({token:NonNullableFormBuilder,factory:function(){return(0,core.inject)(FormBuilder).nonNullable},providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NonNullableFormBuilder,[{type:core.Injectable,args:[{providedIn:"root",useFactory:()=>(0,core.inject)(FormBuilder).nonNullable}]}],null,null);class UntypedFormBuilder extends FormBuilder{group(controlsConfig,options=null){return super.group(controlsConfig,options)}control(formState,validatorOrOpts,asyncValidator){return super.control(formState,validatorOrOpts,asyncValidator)}array(controlsConfig,validatorOrOpts,asyncValidator){return super.array(controlsConfig,validatorOrOpts,asyncValidator)}}UntypedFormBuilder.ɵfac=function(){let ɵUntypedFormBuilder_BaseFactory;return function UntypedFormBuilder_Factory(t){return(ɵUntypedFormBuilder_BaseFactory||(ɵUntypedFormBuilder_BaseFactory=core["ɵɵgetInheritedFactory"](UntypedFormBuilder)))(t||UntypedFormBuilder)}}(),UntypedFormBuilder.ɵprov=core["ɵɵdefineInjectable"]({token:UntypedFormBuilder,factory:UntypedFormBuilder.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](UntypedFormBuilder,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);new core.Version("16.0.3");class FormsModule{static withConfig(opts){return{ngModule:FormsModule,providers:[{provide:CALL_SET_DISABLED_STATE,useValue:opts.callSetDisabledState??setDisabledStateDefault}]}}}FormsModule.ɵfac=function FormsModule_Factory(t){return new(t||FormsModule)},FormsModule.ɵmod=core["ɵɵdefineNgModule"]({type:FormsModule,declarations:[NgModel,NgModelGroup,NgForm],exports:[ɵInternalFormsSharedModule,NgModel,NgModelGroup,NgForm]}),FormsModule.ɵinj=core["ɵɵdefineInjector"]({imports:[ɵInternalFormsSharedModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](FormsModule,[{type:core.NgModule,args:[{declarations:TEMPLATE_DRIVEN_DIRECTIVES,exports:[ɵInternalFormsSharedModule,TEMPLATE_DRIVEN_DIRECTIVES]}]}],null,null);class ReactiveFormsModule{static withConfig(opts){return{ngModule:ReactiveFormsModule,providers:[{provide:NG_MODEL_WITH_FORM_CONTROL_WARNING,useValue:opts.warnOnNgModelWithFormControl??"always"},{provide:CALL_SET_DISABLED_STATE,useValue:opts.callSetDisabledState??setDisabledStateDefault}]}}}ReactiveFormsModule.ɵfac=function ReactiveFormsModule_Factory(t){return new(t||ReactiveFormsModule)},ReactiveFormsModule.ɵmod=core["ɵɵdefineNgModule"]({type:ReactiveFormsModule,declarations:[FormControlDirective,FormGroupDirective,FormControlName,FormGroupName,FormArrayName],exports:[ɵInternalFormsSharedModule,FormControlDirective,FormGroupDirective,FormControlName,FormGroupName,FormArrayName]}),ReactiveFormsModule.ɵinj=core["ɵɵdefineInjector"]({imports:[ɵInternalFormsSharedModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](ReactiveFormsModule,[{type:core.NgModule,args:[{declarations:[REACTIVE_DRIVEN_DIRECTIVES],exports:[ɵInternalFormsSharedModule,REACTIVE_DRIVEN_DIRECTIVES]}]}],null,null)},"./node_modules/pdfjs-dist/build/pdf.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),_classStaticPrivateMethodGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classStaticPrivateMethodGet.js").default,_defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/defineProperty.js").default,_classPrivateMethodInitSpec=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js").default,_classPrivateMethodGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateMethodGet.js").default,_classStaticPrivateFieldSpecSet=__webpack_require__("./node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecSet.js").default,_classStaticPrivateFieldSpecGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecGet.js").default,_asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/asyncToGenerator.js").default,_classPrivateFieldInitSpec=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js").default,_classPrivateFieldGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js").default,_classPrivateFieldSet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js").default;!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(globalThis,(()=>(()=>{"use strict";var __webpack_modules__=[,(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.VerbosityLevel=exports.Util=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.RenderingIntentFlag=exports.PromiseCapability=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.PageActionEventType=exports.OPS=exports.MissingPDFException=exports.MAX_IMAGE_SIZE_TO_CACHE=exports.LINE_FACTOR=exports.LINE_DESCENT_FACTOR=exports.InvalidPDFException=exports.ImageKind=exports.IDENTITY_MATRIX=exports.FormatError=exports.FeatureTest=exports.FONT_IDENTITY_MATRIX=exports.DocumentActionEventType=exports.CMapCompressionType=exports.BaseException=exports.BASELINE_FACTOR=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMode=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationEditorType=exports.AnnotationEditorPrefix=exports.AnnotationEditorParamsType=exports.AnnotationBorderStyleType=exports.AnnotationActionEventType=exports.AbortException=void 0,exports.assert=function assert(cond,msg){cond||unreachable(msg)},exports.bytesToString=function bytesToString(bytes){"object"==typeof bytes&&void 0!==bytes?.length||unreachable("Invalid argument for bytesToString");const length=bytes.length;if(length<8192)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=8192){const chunkEnd=Math.min(i+8192,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")},exports.createValidAbsoluteUrl=function createValidAbsoluteUrl(url,baseUrl=null,options=null){if(!url)return null;try{if(options&&"string"==typeof url){if(options.addDefaultProtocol&&url.startsWith("www.")){const dots=url.match(/\./g);dots?.length>=2&&(url=`http://${url}`)}if(options.tryConvertEncoding)try{url=stringToUTF8String(url)}catch(ex){}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(function _isValidProtocol(url){switch(url?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(absoluteUrl))return absoluteUrl}catch(ex){}return null},exports.getModificationDate=function getModificationDate(date=new Date){return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")].join("")},exports.getVerbosityLevel=function getVerbosityLevel(){return verbosity},exports.info=function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)},exports.isArrayBuffer=function isArrayBuffer(v){return"object"==typeof v&&void 0!==v?.byteLength},exports.isArrayEqual=function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i=0,ii=arr1.length;i<ii;i++)if(arr1[i]!==arr2[i])return!1;return!0},exports.normalizeUnicode=function normalizeUnicode(str){NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]]));return str.replaceAll(NormalizeRegex,((_,p1,p2)=>p1?p1.normalize("NFKC"):NormalizationMap.get(p2)))},exports.objectFromMap=function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map)obj[key]=value;return obj},exports.objectSize=function objectSize(obj){return Object.keys(obj).length},exports.setVerbosityLevel=function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)},exports.shadow=shadow,exports.string32=function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,255&value)},exports.stringToBytes=stringToBytes,exports.stringToPDFString=function stringToPDFString(str){if(str[0]>="ï"){let encoding;if("þ"===str[0]&&"ÿ"===str[1]?encoding="utf-16be":"ÿ"===str[0]&&"þ"===str[1]?encoding="utf-16le":"ï"===str[0]&&"»"===str[1]&&"¿"===str[2]&&(encoding="utf-8"),encoding)try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")},exports.stringToUTF8String=stringToUTF8String,exports.unreachable=unreachable,exports.utf8StringToString=function utf8StringToString(str){return unescape(encodeURIComponent(str))},exports.warn=warn;exports.IDENTITY_MATRIX=[1,0,0,1,0,0];exports.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports.MAX_IMAGE_SIZE_TO_CACHE=1e7;exports.LINE_FACTOR=1.35;exports.LINE_DESCENT_FACTOR=.35;exports.BASELINE_FACTOR=.25925925925925924;exports.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};exports.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports.AnnotationEditorPrefix="pdfjs_internal_editor_";exports.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports.AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports.PageActionEventType={O:"PageOpen",C:"PageClose"};const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel;exports.CMapCompressionType={NONE:0,BINARY:1};exports.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}function unreachable(msg){throw new Error(msg)}function shadow(obj,prop,value,nonSerializable=!1){return Object.defineProperty(obj,prop,{value,enumerable:!nonSerializable,configurable:!0,writable:!1}),value}const BaseException=function BaseExceptionClosure(){function BaseException(message,name){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();exports.BaseException=BaseException;exports.PasswordException=class PasswordException extends BaseException{constructor(msg,code){super(msg,"PasswordException"),this.code=code}};exports.UnknownErrorException=class UnknownErrorException extends BaseException{constructor(msg,details){super(msg,"UnknownErrorException"),this.details=details}};exports.InvalidPDFException=class InvalidPDFException extends BaseException{constructor(msg){super(msg,"InvalidPDFException")}};exports.MissingPDFException=class MissingPDFException extends BaseException{constructor(msg){super(msg,"MissingPDFException")}};exports.UnexpectedResponseException=class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg,"UnexpectedResponseException"),this.status=status}};exports.FormatError=class FormatError extends BaseException{constructor(msg){super(msg,"FormatError")}};function stringToBytes(str){"string"!=typeof str&&unreachable("Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=255&str.charCodeAt(i);return bytes}exports.AbortException=class AbortException extends BaseException{constructor(msg){super(msg,"AbortException")}};exports.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,1===new Uint32Array(buffer8.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?shadow(this,"platform",{isWin:!1,isMac:!1}):shadow(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}};const hexNumbers=[...Array(256).keys()].map((n=>n.toString(16).padStart(2,"0")));class Util{static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`}static scaleMinMax(transform,minMax){let temp;transform[0]?(transform[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[0],minMax[1]*=transform[0],transform[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[3],minMax[3]*=transform[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[1],minMax[3]*=transform[1],transform[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[2],minMax[1]*=transform[2]),minMax[0]+=transform[4],minMax[1]+=transform[4],minMax[2]+=transform[5],minMax[3]+=transform[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){return[p[0]*m[0]+p[1]*m[2]+m[4],p[0]*m[1]+p[1]*m[3]+m[5]]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2];return[(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d]}static getAxialAlignedBoundingBox(r,m){const p1=Util.applyTransform(r,m),p2=Util.applyTransform(r.slice(2,4),m),p3=Util.applyTransform([r[0],r[3]],m),p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i)if(0===i?(b=6*x0-12*x1+6*x2,a=-3*x0+9*x1-9*x2+3*x3,c=3*x1-3*x0):(b=6*y0-12*y1+6*y2,a=-3*y0+9*y1-9*y2+3*y3,c=3*y1-3*y0),Math.abs(a)<1e-12){if(Math.abs(b)<1e-12)continue;t=-c/b,0<t&&t<1&&tvalues.push(t)}else b2ac=b*b-4*c*a,sqrtb2ac=Math.sqrt(b2ac),b2ac<0||(t1=(-b+sqrtb2ac)/(2*a),0<t1&&t1<1&&tvalues.push(t1),t2=(-b-sqrtb2ac)/(2*a),0<t2&&t2<1&&tvalues.push(t2));let mt,j=tvalues.length;const jlen=j;for(;j--;)t=tvalues[j],mt=1-t,bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3,bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}}exports.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(str){return decodeURIComponent(escape(str))}var _settled=new WeakMap;exports.PromiseCapability=class PromiseCapability{constructor(){_classPrivateFieldInitSpec(this,_settled,{writable:!0,value:!1}),this.promise=new Promise(((resolve,reject)=>{this.resolve=data=>{_classPrivateFieldSet(this,_settled,!0),resolve(data)},this.reject=reason=>{_classPrivateFieldSet(this,_settled,!0),reject(reason)}}))}get settled(){return _classPrivateFieldGet(this,_settled)}};let NormalizeRegex=null,NormalizationMap=null},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeFilterFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){const{PDFNodeStream}=__w_pdfjs_require__(21);createPDFNetworkStream=params=>new PDFNodeStream(params)}else{const{PDFNetworkStream}=__w_pdfjs_require__(24),{PDFFetchStream}=__w_pdfjs_require__(25);createPDFNetworkStream=params=>(0,_display_utils.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params)}function getDocument(src){if("string"==typeof src||src instanceof URL?src={url:src}:(0,_util.isArrayBuffer)(src)&&(src={data:src}),"object"!=typeof src)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const task=new PDFDocumentLoadingTask,{docId}=task,url=src.url?getUrlProp(src.url):null,data=src.data?getDataProp(src.data):null,httpHeaders=src.httpHeaders||null,withCredentials=!0===src.withCredentials,password=src.password??null,rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null,rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let worker=src.worker instanceof PDFWorker?src.worker:null;const verbosity=src.verbosity,docBaseUrl="string"!=typeof src.docBaseUrl||(0,_display_utils.isDataScheme)(src.docBaseUrl)?null:src.docBaseUrl,cMapUrl="string"==typeof src.cMapUrl?src.cMapUrl:null,cMapPacked=!1!==src.cMapPacked,CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory,standardFontDataUrl="string"==typeof src.standardFontDataUrl?src.standardFontDataUrl:null,StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory,ignoreErrors=!0!==src.stopAtErrors,maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1,isEvalSupported=!1!==src.isEvalSupported,isOffscreenCanvasSupported="boolean"==typeof src.isOffscreenCanvasSupported?src.isOffscreenCanvasSupported:!_is_node.isNodeJS,canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1,disableFontFace="boolean"==typeof src.disableFontFace?src.disableFontFace:_is_node.isNodeJS,fontExtraProperties=!0===src.fontExtraProperties,enableXfa=!0===src.enableXfa,ownerDocument=src.ownerDocument||globalThis.document,disableRange=!0===src.disableRange,disableStream=!0===src.disableStream,disableAutoFetch=!0===src.disableAutoFetch,pdfBug=!0===src.pdfBug,length=rangeTransport?rangeTransport.length:src.length??NaN,useSystemFonts="boolean"==typeof src.useSystemFonts?src.useSystemFonts:!_is_node.isNodeJS&&!disableFontFace,useWorkerFetch="boolean"==typeof src.useWorkerFetch?src.useWorkerFetch:CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(standardFontDataUrl,document.baseURI),canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument}),filterFactory=src.filterFactory||new DefaultFilterFactory({docId,ownerDocument});(0,_util.setVerbosityLevel)(verbosity);const transportFactory={canvasFactory,filterFactory};if(useWorkerFetch||(transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked}),transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl})),!worker){const workerParams={verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker}const fetchDocParams={docId,apiVersion:"3.7.107",data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions:{maxImageSize,disableFontFace,ignoreErrors,isEvalSupported,isOffscreenCanvasSupported,canvasMaxAreaInBytes,fontExtraProperties,useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}},transportParams={ignoreErrors,isEvalSupported,disableFontFace,fontExtraProperties,enableXfa,ownerDocument,disableAutoFetch,pdfBug,styleElement:null};return worker.promise.then((function(){if(task.destroyed)throw new Error("Loading aborted");const workerIdPromise=_fetchDocument(worker,fetchDocParams),networkStreamPromise=new Promise((function(resolve){let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length,initialData:rangeTransport.initialData,progressiveDone:rangeTransport.progressiveDone,contentDispositionFilename:rangeTransport.contentDispositionFilename,disableRange,disableStream},rangeTransport):data||(networkStream=createPDFNetworkStream({url,length,httpHeaders,withCredentials,rangeChunkSize,disableRange,disableStream})),resolve(networkStream)}));return Promise.all([workerIdPromise,networkStreamPromise]).then((function([workerId,networkStream]){if(task.destroyed)throw new Error("Loading aborted");const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port),transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport,messageHandler.send("Ready",null)}))})).catch(task._capability.reject),task}function _fetchDocument(_x,_x2){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator((function*(worker,source){if(worker.destroyed)throw new Error("Worker was destroyed");const workerId=yield worker.messageHandler.sendWithPromise("GetDocRequest",source,source.data?[source.data.buffer]:null);if(worker.destroyed)throw new Error("Worker was destroyed");return workerId}))).apply(this,arguments)}function getUrlProp(val){if(val instanceof URL)return val.href;try{return new URL(val,window.location).href}catch(ex){if(_is_node.isNodeJS&&"string"==typeof val)return val}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(val){if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&val instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(val);if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength)return val;if("string"==typeof val)return(0,_util.stringToBytes)(val);if("object"==typeof val&&!isNaN(val?.length)||(0,_util.isArrayBuffer)(val))return new Uint8Array(val);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(_PDFDocumentLoadingTa=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa)),_PDFDocumentLoadingTa2}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var _this=this;return _asyncToGenerator((function*(){_this.destroyed=!0,yield _this._transport?.destroy(),_this._transport=null,_this._worker&&(_this._worker.destroy(),_this._worker=null)}))()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(length,initialData,progressiveDone=!1,contentDispositionFilename=null){this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this.contentDispositionFilename=contentDispositionFilename,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(const listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then((()=>{for(const listener of this._progressListeners)listener(loaded,total)}))}onDataProgressiveRead(chunk){this._readyCapability.promise.then((()=>{for(const listener of this._progressiveReadListeners)listener(chunk)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const listener of this._progressiveDoneListeners)listener()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id){return this._transport.getDestination(id)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(keepLoadedFonts=!1){return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,_abortDelayedCleanup=new WeakSet;class PDFPageProxy{constructor(pageIndex,pageInfo,transport,pdfBug=!1){_classPrivateMethodInitSpec(this,_abortDelayedCleanup),_classPrivateMethodInitSpec(this,_tryCleanup),_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pendingCleanup,{writable:!0,value:!1}),this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip})}getAnnotations({intent="display"}={}){const intentArgs=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var _this2=this;return _asyncToGenerator((function*(){return _this2._transport._htmlForXfa?.children[_this2._pageIndex]||null}))()}render({canvasContext,viewport,intent="display",annotationMode=_util.AnnotationMode.ENABLE,transform=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}){if(arguments[0]?.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");this._stats?.time("Overall");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig());let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);const intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);intentState.displayReadyCapability||(intentState.displayReadyCapability=new _util.PromiseCapability,intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(intentArgs));const complete=error=>{intentState.renderTasks.delete(internalRenderTask),(this._maybeCleanupAfterRender||intentPrint)&&_classPrivateFieldSet(this,_pendingCleanup,!0),_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!intentPrint),error?(internalRenderTask.capability.reject(error),this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)})):internalRenderTask.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||=new Set).add(internalRenderTask);const renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then((([transparency,optionalContentConfig])=>{_classPrivateFieldGet(this,_pendingCleanup)?complete():(this._stats?.time("Rendering"),internalRenderTask.initializeGraphics({transparency,optionalContentConfig}),internalRenderTask.operatorListChanged())})).catch(complete),renderTask}getOperatorList({intent="display",annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}={}){const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,!0);let opListTask,intentState=this._intentStates.get(intentArgs.cacheKey);return intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.opListReadCapability||(opListTask=Object.create(null),opListTask.operatorListChanged=function operatorListChanged(){intentState.operatorList.lastChunk&&(intentState.opListReadCapability.resolve(intentState.operatorList),intentState.renderTasks.delete(opListTask))},intentState.opListReadCapability=new _util.PromiseCapability,(intentState.renderTasks||=new Set).add(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(intentArgs)),intentState.opListReadCapability.promise}streamTextContent({includeMarkedContent=!1,disableNormalization=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===includeMarkedContent,disableNormalization:!0===disableNormalization},{highWaterMark:100,size:textContent=>textContent.items.length})}getTextContent(params={}){if(this._transport._htmlForXfa)return this.getXfa().then((xfa=>_xfa_text.XfaText.textContent(xfa)));const readableStream=this.streamTextContent(params);return new Promise((function(resolve,reject){const reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};!function pump(){reader.read().then((function({value,done}){done?resolve(textContent):(Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump())}),reject)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const waitOn=[];for(const intentState of this._intentStates.values())if(this._abortOperatorList({intentState,reason:new Error("Page was destroyed."),force:!0}),!intentState.opListReadCapability)for(const internalRenderTask of intentState.renderTasks)waitOn.push(internalRenderTask.completed),internalRenderTask.cancel();return this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),Promise.all(waitOn)}cleanup(resetStats=!1){_classPrivateFieldSet(this,_pendingCleanup,!0);const success=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1);return resetStats&&success&&(this._stats&&=new _display_utils.StatTimer),success}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);intentState&&(this._stats?.timeEnd("Page Request"),intentState.displayReadyCapability?.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk,intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();operatorListChunk.lastChunk&&_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}_pumpOperatorList({renderingIntent,cacheKey,annotationStorageMap}){const reader=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:annotationStorageMap}).getReader(),intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=()=>{reader.read().then((({value,done})=>{done?intentState.streamReader=null:this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())}),(reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else{if(!intentState.opListReadCapability)throw reason;intentState.opListReadCapability.reject(reason)}}}))};pump()}_abortOperatorList({intentState,reason,force=!1}){if(intentState.streamReader){if(intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null),!force){if(intentState.renderTasks.size>0)return;if(reason instanceof _display_utils.RenderingCancelledException){let delay=RENDERING_CANCELLED_TIMEOUT;return reason.extraDelay>0&&reason.extraDelay<1e3&&(delay+=reason.extraDelay),void(intentState.streamReaderCancelTimeout=setTimeout((()=>{intentState.streamReaderCancelTimeout=null,this._abortOperatorList({intentState,reason,force:!0})}),delay))}}if(intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch((()=>{})),intentState.streamReader=null,!this._transport.destroyed){for(const[curCacheKey,curIntentState]of this._intentStates)if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break}this.cleanup()}}}get stats(){return this._stats}}function _tryCleanup2(delayed=!1){if(_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),!_classPrivateFieldGet(this,_pendingCleanup))return!1;if(delayed)return _classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout((()=>{_classPrivateFieldSet(this,_delayedCleanupTimeout,null),_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1)}),DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks,operatorList}of this._intentStates.values())if(renderTasks.size>0||!operatorList.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),!0}function _abortDelayedCleanup2(){_classPrivateFieldGet(this,_delayedCleanupTimeout)&&(clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout)),_classPrivateFieldSet(this,_delayedCleanupTimeout,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap;class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_deferred,{writable:!0,value:Promise.resolve()})}postMessage(obj,transfer){const event={data:structuredClone(obj,transfer?{transfer}:null)};_classPrivateFieldGet(this,_deferred).then((()=>{for(const listener of _classPrivateFieldGet(this,_listeners))listener.call(this,event)}))}addEventListener(name,listener){_classPrivateFieldGet(this,_listeners).add(listener)}removeEventListener(name,listener){_classPrivateFieldGet(this,_listeners).delete(listener)}terminate(){_classPrivateFieldGet(this,_listeners).clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const pdfjsFilePath=document?.currentScript?.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||"null"===base.origin)return!1}catch(e){return!1}const other=new URL(otherUrl,base);return base.origin===other.origin},PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`importScripts("${url}");`;return URL.createObjectURL(new Blob([wrapper]))};class PDFWorker{constructor({name=null,port=null,verbosity=(0,_util.getVerbosityLevel)()}={}){if(port&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(port))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=name,this.destroyed=!1,this.verbosity=verbosity,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,port)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(port,this),void this._initializeFromPort(port);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)||(workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href));const worker=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker),terminateEarly=()=>{worker.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};worker.addEventListener("error",onWorkerError),messageHandler.on("test",(data=>{worker.removeEventListener("error",onWorkerError),this.destroyed?terminateEarly():data?(this._messageHandler=messageHandler,this._port=worker,this._webWorker=worker,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker.terminate())})),messageHandler.on("ready",(data=>{if(worker.removeEventListener("error",onWorkerError),this.destroyed)terminateEarly();else try{sendTest()}catch(e){this._setupFakeWorker()}}));const sendTest=()=>{const testObj=new Uint8Array;messageHandler.send("test",testObj,[testObj.buffer])};return void sendTest()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((WorkerMessageHandler=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const port=new LoopbackPort;this._port=port;const id="fake"+PDFWorkerUtil.fakeWorkerId++,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})})).catch((reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(params){if(!params?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(params.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(params.port):new PDFWorker(params)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(ex){return null}}static get _setupFakeWorkerGlobal(){var _this3=this;const loader=function(){var _ref=_asyncToGenerator((function*(){const mainWorkerMessageHandler=_this3._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this3.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this3.workerSrc),window.pdfjsWorker.WorkerMessageHandler}));return function loader(){return _ref.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet;class WorkerTransport{constructor(messageHandler,loadingTask,networkStream,params,factory){_classPrivateMethodInitSpec(this,_cacheSimpleMethod),_classPrivateFieldInitSpec(this,_methodPromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement}),this._params=params,this.canvasFactory=factory.canvasFactory,this.filterFactory=factory.filterFactory,this.cMapReaderFactory=factory.cMapReaderFactory,this.standardFontDataFactory=factory.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(intent,annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null,isOpList=!1){let renderingIntent=_util.RenderingIntentFlag.DISPLAY,annotationMap=null;switch(intent){case"any":renderingIntent=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`)}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;annotationMap=(renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`)}return isOpList&&(renderingIntent+=_util.RenderingIntentFlag.OPLIST),{renderingIntent,cacheKey:`${renderingIntent}_${_annotation_storage.AnnotationStorage.getHash(annotationMap)}`,annotationStorageMap:annotationMap}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const waitOn=[];for(const page of _classPrivateFieldGet(this,_pageCache).values())waitOn.push(page._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const terminated=this.messageHandler.sendWithPromise("Terminate",null);return waitOn.push(terminated),Promise.all(waitOn).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldGet(this,_methodPromises).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on("GetReader",((data,sink)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then((function({value,done}){done?sink.close():((0,_util.assert)(value instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((reason=>{sink.error(reason)}))},sink.onCancel=reason=>{this._fullReader.cancel(reason),sink.ready.catch((readyReason=>{if(!this.destroyed)throw readyReason}))}})),messageHandler.on("ReaderHeadersReady",(data=>{const headersCapability=new _util.PromiseCapability,fullReader=this._fullReader;return fullReader.headersReady.then((()=>{fullReader.isStreamingSupported&&fullReader.isRangeSupported||(this._lastProgress&&loadingTask.onProgress?.(this._lastProgress),fullReader.onProgress=evt=>{loadingTask.onProgress?.({loaded:evt.loaded,total:evt.total})}),headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})}),headersCapability.reject),headersCapability.promise})),messageHandler.on("GetRangeReader",((data,sink)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);rangeReader?(sink.onPull=()=>{rangeReader.read().then((function({value,done}){done?sink.close():((0,_util.assert)(value instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((reason=>{sink.error(reason)}))},sink.onCancel=reason=>{rangeReader.cancel(reason),sink.ready.catch((readyReason=>{if(!this.destroyed)throw readyReason}))}):sink.close()})),messageHandler.on("GetDoc",(({pdfInfo})=>{this._numPages=pdfInfo.numPages,this._htmlForXfa=pdfInfo.htmlForXfa,delete pdfInfo.htmlForXfa,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))})),messageHandler.on("DocException",(function(ex){let reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}loadingTask._capability.reject(reason)})),messageHandler.on("PasswordRequest",(exception=>{if(this._passwordCapability=new _util.PromiseCapability,loadingTask.onPassword){const updatePassword=password=>{password instanceof Error?this._passwordCapability.reject(password):this._passwordCapability.resolve({password})};try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this._passwordCapability.reject(ex)}}else this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return this._passwordCapability.promise})),messageHandler.on("DataLoaded",(data=>{loadingTask.onProgress?.({loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)})),messageHandler.on("StartRenderPage",(data=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(data.pageIndex)._startRenderPage(data.transparency,data.cacheKey)})),messageHandler.on("commonobj",(([id,type,exportedData])=>{if(!this.destroyed&&!this.commonObjs.has(id))switch(type){case"Font":const params=this._params;if("error"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id,exportedError);break}const inspectFont=params.pdfBug&&globalThis.FontInspector?.enabled?(font,url)=>globalThis.FontInspector.fontAdded(font,url):null,font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont});this.fontLoader.bind(font).catch((reason=>messageHandler.sendWithPromise("FontFallback",{id}))).finally((()=>{!params.fontExtraProperties&&font.data&&(font.data=null),this.commonObjs.resolve(id,font)}));break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`)}})),messageHandler.on("obj",(([id,pageIndex,type,imageData])=>{if(this.destroyed)return;const pageProxy=_classPrivateFieldGet(this,_pageCache).get(pageIndex);if(!pageProxy.objs.has(id))switch(type){case"Image":if(pageProxy.objs.resolve(id,imageData),imageData){let length;if(imageData.bitmap){const{width,height}=imageData;length=width*height*4}else length=imageData.data?.length||0;length>_util.MAX_IMAGE_SIZE_TO_CACHE&&(pageProxy._maybeCleanupAfterRender=!0)}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`)}})),messageHandler.on("DocProgress",(data=>{this.destroyed||loadingTask.onProgress?.({loaded:data.loaded,total:data.total})})),messageHandler.on("FetchBuiltInCMap",(data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(data):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),messageHandler.on("FetchStandardFontData",(data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(data):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request."));const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(this,_pagePromises).get(pageIndex);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex}).then((pageInfo=>{if(this.destroyed)throw new Error("Transport destroyed");const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(pageIndex,page),page}));return _classPrivateFieldGet(this,_pagePromises).set(pageIndex,promise),promise}getPageIndex(ref){return"object"!=typeof ref||null===ref||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen})}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex,intent})}getFieldObjects(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}hasJSActions(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(id){return"string"!=typeof id?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex})}getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((results=>new _optional_content_config.OptionalContentConfig(results)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const name="GetMetadata",cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise(name,null).then((results=>({info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return _classPrivateFieldGet(this,_methodPromises).set(name,promise),promise}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(keepLoadedFonts=!1){var _this4=this;return _asyncToGenerator((function*(){if(!_this4.destroyed){yield _this4.messageHandler.sendWithPromise("Cleanup",null);for(const page of _classPrivateFieldGet(_this4,_pageCache).values()){if(!page.cleanup())throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`)}_this4.commonObjs.clear(),keepLoadedFonts||_this4.fontLoader.clear(),_classPrivateFieldGet(_this4,_methodPromises).clear(),_this4.filterFactory.destroy(!0)}}))()}get loadingParams(){const{disableAutoFetch,enableXfa}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch,enableXfa})}}function _cacheSimpleMethod2(name,data=null){const cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise(name,data);return _classPrivateFieldGet(this,_methodPromises).set(name,promise),promise}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(objId,callback=null){if(callback){const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);return obj.capability.promise.then((()=>callback(obj.data))),null}const obj=_classPrivateFieldGet(this,_objs)[objId];if(!obj?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj?.capability.settled||!1}resolve(objId,data=null){const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.data=data,obj.capability.resolve()}clear(){for(const objId in _classPrivateFieldGet(this,_objs)){const{data}=_classPrivateFieldGet(this,_objs)[objId];data?.bitmap?.close()}_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj||(_classPrivateFieldGet(this,_objs)[objId]={capability:new _util.PromiseCapability,data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,internalRenderTask),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(extraDelay=0){_classPrivateFieldGet(this,_internalRenderTask).cancel(null,extraDelay)}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!separateAnnots)return!1;const{annotationCanvasMap}=_classPrivateFieldGet(this,_internalRenderTask);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,filterFactory,useRequestAnimationFrame=!1,pdfBug=!1,pageColors=null}){this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.annotationCanvasMap=annotationCanvasMap,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this.filterFactory=filterFactory,this._pdfBug=pdfBug,this.pageColors=pageColors,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===useRequestAnimationFrame&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency=!1,optionalContentConfig}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext,viewport,transform,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform,viewport,transparency,background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(error=null,extraDelay=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",extraDelay))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var _this5=this;return _asyncToGenerator((function*(){_this5.cancelled||(_this5.operatorListIdx=_this5.gfx.executeOperatorList(_this5.operatorList,_this5.operatorListIdx,_this5._continueBound,_this5.stepper),_this5.operatorListIdx===_this5.operatorList.argsArray.length&&(_this5.running=!1,_this5.operatorList.lastChunk&&(_this5.gfx.endDrawing(_this5.pageColors),_this5._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(_this5._canvas),_this5.callback())))}))()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="3.7.107";exports.version=version;const build="036f855dc";exports.build=build},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrintAnnotationStorage=exports.AnnotationStorage=void 0;var _util=__w_pdfjs_require__(1),_editor=__w_pdfjs_require__(4),_murmurhash=__w_pdfjs_require__(8),_modified=new WeakMap,_storage=new WeakMap,_setModified=new WeakSet;class AnnotationStorage{constructor(){_classPrivateMethodInitSpec(this,_setModified),_classPrivateFieldInitSpec(this,_modified,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_storage,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(key,defaultValue){const value=_classPrivateFieldGet(this,_storage).get(key);return void 0===value?defaultValue:Object.assign(defaultValue,value)}getRawValue(key){return _classPrivateFieldGet(this,_storage).get(key)}remove(key){if(_classPrivateFieldGet(this,_storage).delete(key),0===_classPrivateFieldGet(this,_storage).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const value of _classPrivateFieldGet(this,_storage).values())if(value instanceof _editor.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(key,value){const obj=_classPrivateFieldGet(this,_storage).get(key);let modified=!1;if(void 0!==obj)for(const[entry,val]of Object.entries(value))obj[entry]!==val&&(modified=!0,obj[entry]=val);else modified=!0,_classPrivateFieldGet(this,_storage).set(key,value);modified&&_classPrivateMethodGet(this,_setModified,_setModified2).call(this),value instanceof _editor.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(value.constructor._type)}has(key){return _classPrivateFieldGet(this,_storage).has(key)}getAll(){return _classPrivateFieldGet(this,_storage).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_storage)):null}setAll(obj){for(const[key,val]of Object.entries(obj))this.setValue(key,val)}get size(){return _classPrivateFieldGet(this,_storage).size}resetModified(){_classPrivateFieldGet(this,_modified)&&(_classPrivateFieldSet(this,_modified,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(0===_classPrivateFieldGet(this,_storage).size)return null;const clone=new Map;for(const[key,val]of _classPrivateFieldGet(this,_storage)){const serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;serialized&&clone.set(key,serialized)}return clone}static getHash(map){if(!map)return"";const hash=new _murmurhash.MurmurHash3_64;for(const[key,val]of map)hash.update(`${key}:${JSON.stringify(val)}`);return hash.hexdigest()}}function _setModified2(){_classPrivateFieldGet(this,_modified)||(_classPrivateFieldSet(this,_modified,!0),"function"==typeof this.onSetModified&&this.onSetModified())}exports.AnnotationStorage=AnnotationStorage;var _serializable=new WeakMap;class PrintAnnotationStorage extends AnnotationStorage{constructor(parent){super(),_classPrivateFieldInitSpec(this,_serializable,{writable:!0,value:null}),_classPrivateFieldSet(this,_serializable,structuredClone(parent.serializable))}get print(){(0,_util.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(this,_serializable)}}exports.PrintAnnotationStorage=PrintAnnotationStorage},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__(5),_util=__w_pdfjs_require__(1),_boundFocusin=new WeakMap,_boundFocusout=new WeakMap,_hasBeenSelected=new WeakMap,_isEditing=new WeakMap,_isInEditMode=new WeakMap,_zIndex=new WeakMap;class AnnotationEditor{constructor(parameters){_classPrivateFieldInitSpec(this,_boundFocusin,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,_boundFocusout,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,_hasBeenSelected,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_isEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_isInEditMode,{writable:!0,value:!1}),_defineProperty(this,"_uiManager",null),_classPrivateFieldInitSpec(this,_zIndex,{writable:!0,value:AnnotationEditor._zIndex++}),this.constructor===AnnotationEditor&&(0,_util.unreachable)("Cannot initialize AnnotationEditor."),this.parent=parameters.parent,this.id=parameters.id,this.width=this.height=null,this.pageIndex=parameters.parent.pageIndex,this.name=parameters.name,this.div=null,this._uiManager=parameters.uiManager;const{rotation,rawDims:{pageWidth,pageHeight,pageX,pageY}}=this.parent.viewport;this.rotation=rotation,this.pageRotation=(360+rotation-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[pageWidth,pageHeight],this.pageTranslation=[pageX,pageY];const[width,height]=this.parentDimensions;this.x=parameters.x/width,this.y=parameters.y/height,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,_util.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(params){this._uiManager.addCommands(params)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,_zIndex)}setParent(parent){null!==parent&&(this.pageIndex=parent.pageIndex,this.pageDimensions=parent.pageDimensions),this.parent=parent}focusin(event){_classPrivateFieldGet(this,_hasBeenSelected)?_classPrivateFieldSet(this,_hasBeenSelected,!1):this.parent.setSelected(this)}focusout(event){if(!this.isAttachedToDOM)return;const target=event.relatedTarget;target?.closest(`#${this.id}`)||(event.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(event){const rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x,this.startY=event.clientY-rect.y,event.dataTransfer.setData("text/plain",this.id),event.dataTransfer.effectAllowed="move"}setAt(x,y,tx,ty){const[width,height]=this.parentDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty),this.x=(x+tx)/width,this.y=(y+ty)/height,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(x,y){const[width,height]=this.parentDimensions;[x,y]=this.screenToPageTranslation(x,y),this.x+=x/width,this.y+=y/height,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(x,y){switch(this.parentRotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale}=this._uiManager.viewParameters,[pageWidth,pageHeight]=this.pageDimensions;return[pageWidth*realScale,pageHeight*realScale]}setDims(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.div.style.width=100*width/parentWidth+"%",this.div.style.height=100*height/parentHeight+"%"}fixDims(){const{style}=this.div,{height,width}=style,widthPercent=width.endsWith("%"),heightPercent=height.endsWith("%");if(widthPercent&&heightPercent)return;const[parentWidth,parentHeight]=this.parentDimensions;widthPercent||(style.width=100*parseFloat(width)/parentWidth+"%"),heightPercent||(style.height=100*parseFloat(height)/parentHeight+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,_boundFocusout));const[tx,ty]=this.getInitialTranslation();return this.translate(tx,ty),(0,_tools.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(event){const{isMac}=_util.FeatureTest.platform;0!==event.button||event.ctrlKey&&isMac?event.preventDefault():(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,_hasBeenSelected,!0))}getRect(tx,ty){const scale=this.parentScale,[pageWidth,pageHeight]=this.pageDimensions,[pageX,pageY]=this.pageTranslation,shiftX=tx/scale,shiftY=ty/scale,x=this.x*pageWidth,y=this.y*pageHeight,width=this.width*pageWidth,height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect,width=x2-x1,height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,_isInEditMode,!0)}disableEditMode(){_classPrivateFieldSet(this,_isInEditMode,!1)}isInEditMode(){return _classPrivateFieldGet(this,_isInEditMode)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin))}serialize(){(0,_util.unreachable)("An editor must be serializable")}static deserialize(data,parent,uiManager){const editor=new this.prototype.constructor({parent,id:parent.getNextId(),uiManager});editor.rotation=data.rotation;const[pageWidth,pageHeight]=editor.pageDimensions,[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);return editor.x=x/pageWidth,editor.y=y/pageHeight,editor.width=width/pageWidth,editor.height=height/pageHeight,editor}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,_boundFocusout)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(type,value){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,_isEditing)}set isEditing(value){_classPrivateFieldSet(this,_isEditing,value),value?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}_defineProperty(AnnotationEditor,"_colorManager",new _tools.ColorManager),_defineProperty(AnnotationEditor,"_zIndex",1),exports.AnnotationEditor=AnnotationEditor},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardManager=exports.CommandManager=exports.ColorManager=exports.AnnotationEditorUIManager=void 0,exports.bindEvents=function bindEvents(obj,element,names){for(const name of names)element.addEventListener(name,obj[name].bind(obj))},exports.opacityToHex=function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0")};var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6);var _id=new WeakMap;class IdManager{constructor(){_classPrivateFieldInitSpec(this,_id,{writable:!0,value:0})}getId(){var _this$id,_this$id2;return`${_util.AnnotationEditorPrefix}${_classPrivateFieldSet(this,_id,(_this$id=_classPrivateFieldGet(this,_id),_this$id2=_this$id++,_this$id)),_this$id2}`}}var _commands=new WeakMap,_locked=new WeakMap,_maxSize=new WeakMap,_position=new WeakMap;class CommandManager{constructor(maxSize=128){_classPrivateFieldInitSpec(this,_commands,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_locked,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_maxSize,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_position,{writable:!0,value:-1}),_classPrivateFieldSet(this,_maxSize,maxSize)}add({cmd,undo,mustExec,type=NaN,overwriteIfSameType=!1,keepUndo=!1}){if(mustExec&&cmd(),_classPrivateFieldGet(this,_locked))return;const save={cmd,undo,type};if(-1===_classPrivateFieldGet(this,_position))return _classPrivateFieldGet(this,_commands).length>0&&(_classPrivateFieldGet(this,_commands).length=0),_classPrivateFieldSet(this,_position,0),void _classPrivateFieldGet(this,_commands).push(save);if(overwriteIfSameType&&_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].type===type)return keepUndo&&(save.undo=_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo),void(_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)]=save);const next=_classPrivateFieldGet(this,_position)+1;next===_classPrivateFieldGet(this,_maxSize)?_classPrivateFieldGet(this,_commands).splice(0,1):(_classPrivateFieldSet(this,_position,next),next<_classPrivateFieldGet(this,_commands).length&&_classPrivateFieldGet(this,_commands).splice(next)),_classPrivateFieldGet(this,_commands).push(save)}undo(){-1!==_classPrivateFieldGet(this,_position)&&(_classPrivateFieldSet(this,_locked,!0),_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo(),_classPrivateFieldSet(this,_locked,!1),_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)-1))}redo(){_classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1&&(_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)+1),_classPrivateFieldSet(this,_locked,!0),_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].cmd(),_classPrivateFieldSet(this,_locked,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,_position)}hasSomethingToRedo(){return _classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1}destroy(){_classPrivateFieldSet(this,_commands,null)}}exports.CommandManager=CommandManager;var _serialize=new WeakSet;class KeyboardManager{constructor(callbacks){_classPrivateMethodInitSpec(this,_serialize),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac}=_util.FeatureTest.platform;for(const[keys,callback]of callbacks)for(const key of keys){const isMacKey=key.startsWith("mac+");isMac&&isMacKey?(this.callbacks.set(key.slice(4),callback),this.allKeys.add(key.split("+").at(-1))):isMac||isMacKey||(this.callbacks.set(key,callback),this.allKeys.add(key.split("+").at(-1)))}}exec(self,event){if(!this.allKeys.has(event.key))return;const callback=this.callbacks.get(_classPrivateMethodGet(this,_serialize,_serialize2).call(this,event));callback&&(callback.bind(self)(),event.stopPropagation(),event.preventDefault())}}function _serialize2(event){event.altKey&&this.buffer.push("alt"),event.ctrlKey&&this.buffer.push("ctrl"),event.metaKey&&this.buffer.push("meta"),event.shiftKey&&this.buffer.push("shift"),this.buffer.push(event.key);const str=this.buffer.join("+");return this.buffer.length=0,str}exports.KeyboardManager=KeyboardManager;class ColorManager{get _colors(){const colors=new Map([["CanvasText",null],["Canvas",null]]);return(0,_display_utils.getColorValues)(colors),(0,_util.shadow)(this,"_colors",colors)}convert(color){const rgb=(0,_display_utils.getRGB)(color);if(!window.matchMedia("(forced-colors: active)").matches)return rgb;for(const[name,RGB]of this._colors)if(RGB.every(((x,i)=>x===rgb[i])))return ColorManager._colorsMapping.get(name);return rgb}getHexCode(name){const rgb=this._colors.get(name);return rgb?_util.Util.makeHexColor(...rgb):name}}_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),exports.ColorManager=ColorManager;var _activeEditor=new WeakMap,_allEditors=new WeakMap,_allLayers=new WeakMap,_annotationStorage=new WeakMap,_commandManager=new WeakMap,_currentPageIndex=new WeakMap,_editorTypes=new WeakMap,_editorsToRescale=new WeakMap,_eventBus=new WeakMap,_idManager=new WeakMap,_isEnabled=new WeakMap,_mode=new WeakMap,_selectedEditors=new WeakMap,_boundCopy=new WeakMap,_boundCut=new WeakMap,_boundPaste=new WeakMap,_boundKeydown=new WeakMap,_boundOnEditingAction=new WeakMap,_boundOnPageChanging=new WeakMap,_boundOnScaleChanging=new WeakMap,_boundOnRotationChanging=new WeakMap,_previousStates=new WeakMap,_container=new WeakMap,_addKeyboardManager=new WeakSet,_removeKeyboardManager=new WeakSet,_addCopyPasteListeners=new WeakSet,_removeCopyPasteListeners=new WeakSet,_dispatchUpdateStates=new WeakSet,_dispatchUpdateUI=new WeakSet,_enableAll=new WeakSet,_disableAll=new WeakSet,_addEditorToLayer=new WeakSet,_isEmpty=new WeakSet,_selectEditors=new WeakSet;class AnnotationEditorUIManager{constructor(container,eventBus,annotationStorage){_classPrivateMethodInitSpec(this,_selectEditors),_classPrivateMethodInitSpec(this,_isEmpty),_classPrivateMethodInitSpec(this,_addEditorToLayer),_classPrivateMethodInitSpec(this,_disableAll),_classPrivateMethodInitSpec(this,_enableAll),_classPrivateMethodInitSpec(this,_dispatchUpdateUI),_classPrivateMethodInitSpec(this,_dispatchUpdateStates),_classPrivateMethodInitSpec(this,_removeCopyPasteListeners),_classPrivateMethodInitSpec(this,_addCopyPasteListeners),_classPrivateMethodInitSpec(this,_removeKeyboardManager),_classPrivateMethodInitSpec(this,_addKeyboardManager),_classPrivateFieldInitSpec(this,_activeEditor,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_allEditors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_allLayers,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_annotationStorage,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_commandManager,{writable:!0,value:new CommandManager}),_classPrivateFieldInitSpec(this,_currentPageIndex,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_editorTypes,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_editorsToRescale,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_eventBus,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_idManager,{writable:!0,value:new IdManager}),_classPrivateFieldInitSpec(this,_isEnabled,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_mode,{writable:!0,value:_util.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,_selectedEditors,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_boundCopy,{writable:!0,value:this.copy.bind(this)}),_classPrivateFieldInitSpec(this,_boundCut,{writable:!0,value:this.cut.bind(this)}),_classPrivateFieldInitSpec(this,_boundPaste,{writable:!0,value:this.paste.bind(this)}),_classPrivateFieldInitSpec(this,_boundKeydown,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec(this,_boundOnEditingAction,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec(this,_boundOnPageChanging,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec(this,_boundOnScaleChanging,{writable:!0,value:this.onScaleChanging.bind(this)}),_classPrivateFieldInitSpec(this,_boundOnRotationChanging,{writable:!0,value:this.onRotationChanging.bind(this)}),_classPrivateFieldInitSpec(this,_previousStates,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec(this,_container,{writable:!0,value:null}),_classPrivateFieldSet(this,_container,container),_classPrivateFieldSet(this,_eventBus,eventBus),_classPrivateFieldGet(this,_eventBus)._on("editingaction",_classPrivateFieldGet(this,_boundOnEditingAction)),_classPrivateFieldGet(this,_eventBus)._on("pagechanging",_classPrivateFieldGet(this,_boundOnPageChanging)),_classPrivateFieldGet(this,_eventBus)._on("scalechanging",_classPrivateFieldGet(this,_boundOnScaleChanging)),_classPrivateFieldGet(this,_eventBus)._on("rotationchanging",_classPrivateFieldGet(this,_boundOnRotationChanging)),_classPrivateFieldSet(this,_annotationStorage,annotationStorage),this.viewParameters={realScale:_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateFieldGet(this,_eventBus)._off("editingaction",_classPrivateFieldGet(this,_boundOnEditingAction)),_classPrivateFieldGet(this,_eventBus)._off("pagechanging",_classPrivateFieldGet(this,_boundOnPageChanging)),_classPrivateFieldGet(this,_eventBus)._off("scalechanging",_classPrivateFieldGet(this,_boundOnScaleChanging)),_classPrivateFieldGet(this,_eventBus)._off("rotationchanging",_classPrivateFieldGet(this,_boundOnRotationChanging));for(const layer of _classPrivateFieldGet(this,_allLayers).values())layer.destroy();_classPrivateFieldGet(this,_allLayers).clear(),_classPrivateFieldGet(this,_allEditors).clear(),_classPrivateFieldGet(this,_editorsToRescale).clear(),_classPrivateFieldSet(this,_activeEditor,null),_classPrivateFieldGet(this,_selectedEditors).clear(),_classPrivateFieldGet(this,_commandManager).destroy()}onPageChanging({pageNumber}){_classPrivateFieldSet(this,_currentPageIndex,pageNumber-1)}focusMainContainer(){_classPrivateFieldGet(this,_container).focus()}addShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).add(editor)}removeShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).delete(editor)}onScaleChanging({scale}){this.commitOrRemove(),this.viewParameters.realScale=scale*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS;for(const editor of _classPrivateFieldGet(this,_editorsToRescale))editor.onScaleChanging()}onRotationChanging({pagesRotation}){this.commitOrRemove(),this.viewParameters.rotation=pagesRotation}addToAnnotationStorage(editor){editor.isEmpty()||!_classPrivateFieldGet(this,_annotationStorage)||_classPrivateFieldGet(this,_annotationStorage).has(editor.id)||_classPrivateFieldGet(this,_annotationStorage).setValue(editor.id,editor)}copy(event){if(event.preventDefault(),_classPrivateFieldGet(this,_activeEditor)&&_classPrivateFieldGet(this,_activeEditor).commitOrRemove(),!this.hasSelection)return;const editors=[];for(const editor of _classPrivateFieldGet(this,_selectedEditors))editor.isEmpty()||editors.push(editor.serialize());0!==editors.length&&event.clipboardData.setData("application/pdfjs",JSON.stringify(editors))}cut(event){this.copy(event),this.delete()}paste(event){event.preventDefault();let data=event.clipboardData.getData("application/pdfjs");if(!data)return;try{data=JSON.parse(data)}catch(ex){return void(0,_util.warn)(`paste: "${ex.message}".`)}if(!Array.isArray(data))return;this.unselectAll();const layer=_classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex));try{const newEditors=[];for(const editor of data){const deserializedEditor=layer.deserialize(editor);if(!deserializedEditor)return;newEditors.push(deserializedEditor)}const cmd=()=>{for(const editor of newEditors)_classPrivateMethodGet(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor);_classPrivateMethodGet(this,_selectEditors,_selectEditors2).call(this,newEditors)},undo=()=>{for(const editor of newEditors)editor.remove()};this.addCommands({cmd,undo,mustExec:!0})}catch(ex){(0,_util.warn)(`paste: "${ex.message}".`)}}keydown(event){this.getActive()?.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,event)}onEditingAction(details){["undo","redo","delete","selectAll"].includes(details.name)&&this[details.name]()}setEditingState(isEditing){isEditing?(_classPrivateMethodGet(this,_addKeyboardManager,_addKeyboardManager2).call(this),_classPrivateMethodGet(this,_addCopyPasteListeners,_addCopyPasteListeners2).call(this),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,_mode)!==_util.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:!1})):(_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateMethodGet(this,_removeCopyPasteListeners,_removeCopyPasteListeners2).call(this),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:!1}))}registerEditorTypes(types){if(!_classPrivateFieldGet(this,_editorTypes)){_classPrivateFieldSet(this,_editorTypes,types);for(const editorType of _classPrivateFieldGet(this,_editorTypes))_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editorType.defaultPropertiesToUpdate)}}getId(){return _classPrivateFieldGet(this,_idManager).getId()}get currentLayer(){return _classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex))}get currentPageIndex(){return _classPrivateFieldGet(this,_currentPageIndex)}addLayer(layer){_classPrivateFieldGet(this,_allLayers).set(layer.pageIndex,layer),_classPrivateFieldGet(this,_isEnabled)?layer.enable():layer.disable()}removeLayer(layer){_classPrivateFieldGet(this,_allLayers).delete(layer.pageIndex)}updateMode(mode){if(_classPrivateFieldSet(this,_mode,mode),mode===_util.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet(this,_disableAll,_disableAll2).call(this);else{this.setEditingState(!0),_classPrivateMethodGet(this,_enableAll,_enableAll2).call(this);for(const layer of _classPrivateFieldGet(this,_allLayers).values())layer.updateMode(mode)}}updateToolbar(mode){mode!==_classPrivateFieldGet(this,_mode)&&_classPrivateFieldGet(this,_eventBus).dispatch("switchannotationeditormode",{source:this,mode})}updateParams(type,value){if(_classPrivateFieldGet(this,_editorTypes)){for(const editor of _classPrivateFieldGet(this,_selectedEditors))editor.updateParams(type,value);for(const editorType of _classPrivateFieldGet(this,_editorTypes))editorType.updateDefaultParams(type,value)}}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet(this,_allEditors).values())editor.pageIndex===pageIndex&&editors.push(editor);return editors}getEditor(id){return _classPrivateFieldGet(this,_allEditors).get(id)}addEditor(editor){_classPrivateFieldGet(this,_allEditors).set(editor.id,editor)}removeEditor(editor){_classPrivateFieldGet(this,_allEditors).delete(editor.id),this.unselect(editor),_classPrivateFieldGet(this,_annotationStorage)?.remove(editor.id)}setActiveEditor(editor){_classPrivateFieldGet(this,_activeEditor)!==editor&&(_classPrivateFieldSet(this,_activeEditor,editor),editor&&_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate))}toggleSelected(editor){if(_classPrivateFieldGet(this,_selectedEditors).has(editor))return _classPrivateFieldGet(this,_selectedEditors).delete(editor),editor.unselect(),void _classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}setSelected(editor){for(const ed of _classPrivateFieldGet(this,_selectedEditors))ed!==editor&&ed.unselect();_classPrivateFieldGet(this,_selectedEditors).clear(),_classPrivateFieldGet(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}isSelected(editor){return _classPrivateFieldGet(this,_selectedEditors).has(editor)}unselect(editor){editor.unselect(),_classPrivateFieldGet(this,_selectedEditors).delete(editor),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,_selectedEditors).size}undo(){_classPrivateFieldGet(this,_commandManager).undo(),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)})}redo(){_classPrivateFieldGet(this,_commandManager).redo(),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)})}addCommands(params){_classPrivateFieldGet(this,_commandManager).add(params),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const editors=[..._classPrivateFieldGet(this,_selectedEditors)];this.addCommands({cmd:()=>{for(const editor of editors)editor.remove()},undo:()=>{for(const editor of editors)_classPrivateMethodGet(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor)},mustExec:!0})}commitOrRemove(){_classPrivateFieldGet(this,_activeEditor)?.commitOrRemove()}selectAll(){for(const editor of _classPrivateFieldGet(this,_selectedEditors))editor.commit();_classPrivateMethodGet(this,_selectEditors,_selectEditors2).call(this,_classPrivateFieldGet(this,_allEditors).values())}unselectAll(){if(_classPrivateFieldGet(this,_activeEditor))_classPrivateFieldGet(this,_activeEditor).commitOrRemove();else if(0!==_classPrivateFieldGet(this,_selectedEditors).size){for(const editor of _classPrivateFieldGet(this,_selectedEditors))editor.unselect();_classPrivateFieldGet(this,_selectedEditors).clear(),_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}isActive(editor){return _classPrivateFieldGet(this,_activeEditor)===editor}getActive(){return _classPrivateFieldGet(this,_activeEditor)}getMode(){return _classPrivateFieldGet(this,_mode)}}function _addKeyboardManager2(){_classPrivateFieldGet(this,_container).addEventListener("keydown",_classPrivateFieldGet(this,_boundKeydown))}function _removeKeyboardManager2(){_classPrivateFieldGet(this,_container).removeEventListener("keydown",_classPrivateFieldGet(this,_boundKeydown))}function _addCopyPasteListeners2(){document.addEventListener("copy",_classPrivateFieldGet(this,_boundCopy)),document.addEventListener("cut",_classPrivateFieldGet(this,_boundCut)),document.addEventListener("paste",_classPrivateFieldGet(this,_boundPaste))}function _removeCopyPasteListeners2(){document.removeEventListener("copy",_classPrivateFieldGet(this,_boundCopy)),document.removeEventListener("cut",_classPrivateFieldGet(this,_boundCut)),document.removeEventListener("paste",_classPrivateFieldGet(this,_boundPaste))}function _dispatchUpdateStates2(details){Object.entries(details).some((([key,value])=>_classPrivateFieldGet(this,_previousStates)[key]!==value))&&_classPrivateFieldGet(this,_eventBus).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,_previousStates),details)})}function _dispatchUpdateUI2(details){_classPrivateFieldGet(this,_eventBus).dispatch("annotationeditorparamschanged",{source:this,details})}function _enableAll2(){if(!_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,!0);for(const layer of _classPrivateFieldGet(this,_allLayers).values())layer.enable()}}function _disableAll2(){if(this.unselectAll(),_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,!1);for(const layer of _classPrivateFieldGet(this,_allLayers).values())layer.disable()}}function _addEditorToLayer2(editor){const layer=_classPrivateFieldGet(this,_allLayers).get(editor.pageIndex);layer?layer.addOrRebuild(editor):this.addEditor(editor)}function _isEmpty2(){if(0===_classPrivateFieldGet(this,_allEditors).size)return!0;if(1===_classPrivateFieldGet(this,_allEditors).size)for(const editor of _classPrivateFieldGet(this,_allEditors).values())return editor.isEmpty();return!1}function _selectEditors2(editors){_classPrivateFieldGet(this,_selectedEditors).clear();for(const editor of editors)editor.isEmpty()||(_classPrivateFieldGet(this,_selectedEditors).add(editor),editor.select());_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}_defineProperty(AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]])),exports.AnnotationEditorUIManager=AnnotationEditorUIManager},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatTimer=exports.RenderingCancelledException=exports.PixelsPerInch=exports.PageViewport=exports.PDFDateString=exports.DOMStandardFontDataFactory=exports.DOMSVGFactory=exports.DOMFilterFactory=exports.DOMCanvasFactory=exports.DOMCMapReaderFactory=exports.AnnotationPrefix=void 0,exports.deprecated=function deprecated(details){console.log("Deprecated API usage: "+details)},exports.getColorValues=function getColorValues(colors){const span=document.createElement("span");span.style.visibility="hidden",document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor))}span.remove()},exports.getCurrentTransform=function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f]},exports.getCurrentTransformInverse=function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f]},exports.getFilenameFromUrl=function getFilenameFromUrl(url,onlyStripPath=!1){onlyStripPath||([url]=url.split(/[#?]/,1));return url.substring(url.lastIndexOf("/")+1)},exports.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(url,defaultFilename="document.pdf"){if("string"!=typeof url)return defaultFilename;if(isDataScheme(url))return(0,_util.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),defaultFilename;const reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(ex){}return suggestedFilename||defaultFilename},exports.getRGB=getRGB,exports.getXfaPageViewport=function getXfaPageViewport(xfaPage,{scale=1,rotation=0}){const{width,height}=xfaPage.attributes.style,viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation})},exports.isDataScheme=isDataScheme,exports.isPdfFile=function isPdfFile(filename){return"string"==typeof filename&&/\.pdf$/i.test(filename)},exports.isValidFetchUrl=isValidFetchUrl,exports.loadScript=function loadScript(src,removeScriptElement=!1){return new Promise(((resolve,reject)=>{const script=document.createElement("script");script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).append(script)}))},exports.setLayerDimensions=function setLayerDimensions(div,viewport,mustFlip=!1,mustRotate=!0){if(viewport instanceof PageViewport){const{pageWidth,pageHeight}=viewport.rawDims,{style}=div,widthStr=`calc(var(--scale-factor) * ${pageWidth}px)`,heightStr=`calc(var(--scale-factor) * ${pageHeight}px)`;mustFlip&&viewport.rotation%180!=0?(style.width=heightStr,style.height=widthStr):(style.width=widthStr,style.height=heightStr)}mustRotate&&div.setAttribute("data-main-rotation",viewport.rotation)};var _base_factory=__w_pdfjs_require__(7),_util=__w_pdfjs_require__(1);const SVG_NS="http://www.w3.org/2000/svg";exports.AnnotationPrefix="pdfjs_internal_id_";class PixelsPerInch{}_defineProperty(PixelsPerInch,"CSS",96),_defineProperty(PixelsPerInch,"PDF",72),_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",PixelsPerInch.CSS/PixelsPerInch.PDF),exports.PixelsPerInch=PixelsPerInch;var _cache=new WeakMap,_defs=new WeakMap,_docId2=new WeakMap,_document=new WeakMap,_hcmFilter=new WeakMap,_hcmKey=new WeakMap,_hcmUrl=new WeakMap,_id2=new WeakMap,_cache2=new WeakMap,_defs2=new WeakMap,_appendFeFunc=new WeakSet;class DOMFilterFactory extends _base_factory.BaseFilterFactory{constructor({docId,ownerDocument=globalThis.document}={}){super(),_classPrivateMethodInitSpec(this,_appendFeFunc),_classPrivateFieldInitSpec(this,_defs2,{get:_get_defs,set:void 0}),_classPrivateFieldInitSpec(this,_cache2,{get:_get_cache,set:void 0}),_classPrivateFieldInitSpec(this,_cache,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_defs,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_docId2,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_document,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_hcmFilter,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_hcmKey,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_hcmUrl,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_id2,{writable:!0,value:0}),_classPrivateFieldSet(this,_docId2,docId),_classPrivateFieldSet(this,_document,ownerDocument)}addFilter(maps){var _this$id3,_this$id4;if(!maps)return"none";let tableR,tableG,tableB,key,value=_classPrivateFieldGet(this,_cache2).get(maps);if(value)return value;if(1===maps.length){const mapR=maps[0],buffer=new Array(256);for(let i=0;i<256;i++)buffer[i]=mapR[i]/255;key=tableR=tableG=tableB=buffer.join(",")}else{const[mapR,mapG,mapB]=maps,bufferR=new Array(256),bufferG=new Array(256),bufferB=new Array(256);for(let i=0;i<256;i++)bufferR[i]=mapR[i]/255,bufferG[i]=mapG[i]/255,bufferB[i]=mapB[i]/255;tableR=bufferR.join(","),tableG=bufferG.join(","),tableB=bufferB.join(","),key=`${tableR}${tableG}${tableB}`}if(value=_classPrivateFieldGet(this,_cache2).get(key),value)return _classPrivateFieldGet(this,_cache2).set(maps,value),value;const id=`g_${_classPrivateFieldGet(this,_docId2)}_transfer_map_${_classPrivateFieldSet(this,_id2,(_this$id3=_classPrivateFieldGet(this,_id2),_this$id4=_this$id3++,_this$id3)),_this$id4}`,url=`url(#${id})`;_classPrivateFieldGet(this,_cache2).set(maps,url),_classPrivateFieldGet(this,_cache2).set(key,url);const filter=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"filter",SVG_NS);filter.setAttribute("id",id),filter.setAttribute("color-interpolation-filters","sRGB");const feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer");return filter.append(feComponentTransfer),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",tableR),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",tableG),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",tableB),_classPrivateFieldGet(this,_defs2).append(filter),url}addHCMFilter(fgColor,bgColor){const key=`${fgColor}-${bgColor}`;if(_classPrivateFieldGet(this,_hcmKey)===key)return _classPrivateFieldGet(this,_hcmUrl);if(_classPrivateFieldSet(this,_hcmKey,key),_classPrivateFieldSet(this,_hcmUrl,"none"),_classPrivateFieldGet(this,_hcmFilter)?.remove(),!fgColor||!bgColor)return _classPrivateFieldGet(this,_hcmUrl);_classPrivateFieldGet(this,_defs2).style.color=fgColor;const fgRGB=getRGB(fgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue("color"));fgColor=_util.Util.makeHexColor(...fgRGB),_classPrivateFieldGet(this,_defs2).style.color=bgColor;const bgRGB=getRGB(bgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue("color"));if(bgColor=_util.Util.makeHexColor(...bgRGB),_classPrivateFieldGet(this,_defs2).style.color="","#000000"===fgColor&&"#ffffff"===bgColor||fgColor===bgColor)return _classPrivateFieldGet(this,_hcmUrl);const map=new Array(256);for(let i=0;i<=255;i++){const x=i/255;map[i]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const table=map.join(","),id=`g_${_classPrivateFieldGet(this,_docId2)}_hcm_filter`,filter=_classPrivateFieldSet(this,_hcmFilter,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"filter",SVG_NS));filter.setAttribute("id",id),filter.setAttribute("color-interpolation-filters","sRGB");let feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",table),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",table),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",table);const feColorMatrix=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feColorMatrix");feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),filter.append(feColorMatrix),feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer"),filter.append(feComponentTransfer);const getSteps=(c,n)=>{const start=fgRGB[c]/255,end=bgRGB[c]/255,arr=new Array(n+1);for(let i=0;i<=n;i++)arr[i]=start+i/n*(end-start);return arr.join(",")};return _classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",getSteps(0,5)),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",getSteps(1,5)),_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",getSteps(2,5)),_classPrivateFieldGet(this,_defs2).append(filter),_classPrivateFieldSet(this,_hcmUrl,`url(#${id})`),_classPrivateFieldGet(this,_hcmUrl)}destroy(keepHCM=!1){keepHCM&&_classPrivateFieldGet(this,_hcmUrl)||(_classPrivateFieldGet(this,_defs)&&(_classPrivateFieldGet(this,_defs).parentNode.parentNode.remove(),_classPrivateFieldSet(this,_defs,null)),_classPrivateFieldGet(this,_cache)&&(_classPrivateFieldGet(this,_cache).clear(),_classPrivateFieldSet(this,_cache,null)),_classPrivateFieldSet(this,_id2,0))}}function _get_cache(){return _classPrivateFieldGet(this,_cache)||_classPrivateFieldSet(this,_cache,new Map)}function _get_defs(){if(!_classPrivateFieldGet(this,_defs)){const div=_classPrivateFieldGet(this,_document).createElement("div"),{style}=div;style.visibility="hidden",style.contain="strict",style.width=style.height=0,style.position="absolute",style.top=style.left=0,style.zIndex=-1;const svg=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"svg");svg.setAttribute("width",0),svg.setAttribute("height",0),_classPrivateFieldSet(this,_defs,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"defs")),div.append(svg),svg.append(_classPrivateFieldGet(this,_defs)),_classPrivateFieldGet(this,_document).body.append(div)}return _classPrivateFieldGet(this,_defs)}function _appendFeFunc2(feComponentTransfer,func,table){const feFunc=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,func);feFunc.setAttribute("type","discrete"),feFunc.setAttribute("tableValues",table),feComponentTransfer.append(feFunc)}exports.DOMFilterFactory=DOMFilterFactory;class DOMCanvasFactory extends _base_factory.BaseCanvasFactory{constructor({ownerDocument=globalThis.document}={}){super(),this._document=ownerDocument}_createCanvas(width,height){const canvas=this._document.createElement("canvas");return canvas.width=width,canvas.height=height,canvas}}function fetchData(_x3){return _fetchData.apply(this,arguments)}function _fetchData(){return(_fetchData=_asyncToGenerator((function*(url,asTypedArray=!1){if(isValidFetchUrl(url,document.baseURI)){const response=yield fetch(url);if(!response.ok)throw new Error(response.statusText);return asTypedArray?new Uint8Array(yield response.arrayBuffer()):(0,_util.stringToBytes)(yield response.text())}return new Promise(((resolve,reject)=>{const request=new XMLHttpRequest;request.open("GET",url,!0),asTypedArray&&(request.responseType="arraybuffer"),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(200===request.status||0===request.status){let data;if(asTypedArray&&request.response?data=new Uint8Array(request.response):!asTypedArray&&request.responseText&&(data=(0,_util.stringToBytes)(request.responseText)),data)return void resolve(data)}reject(new Error(request.statusText))}},request.send(null)}))}))).apply(this,arguments)}exports.DOMCanvasFactory=DOMCanvasFactory;class DOMCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then((data=>({cMapData:data,compressionType})))}}exports.DOMCMapReaderFactory=DOMCMapReaderFactory;class DOMStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url,!0)}}exports.DOMStandardFontDataFactory=DOMStandardFontDataFactory;class DOMSVGFactory extends _base_factory.BaseSVGFactory{_createSVG(type){return document.createElementNS(SVG_NS,type)}}exports.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor({viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=!1}){this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD,offsetCanvasX,offsetCanvasY,width,height;switch((rotation%=360)<0&&(rotation+=360),rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD),0===rotateA?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=(viewBox[3]-viewBox[1])*scale,height=(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=(viewBox[2]-viewBox[0])*scale,height=(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}get rawDims(){const{viewBox}=this;return(0,_util.shadow)(this,"rawDims",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]})}clone({scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip})}convertToViewportPoint(x,y){return _util.Util.applyTransform([x,y],this.transform)}convertToViewportRectangle(rect){const topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x,y){return _util.Util.applyInverseTransform([x,y],this.transform)}}exports.PageViewport=PageViewport;class RenderingCancelledException extends _util.BaseException{constructor(msg,type,extraDelay=0){super(msg,"RenderingCancelledException"),this.type=type,this.extraDelay=extraDelay}}function isDataScheme(url){const ii=url.length;let i=0;for(;i<ii&&""===url[i].trim();)i++;return"data:"===url.substring(i,i+5).toLowerCase()}exports.RenderingCancelledException=RenderingCancelledException;function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return"http:"===protocol||"https:"===protocol}catch(ex){return!1}}let pdfDateStringRegex;exports.StatTimer=class StatTimer{constructor(){_defineProperty(this,"started",Object.create(null)),_defineProperty(this,"times",[])}time(name){name in this.started&&(0,_util.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util.warn)(`Timer has not been started for ${name}`),this.times.push({name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){const outBuf=[];let longest=0;for(const{name}of this.times)longest=Math.max(name.length,longest);for(const{name,start,end}of this.times)outBuf.push(`${name.padEnd(longest)} ${end-start}ms\n`);return outBuf.join("")}};function getRGB(color){if(color.startsWith("#")){const colorRGB=parseInt(color.slice(1),16);return[(16711680&colorRGB)>>16,(65280&colorRGB)>>8,255&colorRGB]}return color.startsWith("rgb(")?color.slice(4,-1).split(",").map((x=>parseInt(x))):color.startsWith("rgba(")?color.slice(5,-1).split(",").map((x=>parseInt(x))).slice(0,3):((0,_util.warn)(`Not a valid color format: "${color}"`),[0,0,0])}exports.PDFDateString=class PDFDateString{static toDateObject(input){if(!input||"string"!=typeof input)return null;pdfDateStringRegex||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const matches=pdfDateStringRegex.exec(input);if(!matches)return null;const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||"Z";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,"-"===universalTimeRelation?(hour+=offsetHour,minute+=offsetMinute):"+"===universalTimeRelation&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseStandardFontDataFactory=exports.BaseSVGFactory=exports.BaseFilterFactory=exports.BaseCanvasFactory=exports.BaseCMapReaderFactory=void 0;var _util=__w_pdfjs_require__(1);class BaseFilterFactory{constructor(){this.constructor===BaseFilterFactory&&(0,_util.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(maps){return"none"}addHCMFilter(fgColor,bgColor){return"none"}destroy(keepHCM=!1){}}exports.BaseFilterFactory=BaseFilterFactory;class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,_util.unreachable)("Cannot initialize BaseCanvasFactory.")}create(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext("2d")}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}_createCanvas(width,height){(0,_util.unreachable)("Abstract method `_createCanvas` called.")}}exports.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl=null,isCompressed=!0}){this.constructor===BaseCMapReaderFactory&&(0,_util.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=baseUrl,this.isCompressed=isCompressed}fetch({name}){var _this6=this;return _asyncToGenerator((function*(){if(!_this6.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!name)throw new Error("CMap name must be specified.");const url=_this6.baseUrl+name+(_this6.isCompressed?".bcmap":""),compressionType=_this6.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE;return _this6._fetchData(url,compressionType).catch((reason=>{throw new Error(`Unable to load ${_this6.isCompressed?"binary ":""}CMap at: ${url}`)}))}))()}_fetchData(url,compressionType){(0,_util.unreachable)("Abstract method `_fetchData` called.")}}exports.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor({baseUrl=null}){this.constructor===BaseStandardFontDataFactory&&(0,_util.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=baseUrl}fetch({filename}){var _this7=this;return _asyncToGenerator((function*(){if(!_this7.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!filename)throw new Error("Font filename must be specified.");const url=`${_this7.baseUrl}${filename}`;return _this7._fetchData(url).catch((reason=>{throw new Error(`Unable to load font data at: ${url}`)}))}))()}_fetchData(url){(0,_util.unreachable)("Abstract method `_fetchData` called.")}}exports.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,_util.unreachable)("Cannot initialize BaseSVGFactory.")}create(width,height,skipDimensions=!1){if(width<=0||height<=0)throw new Error("Invalid SVG dimensions");const svg=this._createSVG("svg:svg");return svg.setAttribute("version","1.1"),skipDimensions||(svg.setAttribute("width",`${width}px`),svg.setAttribute("height",`${height}px`)),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox",`0 0 ${width} ${height}`),svg}createElement(type){if("string"!=typeof type)throw new Error("Invalid SVG element type");return this._createSVG(type)}_createSVG(type){(0,_util.unreachable)("Abstract method `_createSVG` called.")}}exports.BaseSVGFactory=BaseSVGFactory},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.MurmurHash3_64=void 0;var _util=__w_pdfjs_require__(1);exports.MurmurHash3_64=class MurmurHash3_64{constructor(seed){this.h1=seed?4294967295&seed:3285377520,this.h2=seed?4294967295&seed:3285377520}update(input){let data,length;if("string"==typeof input){data=new Uint8Array(2*input.length),length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=255&code)}}else{if(!(0,_util.isArrayBuffer)(input))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");data=input.slice(),length=data.byteLength}const blockCounts=length>>2,tailLength=length-4*blockCounts,dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0,h1=this.h1,h2=this.h2;const C1=3432918353,C2=461845907;for(let i=0;i<blockCounts;i++)1&i?(k1=dataUint32[i],k1=k1*C1&4294901760|11601*k1&65535,k1=k1<<15|k1>>>17,k1=k1*C2&4294901760|13715*k1&65535,h1^=k1,h1=h1<<13|h1>>>19,h1=5*h1+3864292196):(k2=dataUint32[i],k2=k2*C1&4294901760|11601*k2&65535,k2=k2<<15|k2>>>17,k2=k2*C2&4294901760|13715*k2&65535,h2^=k2,h2=h2<<13|h2>>>19,h2=5*h2+3864292196);switch(k1=0,tailLength){case 3:k1^=data[4*blockCounts+2]<<16;case 2:k1^=data[4*blockCounts+1]<<8;case 1:k1^=data[4*blockCounts],k1=k1*C1&4294901760|11601*k1&65535,k1=k1<<15|k1>>>17,k1=k1*C2&4294901760|13715*k1&65535,1&blockCounts?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;return h1^=h2>>>1,h1=3981806797*h1&4294901760|36045*h1&65535,h2=4283543511*h2&4294901760|(2950163797*(h2<<16|h1>>>16)&4294901760)>>>16,h1^=h2>>>1,h1=444984403*h1&4294901760|60499*h1&65535,h2=3301882366*h2&4294901760|(3120437893*(h2<<16|h1>>>16)&4294901760)>>>16,h1^=h2>>>1,(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0")}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontLoader=exports.FontFaceObject=void 0;var _util=__w_pdfjs_require__(1),_is_node=__w_pdfjs_require__(10),_systemFonts=new WeakMap;exports.FontLoader=class FontLoader{constructor({ownerDocument=globalThis.document,styleElement=null}){_classPrivateFieldInitSpec(this,_systemFonts,{writable:!0,value:new Set}),this._document=ownerDocument,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace),this._document.fonts.add(nativeFontFace)}removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace),this._document.fonts.delete(nativeFontFace)}insertRule(rule){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){for(const nativeFontFace of this.nativeFontFaces)this._document.fonts.delete(nativeFontFace);this.nativeFontFaces.clear(),_classPrivateFieldGet(this,_systemFonts).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(info){var _this8=this;return _asyncToGenerator((function*(){if(info&&!_classPrivateFieldGet(_this8,_systemFonts).has(info.loadedName))if((0,_util.assert)(!_this8.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),_this8.isFontLoadingAPISupported){const{loadedName,src,style}=info,fontFace=new FontFace(loadedName,src,style);_this8.addNativeFontFace(fontFace);try{yield fontFace.load(),_classPrivateFieldGet(_this8,_systemFonts).add(loadedName)}catch{(0,_util.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`),_this8.removeNativeFontFace(fontFace)}}else(0,_util.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}))()}bind(font){var _this9=this;return _asyncToGenerator((function*(){if(font.attached||font.missingFile&&!font.systemFontInfo)return;if(font.attached=!0,font.systemFontInfo)return void(yield _this9.loadSystemFont(font.systemFontInfo));if(_this9.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){_this9.addNativeFontFace(nativeFontFace);try{yield nativeFontFace.loaded}catch(ex){throw(0,_util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}const rule=font.createFontFaceRule();if(rule){if(_this9.insertRule(rule),_this9.isSyncFontLoadingSupported)return;yield new Promise((resolve=>{const request=_this9._queueLoadingCallback(resolve);_this9._prepareFontLoadEvent(font,request)}))}}))()}get isFontLoadingAPISupported(){const hasFonts=!!this._document?.fonts;return(0,_util.shadow)(this,"isFontLoadingAPISupported",hasFonts)}get isSyncFontLoadingSupported(){let supported=!1;return(_is_node.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(supported=!0),(0,_util.shadow)(this,"isSyncFontLoadingSupported",supported)}_queueLoadingCallback(callback){const{loadingRequests}=this,request={done:!1,complete:function completeRequest(){for((0,_util.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;loadingRequests.length>0&&loadingRequests[0].done;){const otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0)}},callback};return loadingRequests.push(request),request}get _loadTestFont(){const testFont=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,_util.shadow)(this,"_loadTestFont",testFont)}_prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|255&data.charCodeAt(offset+3)}function spliceString(s,offset,remove,insert){return s.substring(0,offset)+insert+s.substring(offset+remove)}let i,ii;const canvas=this._document.createElement("canvas");canvas.width=1,canvas.height=1;const ctx=canvas.getContext("2d");let called=0;const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);let checksum=int32(data,16);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-1482184792+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-1482184792+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,16,4,(0,_util.string32)(checksum));const rule=`@font-face {font-family:"${loadTestFontId}";src:${`url(data:font/opentype;base64,${btoa(data)});`}}`;this.insertRule(rule);const div=this._document.createElement("div");div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px";for(const name of[font.loadedName,loadTestFontId]){const span=this._document.createElement("span");span.textContent="Hi",span.style.fontFamily=name,div.append(span)}this._document.body.append(div),function isFontReady(name,callback){if(++called>30)return(0,_util.warn)("Load test font never loaded."),void callback();ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0?callback():setTimeout(isFontReady.bind(null,name,callback))}(loadTestFontId,(()=>{div.remove(),request.complete()}))}};exports.FontFaceObject=class FontFaceObject{constructor(translatedData,{isEvalSupported=!0,disableFontFace=!1,ignoreErrors=!1,inspectFont=null}){this.compiledGlyphs=Object.create(null);for(const i in translatedData)this[i]=translatedData[i];this.isEvalSupported=!1!==isEvalSupported,this.disableFontFace=!0===disableFontFace,this.ignoreErrors=!0===ignoreErrors,this._inspectFont=inspectFont}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let nativeFontFace;if(this.cssFontInfo){const css={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(css.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css)}else nativeFontFace=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const data=(0,_util.bytesToString)(this.data),url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(this.cssFontInfo){let css=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rule=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`}else rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;return this._inspectFont?.(this,url),rule}getPathGenerator(objs,character){if(void 0!==this.compiledGlyphs[character])return this.compiledGlyphs[character];let cmds;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return(0,_util.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util.FeatureTest.isEvalSupported){const jsBuf=[];for(const current of cmds){const args=void 0!==current.args?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,");\n")}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""))}return this.compiledGlyphs[character]=function(c,size){for(const current of cmds)"scale"===current.cmd&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodeJS=void 0;const isNodeJS=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);exports.isNodeJS=isNodeJS},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanvasGraphics=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6),_pattern_helper=__w_pdfjs_require__(12),_image_utils=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(10);class CachedCanvases{constructor(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}getCanvas(id,width,height){let canvasEntry;return void 0!==this.cache[id]?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),canvasEntry}delete(id){delete this.cache[id]}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}}function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,_display_utils.getCurrentTransform)(ctx);if(0===b&&0===c){const tlX=destX*a+tx,rTlX=Math.round(tlX),tlY=destY*d+ty,rTlY=Math.round(tlY),brX=(destX+destW)*a+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destY+destH)*d+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight),ctx.setTransform(a,b,c,d,tx,ty),[rWidth,rHeight]}if(0===a&&0===d){const tlX=destY*c+tx,rTlX=Math.round(tlX),tlY=destX*b+ty,rTlY=Math.round(tlY),brX=(destY+destH)*c+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destX+destW)*b+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth),ctx.setTransform(a,b,c,d,tx,ty),[rHeight,rWidth]}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);return[Math.hypot(a,b)*destW,Math.hypot(c,d)*destH]}class CanvasExtraState{constructor(width,height){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,width,height])}clone(){const clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}setCurrentPoint(x,y){this.x=x,this.y=y}updatePathMinMax(transform,x,y){[x,y]=_util.Util.applyTransform([x,y],transform),this.minX=Math.min(this.minX,x),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,x),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(transform,rect){const p1=_util.Util.applyTransform(rect,transform),p2=_util.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]),this.minY=Math.min(this.minY,p1[1],p2[1]),this.maxX=Math.max(this.maxX,p1[0],p2[0]),this.maxY=Math.max(this.maxY,p1[1],p2[1])}updateScalingPathMinMax(transform,minMax){_util.Util.scaleMinMax(transform,minMax),this.minX=Math.min(this.minX,minMax[0]),this.maxX=Math.max(this.maxX,minMax[1]),this.minY=Math.min(this.minY,minMax[2]),this.maxY=Math.max(this.maxY,minMax[3])}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=_util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax)return minMax[0]=Math.min(minMax[0],box[0],box[2]),minMax[1]=Math.max(minMax[1],box[0],box[2]),minMax[2]=Math.min(minMax[2],box[1],box[3]),void(minMax[3]=Math.max(minMax[3],box[1],box[3]));this.updateRectMinMax(transform,box)}getPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){transform||(0,_util.unreachable)("Stroke bounding box must include transform.");const scale=_util.Util.singularValueDecompose2dScale(transform),xStrokePad=scale[0]*this.lineWidth/2,yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad,box[1]-=yStrokePad,box[2]+=xStrokePad,box[3]+=yStrokePad}return box}updateClipFromPath(){const intersect=_util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(box){this.clipBox=box,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){return _util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform))}}function putBinaryImageData(ctx,imgData){if("undefined"!=typeof ImageData&&imgData instanceof ImageData)return void ctx.putImageData(imgData,0,0);const height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16);let destPos,srcPos=0;const src=imgData.data,dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3,white=4294967295,black=_util.FeatureTest.isLittleEndian?4278190080:255;for(i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?16:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:8*srcDiff-7,kEndUnrolled=-8&kEnd;let mask=0,srcByte=0;for(;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=128&srcByte?white:black,dest32[destPos++]=64&srcByte?white:black,dest32[destPos++]=32&srcByte?white:black,dest32[destPos++]=16&srcByte?white:black,dest32[destPos++]=8&srcByte?white:black,dest32[destPos++]=4&srcByte?white:black,dest32[destPos++]=2&srcByte?white:black,dest32[destPos++]=1&srcByte?white:black;for(;k<kEnd;k++)0===mask&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,16*i)}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){for(j=0,elemsInThisChunk=16*width*4,i=0;i<fullChunks;i++)dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,ctx.putImageData(chunkImgData,0,j),j+=16;i<totalChunks&&(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),ctx.putImageData(chunkImgData,0,j))}else{if(imgData.kind!==_util.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${imgData.kind}`);for(thisChunkHeight=16,elemsInThisChunk=width*thisChunkHeight,i=0;i<totalChunks;i++){for(i>=fullChunks&&(thisChunkHeight=partialChunkHeight,elemsInThisChunk=width*thisChunkHeight),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;ctx.putImageData(chunkImgData,0,16*i)}}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap)return void ctx.drawImage(imgData.bitmap,0,0);const height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16);let srcPos=0;const src=imgData.data,dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?16:partialChunkHeight;({srcPos}=(0,_image_utils.convertBlackAndWhiteToRGBA)({src,srcPos,dest,width,height:thisChunkHeight,nonBlackColor:0})),ctx.putImageData(chunkImgData,0,16*i)}}function copyCtxState(sourceCtx,destCtx){const properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const property of properties)void 0!==sourceCtx[property]&&(destCtx[property]=sourceCtx[property]);void 0!==sourceCtx.setLineDash&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle="#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",void 0!==ctx.setLineDash&&(ctx.setLineDash([]),ctx.lineDashOffset=0),_is_node.isNodeJS||(ctx.filter="none")}function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(0===alpha)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*.00392156862745098|0}}function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=77*maskData[i-3]+152*maskData[i-2]+28*maskData[i-1];layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0],layerOffsetY=layerBox[1],layerWidth=layerBox[2]-layerOffsetX,layerHeight=layerBox[3]-layerOffsetY;0!==layerWidth&&0!==layerHeight&&(!function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;let composeFn;composeFn="Luminosity"===subtype?composeSMaskLuminosity:composeSMaskAlpha;const chunkSize=Math.min(height,Math.ceil(1048576/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight),layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY)}}(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY),ctx.save(),ctx.globalAlpha=1,ctx.globalCompositeOperation="source-over",ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layerCtx.canvas,0,0),ctx.restore())}function getImageSmoothingEnabled(transform,interpolate){const scale=_util.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]),scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==interpolate?interpolate:scale[0]<=actualScale||scale[1]<=actualScale}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var _restoreInitialState=new WeakSet,_drawFilter=new WeakSet;class CanvasGraphics{constructor(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,{optionalContentConfig,markedContentStack=null},annotationCanvasMap,pageColors){_classPrivateMethodInitSpec(this,_drawFilter),_classPrivateMethodInitSpec(this,_restoreInitialState),this.ctx=canvasCtx,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.filterFactory=filterFactory,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=markedContentStack||[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=annotationCanvasMap,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=pageColors,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(data,fallback=null){return"string"==typeof data?data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data):fallback}beginDrawing({transform,viewport,transparency=!1,background=null}){const width=this.ctx.canvas.width,height=this.ctx.canvas.height,savedFillStyle=this.ctx.fillStyle;if(this.ctx.fillStyle=background||"#ffffff",this.ctx.fillRect(0,0,width,height),this.ctx.fillStyle=savedFillStyle,transparency){const transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform(...(0,_display_utils.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),transform&&(this.ctx.transform(...transform),this.outputScaleX=transform[0],this.outputScaleY=transform[0]),this.ctx.transform(...viewport.transform),this.viewportScale=viewport.scale,this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx)}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray,fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;const chunkOperations=argsArrayLen-i>10&&"function"==typeof continueCallback,endTime=chunkOperations?Date.now()+15:0;let steps=0;const commonObjs=this.commonObjs,objs=this.objs;let fnId;for(;;){if(void 0!==stepper&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if(fnId=fnArray[i],fnId!==_util.OPS.dependency)this[fnId].apply(this,argsArray[i]);else for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}if(i++,i===argsArrayLen)return i;if(chunkOperations&&++steps>10){if(Date.now()>endTime)return continueCallback(),i;steps=0}}}endDrawing(){_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values())"undefined"!=typeof HTMLCanvasElement&&canvas instanceof HTMLCanvasElement&&(canvas.width=canvas.height=0);cache.clear()}this._cachedBitmapsMap.clear(),_classPrivateMethodGet(this,_drawFilter,_drawFilter2).call(this)}_scaleImage(img,inverseTransform){const width=img.width,height=img.height;let tmpCanvas,tmpCtx,widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1),heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1),paintWidth=width,paintHeight=height,tmpCanvasId="prescale1";for(;widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){let newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2),widthScale/=paintWidth/newWidth),heightScale>2&&paintHeight>1&&(newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2,heightScale/=paintHeight/newHeight),tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight),tmpCtx=tmpCanvas.context,tmpCtx.clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),img=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId="prescale1"===tmpCanvasId?"prescale2":"prescale1"}return{img,paintWidth,paintHeight}}_createMaskCanvas(img){const ctx=this.ctx,{width,height}=img,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,currentTransform=(0,_display_utils.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]),cache=this._cachedBitmapsMap.get(mainKey),cache||(cache=new Map,this._cachedBitmapsMap.set(mainKey,cache));const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){return{canvas:cachedImage,offsetX:Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]),offsetY:Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5])}}scaled=cachedImage}scaled||(maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),putBinaryImageMask(maskCanvas.context,img));let maskToCanvas=_util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const cord1=_util.Util.applyTransform([0,0],maskToCanvas),cord2=_util.Util.applyTransform([width,height],maskToCanvas),rect=_util.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]),drawnWidth=Math.round(rect[2]-rect[0])||1,drawnHeight=Math.round(rect[3]-rect[1])||1,fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight),fillCtx=fillCanvas.context,offsetX=Math.min(cord1[0],cord2[0]),offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY),fillCtx.transform(...maskToCanvas),scaled||(scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils.getCurrentTransformInverse)(fillCtx)),scaled=scaled.img,cache&&isPatternFill&&cache.set(cacheKey,scaled)),fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(fillCtx),img.interpolate),drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height),fillCtx.globalCompositeOperation="source-in";const inverse=_util.Util.transform((0,_display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);return fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor,fillCtx.fillRect(0,0,width,height),cache&&!isPatternFill&&(this.cachedCanvases.delete("fillCanvas"),cache.set(cacheKey,fillCanvas.canvas)),{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)}}setLineWidth(width){width!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=width,this.ctx.lineWidth=width}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.ctx.miterLimit=limit}setDash(dashArray,dashPhase){const ctx=this.ctx;void 0!==ctx.setLineDash&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=value;break;case"ca":this.current.fillAlpha=value,this.ctx.globalAlpha=value;break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const inSMaskMode=this.inSMaskMode;this.current.activeSMask&&!inSMaskMode?this.beginSMaskMode():!this.current.activeSMask&&inSMaskMode&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const drawnWidth=this.ctx.canvas.width,drawnHeight=this.ctx.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx,this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,_display_utils.getCurrentTransform)(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ctx),function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring)throw new Error("Context is already forwarding operations.");ctx.__originalSave=ctx.save,ctx.__originalRestore=ctx.restore,ctx.__originalRotate=ctx.rotate,ctx.__originalScale=ctx.scale,ctx.__originalTranslate=ctx.translate,ctx.__originalTransform=ctx.transform,ctx.__originalSetTransform=ctx.setTransform,ctx.__originalResetTransform=ctx.resetTransform,ctx.__originalClip=ctx.clip,ctx.__originalMoveTo=ctx.moveTo,ctx.__originalLineTo=ctx.lineTo,ctx.__originalBezierCurveTo=ctx.bezierCurveTo,ctx.__originalRect=ctx.rect,ctx.__originalClosePath=ctx.closePath,ctx.__originalBeginPath=ctx.beginPath,ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave,ctx.restore=ctx.__originalRestore,ctx.rotate=ctx.__originalRotate,ctx.scale=ctx.__originalScale,ctx.translate=ctx.__originalTranslate,ctx.transform=ctx.__originalTransform,ctx.setTransform=ctx.__originalSetTransform,ctx.resetTransform=ctx.__originalResetTransform,ctx.clip=ctx.__originalClip,ctx.moveTo=ctx.__originalMoveTo,ctx.lineTo=ctx.__originalLineTo,ctx.bezierCurveTo=ctx.__originalBezierCurveTo,ctx.rect=ctx.__originalRect,ctx.closePath=ctx.__originalClosePath,ctx.beginPath=ctx.__originalBeginPath,delete ctx._removeMirroring},ctx.save=function ctxSave(){destCtx.save(),this.__originalSave()},ctx.restore=function ctxRestore(){destCtx.restore(),this.__originalRestore()},ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y),this.__originalTranslate(x,y)},ctx.scale=function ctxScale(x,y){destCtx.scale(x,y),this.__originalScale(x,y)},ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f),this.__originalTransform(a,b,c,d,e,f)},ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f),this.__originalSetTransform(a,b,c,d,e,f)},ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform(),this.__originalResetTransform()},ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle),this.__originalRotate(angle)},ctx.clip=function ctxRotate(rule){destCtx.clip(rule),this.__originalClip(rule)},ctx.moveTo=function(x,y){destCtx.moveTo(x,y),this.__originalMoveTo(x,y)},ctx.lineTo=function(x,y){destCtx.lineTo(x,y),this.__originalLineTo(x,y)},ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y),this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height),this.__originalRect(x,y,width,height)},ctx.closePath=function(){destCtx.closePath(),this.__originalClosePath()},ctx.beginPath=function(){destCtx.beginPath(),this.__originalBeginPath()}}(ctx,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dirtyBox){if(!this.current.activeSMask)return;dirtyBox?(dirtyBox[0]=Math.floor(dirtyBox[0]),dirtyBox[1]=Math.floor(dirtyBox[1]),dirtyBox[2]=Math.ceil(dirtyBox[2]),dirtyBox[3]=Math.ceil(dirtyBox[3])):dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const smask=this.current.activeSMask;composeSMask(this.suspendedCtx,smask,this.ctx,dirtyBox),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const old=this.current;this.stateStack.push(old),this.current=old.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ops,args,minMax){const ctx=this.ctx,current=this.current;let startX,startY,x=current.x,y=current.y;const currentTransform=(0,_display_utils.getCurrentTransform)(ctx),isScalingMatrix=0===currentTransform[0]&&0===currentTransform[3]||0===currentTransform[1]&&0===currentTransform[2],minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++)switch(0|ops[i]){case _util.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;ctx.moveTo(x,y),0===width||0===height?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y),ctx.lineTo(xw,yh),ctx.lineTo(x,yh)),isScalingMatrix||current.updateRectMinMax(currentTransform,[x,y,xw,yh]),ctx.closePath();break;case _util.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util.OPS.curveTo:startX=x,startY=y,x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier),j+=6;break;case _util.OPS.curveTo2:startX=x,startY=y,ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:startX=x,startY=y,x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier),j+=4;break;case _util.OPS.closePath:ctx.closePath()}isScalingMatrix&&current.updateScalingPathMinMax(currentTransform,minMaxForBezier),current.setCurrentPoint(x,y)}closePath(){this.ctx.closePath()}stroke(consumePath=!0){const ctx=this.ctx,strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof strokeColor&&strokeColor?.getPattern?(ctx.save(),ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE),this.rescaleAndStroke(!1),ctx.restore()):this.rescaleAndStroke(!0)),consumePath&&this.consumePath(this.current.getClippedPathBoundingBox()),ctx.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(consumePath=!0){const ctx=this.ctx,fillColor=this.current.fillColor;let needRestore=!1;this.current.patternFill&&(ctx.save(),ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL),needRestore=!0);const intersect=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==intersect&&(this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath(intersect)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=_util.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const paths=this.pendingTextPaths,ctx=this.ctx;if(void 0!==paths){ctx.save(),ctx.beginPath();for(const path of paths)ctx.setTransform(...path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize);ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}else ctx.beginPath()}setCharSpacing(spacing){this.current.charSpacing=spacing}setWordSpacing(spacing){this.current.wordSpacing=spacing}setHScale(scale){this.current.textHScale=scale/100}setLeading(leading){this.current.leading=-leading}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX,0!==current.fontMatrix[0]&&0!==current.fontMatrix[3]||(0,_util.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;const name=fontObj.loadedName||"sans-serif",typeface=fontObj.systemFontInfo?.css||`"${name}", ${fontObj.fallbackName}`;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";let browserFontSize=size;size<16?browserFontSize=16:size>100&&(browserFontSize=100),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`}setTextRenderingMode(mode){this.current.textRenderingMode=mode}setTextRise(rise){this.current.textRise=rise}moveText(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.hypot(a,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(character,x,y,patternTransform){const ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile;let addToPath;if((font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform(...patternTransform),fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fill(),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.stroke(),ctx.restore()):(fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fillText(character,x,y),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.strokeText(character,x,y)),isAddToPathSet){(this.pendingTextPaths||=[]).push({transform:(0,_display_utils.getCurrentTransform)(ctx),x,y,fontSize,addToPath})}}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ctx.scale(1.5,1),ctx.fillText("I",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=!1;for(let i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util.shadow)(this,"isFontSubpixelAAEnabled",enabled)}showText(glyphs){const current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);const fontSize=current.fontSize;if(0===fontSize)return;const ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;let patternTransform;if(ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1),current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils.getCurrentTransform)(ctx),ctx.restore(),ctx.fillStyle=pattern}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(0===scale||0===lineWidth){const fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||(lineWidth=this.getSinglePixelWidth())}else lineWidth/=scale;if(1!==fontSizeScale&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth,font.isInvalidPDFjsFont){const chars=[];let width=0;for(const glyph of glyphs)chars.push(glyph.unicode),width+=glyph.width;return ctx.fillText(chars.join(""),0,0),current.x+=width*widthAdvanceScale*textHScale,ctx.restore(),void this.compose()}let i,x=0;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if("number"==typeof glyph){x+=spacingDir*glyph*fontSize/1e3;continue}let restoreNeeded=!1;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent;let scaledX,scaledY,charWidth,width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:.5*width)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){const measuredWidth=1e3*ctx.measureText(character).width/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile))if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform),accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)}charWidth=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection,x+=charWidth,restoreNeeded&&ctx.restore()}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore(),this.compose()}showType3Text(glyphs){const ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length;let i,glyph,width,spacingLength;if(!(current.textRenderingMode===_util.TextRenderingMode.INVISIBLE)&&0!==fontSize){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i){if(glyph=glyphs[i],"number"==typeof glyph){spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform(...fontMatrix),this.executeOperatorList(operatorList),this.restore());width=_util.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale}ctx.restore(),this.processingType3=null}}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.ctx.clip(),this.endPath()}getColorN_Pattern(IR){let pattern;if("TilingPattern"===IR[0]){const color=IR[1],baseTransform=this.baseTransform||(0,_display_utils.getCurrentTransform)(this.ctx),canvasGraphicsFactory={createCanvasGraphics:ctx=>new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=this._getPattern(IR[1],IR[2]);return pattern}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,g,b){const color=_util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color}setFillRGBColor(r,g,b){const color=_util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1}_getPattern(objId,matrix=null){let pattern;return this.cachedPatterns.has(objId)?pattern=this.cachedPatterns.get(objId):(pattern=(0,_pattern_helper.getShadingPattern)(this.getObject(objId)),this.cachedPatterns.set(objId,pattern)),matrix&&(pattern.matrix=matrix),pattern}shadingFill(objId){if(!this.contentVisible)return;const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);const inv=(0,_display_utils.getCurrentTransformInverse)(ctx);if(inv){const canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_util.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_util.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&6===matrix.length&&this.transform(...matrix),this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx),bbox)){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(this.ctx),bbox),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(group){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const currentCtx=this.ctx;group.isolated||(0,_util.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util.warn)("Knockout groups not supported.");const currentTransform=(0,_display_utils.getCurrentTransform)(currentCtx);if(group.matrix&&currentCtx.transform(...group.matrix),!group.bbox)throw new Error("Bounding box is required.");let bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>4096&&(scaleX=drawnWidth/4096,drawnWidth=4096),drawnHeight>4096&&(scaleY=drawnHeight/4096,drawnHeight=4096),this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform(...currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY),currentCtx.save()),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++}endGroup(group){if(!this.contentVisible)return;this.groupLevel--;const groupCtx=this.ctx,ctx=this.groupStack.pop();if(this.ctx=ctx,this.ctx.imageSmoothingEnabled=!1,group.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const currentMtx=(0,_display_utils.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...currentMtx);const dirtyBox=_util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0),this.ctx.restore(),this.compose(dirtyBox)}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){if(_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(rect)&&4===rect.length){const width=rect[2]-rect[0],height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){(transform=transform.slice())[4]-=rect[0],transform[5]-=rect[1],(rect=rect.slice())[0]=rect[1]=0,rect[2]=width,rect[3]=height;const[scaleX,scaleY]=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(this.ctx)),{viewportScale}=this,canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale),canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas),this.annotationCanvas.savedCtx=this.ctx,this.ctx=context,this.ctx.save(),this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(rect[0],rect[1],width,height),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...transform),this.transform(...matrix)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_classPrivateMethodGet(this,_drawFilter,_drawFilter2).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(img){if(!this.contentVisible)return;const count=img.count;(img=this.getObject(img.data,img)).count=count;const ctx=this.ctx,glyph=this.processingType3;if(glyph&&(void 0===glyph.compiled&&(glyph.compiled=function compileType3Glyph(imgData){const{width,height}=imgData;if(width>1e3||height>1e3)return null;const POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),width1=width+1;let i,j,j0,points=new Uint8Array(width1*(height+1));const lineSize=width+7&-8;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;for(;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1}let count=0;for(pos=0,0!==data[pos]&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(0!==data[pos]&&(points[j]=2,++count),i=1;i<height;i++){pos=i*lineSize,j0=i*width1,data[pos-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0),POINT_TYPES[sum]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>1e3)return null}for(pos=lineSize*(height-1),j0=i*width1,0!==data[pos]&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(0!==data[pos]&&(points[j0+j]=4,++count),count>1e3)return null;const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),path=new Path2D;for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;for(;p<end&&!points[p];)p++;if(p===end)continue;path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do{p+=step}while(!points[p]);const pp=points[p];5!==pp&&10!==pp?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),path.lineTo(p%width1,p/width1|0),points[p]||--count}while(p0!==p);--i}return data=null,points=null,function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.fill(path),c.beginPath(),c.restore()}}(img)),glyph.compiled))return void glyph.compiled(ctx);const mask=this._createMaskCanvas(img),maskCanvas=mask.canvas;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY),ctx.restore(),this.compose()}paintImageMaskXObjectRepeat(img,scaleX,skewX=0,skewY=0,scaleY,positions){if(!this.contentVisible)return;img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=_util.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]),[x,y]=_util.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y)}ctx.restore(),this.compose()}paintImageMaskXObjectGroup(images){if(!this.contentVisible)return;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,this.getObject(data,image)),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform(...transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}this.compose()}paintImageXObject(objId){if(!this.contentVisible)return;const imgData=this.getObject(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData)return void(0,_util.warn)("Dependent image isn't ready yet");const width=imgData.width,height=imgData.height,map=[];for(let i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}applyTransferMapsToCanvas(ctx){return"none"!==this.current.transferMaps&&(ctx.filter=this.current.transferMaps,ctx.drawImage(ctx.canvas,0,0),ctx.filter="none"),ctx.canvas}applyTransferMapsToBitmap(imgData){if("none"===this.current.transferMaps)return imgData.bitmap;const{bitmap,width,height}=imgData,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height),tmpCtx=tmpCanvas.context;return tmpCtx.filter=this.current.transferMaps,tmpCtx.drawImage(bitmap,0,0),tmpCtx.filter="none",tmpCanvas.canvas}paintInlineImageXObject(imgData){if(!this.contentVisible)return;const width=imgData.width,height=imgData.height,ctx=this.ctx;let imgToPaint;if(this.save(),_is_node.isNodeJS||(ctx.filter="none"),ctx.scale(1/width,-1/height),imgData.bitmap)imgToPaint=this.applyTransferMapsToBitmap(imgData);else if("function"==typeof HTMLElement&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{const tmpCtx=this.cachedCanvases.getCanvas("inlineImage",width,height).context;putBinaryImageData(tmpCtx,imgData),imgToPaint=this.applyTransferMapsToCanvas(tmpCtx)}const scaled=this._scaleImage(imgToPaint,(0,_display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(ctx),imgData.interpolate),drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height),this.compose(),this.restore()}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible)return;const ctx=this.ctx;let imgToPaint;if(imgData.bitmap)imgToPaint=imgData.bitmap;else{const w=imgData.width,h=imgData.height,tmpCtx=this.cachedCanvases.getCanvas("inlineImage",w,h).context;putBinaryImageData(tmpCtx,imgData),imgToPaint=this.applyTransferMapsToCanvas(tmpCtx)}for(const entry of map)ctx.save(),ctx.transform(...entry.transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),ctx.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(tag,properties){"OC"===tag?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(clipBox);const ctx=this.ctx;this.pendingClip&&(isEmpty||(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ctx.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,_display_utils.getCurrentTransform)(this.ctx);if(0===m[1]&&0===m[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[2]),normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth}=this.current,{a,b,c,d}=this.ctx.getTransform();let scaleX,scaleY;if(0===b&&0===c){const normX=Math.abs(a),normY=Math.abs(d);if(normX===normY)if(0===lineWidth)scaleX=scaleY=1/normX;else{const scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1}else if(0===lineWidth)scaleX=1/normX,scaleY=1/normY;else{const scaledXLineWidth=normX*lineWidth,scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1,scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1}}else{const absDet=Math.abs(a*d-b*c),normX=Math.hypot(a,b),normY=Math.hypot(c,d);if(0===lineWidth)scaleX=normY/absDet,scaleY=normX/absDet;else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1,scaleY=normX>baseArea?normX/baseArea:1}}this._cachedScaleForStroking[0]=scaleX,this._cachedScaleForStroking[1]=scaleY}return this._cachedScaleForStroking}rescaleAndStroke(saveRestore){const{ctx}=this,{lineWidth}=this.current,[scaleX,scaleY]=this.getScaleForStroking();if(ctx.lineWidth=lineWidth||1,1===scaleX&&1===scaleY)return void ctx.stroke();const dashes=ctx.getLineDash();if(saveRestore&&ctx.save(),ctx.scale(scaleX,scaleY),dashes.length>0){const scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map((x=>x/scale))),ctx.lineDashOffset/=scale}ctx.stroke(),saveRestore&&ctx.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}}function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function _drawFilter2(){if(this.pageColors){const hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==hcmFilterId){const savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=savedFilter}}}exports.CanvasGraphics=CanvasGraphics;for(const op in _util.OPS)void 0!==CanvasGraphics.prototype[op]&&(CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op])},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TilingPattern=exports.PathType=void 0,exports.getShadingPattern=function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${IR[0]}`)};var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6);const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(ctx,bbox){if(!bbox)return;const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}exports.PathType=PathType;class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&(0,_util.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_util.unreachable)("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(IR){super(),this._type=IR[1],this._bbox=IR[2],this._colorStops=IR[3],this._p0=IR[4],this._p1=IR[5],this._r0=IR[6],this._r1=IR[7],this.matrix=null}_createGradient(ctx){let grad;"axial"===this._type?grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const colorStop of this._colorStops)grad.addColorStop(colorStop[0],colorStop[1]);return grad}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils.getCurrentTransform)(ctx))||[0,0,0,0],width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1,height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1,tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,!0),tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.beginPath(),tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]),inverse=_util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]),tmpCtx.transform(...owner.baseTransform),this.matrix&&tmpCtx.transform(...this.matrix),applyBoundingBox(tmpCtx,this._bbox),tmpCtx.fillStyle=this._createGradient(tmpCtx),tmpCtx.fill(),pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");const domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix)}else applyBoundingBox(ctx,this._bbox),pattern=this._createGradient(ctx);return pattern}}function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors,bytes=data.data,rowSize=4*data.width;let tmp;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);const x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3)return;const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab,xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){let k;k=y<y1?0:(y1-y)/(y1-y2),xa=x1-(x1-x2)*k,car=c1r-(c1r-c2r)*k,cag=c1g-(c1g-c2g)*k,cab=c1b-(c1b-c2b)*k}else{let k;k=y>y3?1:y2===y3?0:(y2-y)/(y2-y3),xa=x2-(x2-x3)*k,car=c2r-(c2r-c3r)*k,cag=c2g-(c2g-c3g)*k,cab=c2b-(c2b-c3b)*k}let k;k=y<y1?0:y>y3?1:(y1-y)/(y1-y3),xb=x1-(x1-x3)*k,cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+4*x1_;for(let x=x1_;x<=x2_;x++)k=(xa-x)/(xa-xb),k<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}function drawFigure(data,figure,context){const ps=figure.coords,cs=figure.colors;let i,ii;switch(figure.type){case"lattice":const verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(IR){super(),this._coords=IR[2],this._colors=IR[3],this._figures=IR[4],this._bounds=IR[5],this._bbox=IR[7],this._background=IR[8],this.matrix=null}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const offsetX=Math.floor(this._bounds[0]),offsetY=Math.floor(this._bounds[1]),boundsWidth=Math.ceil(this._bounds[2])-offsetX,boundsHeight=Math.ceil(this._bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+4,paddedHeight=height+4,tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1),tmpCtx=tmpCanvas.context,data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(const figure of this._figures)drawFigure(data,figure,context);tmpCtx.putImageData(data,2,2);return{canvas:tmpCanvas.canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX,scaleY}}getPattern(ctx,owner,inverse,pathType){let scale;if(applyBoundingBox(ctx,this._bbox),pathType===PathType.SHADING)scale=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(ctx));else if(scale=_util.Util.singularValueDecompose2dScale(owner.baseTransform),this.matrix){const matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);return pathType!==PathType.SHADING&&(ctx.setTransform(...owner.baseTransform),this.matrix&&ctx.transform(...this.matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}const PaintType_COLORED=1,PaintType_UNCOLORED=2;class TilingPattern{constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.ctx=ctx,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform}createPatternCanvas(owner){const operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)("TilingType: "+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0,adjustedY0=y0,adjustedX1=x1,adjustedY1=y1;return x0<0&&(adjustedX0=0,adjustedX1+=Math.abs(x0)),y0<0&&(adjustedY0=0,adjustedY1+=Math.abs(y0)),tmpCtx.translate(-dimx.scale*adjustedX0,-dimy.scale*adjustedY0),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),tmpCtx.save(),this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1),graphics.baseTransform=(0,_display_utils.getCurrentTransform)(graphics.ctx),graphics.executeOperatorList(operatorList),graphics.endDrawing(),{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0}}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale,size}}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]),graphics.clip(),graphics.endPath()}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType_COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType_UNCOLORED:const cssColor=_util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util.FormatError(`Unsupported paint type: ${paintType}`)}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;pathType!==PathType.SHADING&&(matrix=_util.Util.transform(matrix,owner.baseTransform),this.matrix&&(matrix=_util.Util.transform(matrix,this.matrix)));const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");return pattern.setTransform(domMatrix),pattern}}_defineProperty(TilingPattern,"MAX_PATTERN_SIZE",3e3),exports.TilingPattern=TilingPattern},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertBlackAndWhiteToRGBA=convertBlackAndWhiteToRGBA,exports.convertToRGBA=function convertToRGBA(params){switch(params.kind){case _util.ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case _util.ImageKind.RGB_24BPP:return function convertRGBToRGBA({src,srcPos=0,dest,destPos=0,width,height}){let i=0;const len32=src.length>>2,src32=new Uint32Array(src.buffer,srcPos,len32);if(_util.FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i],s2=src32[i+1],s3=src32[i+2];dest[destPos]=4278190080|s1,dest[destPos+1]=s1>>>24|s2<<8|4278190080,dest[destPos+2]=s2>>>16|s3<<16|4278190080,dest[destPos+3]=s3>>>8|4278190080}for(let j=4*i,jj=src.length;j<jj;j+=3)dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|4278190080}else{for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i],s2=src32[i+1],s3=src32[i+2];dest[destPos]=255|s1,dest[destPos+1]=s1<<24|s2>>>8|255,dest[destPos+2]=s2<<16|s3>>>16|255,dest[destPos+3]=s3<<8|255}for(let j=4*i,jj=src.length;j<jj;j+=3)dest[destPos++]=src[j]<<24|src[j+1]<<16|src[j+2]<<8|255}return{srcPos,destPos}}(params)}return null},exports.grayToRGBA=function grayToRGBA(src,dest){if(_util.FeatureTest.isLittleEndian)for(let i=0,ii=src.length;i<ii;i++)dest[i]=65793*src[i]|4278190080;else for(let i=0,ii=src.length;i<ii;i++)dest[i]=16843008*src[i]|255};var _util=__w_pdfjs_require__(1);function convertBlackAndWhiteToRGBA({src,srcPos=0,dest,width,height,nonBlackColor=4294967295,inverseDecode=!1}){const black=_util.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],widthInSource=width>>3,widthRemainder=7&width,srcLength=src.length;dest=new Uint32Array(dest.buffer);let destPos=0;for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=128&elem?oneMapping:zeroMapping,dest[destPos++]=64&elem?oneMapping:zeroMapping,dest[destPos++]=32&elem?oneMapping:zeroMapping,dest[destPos++]=16&elem?oneMapping:zeroMapping,dest[destPos++]=8&elem?oneMapping:zeroMapping,dest[destPos++]=4&elem?oneMapping:zeroMapping,dest[destPos++]=2&elem?oneMapping:zeroMapping,dest[destPos++]=1&elem?oneMapping:zeroMapping}if(0===widthRemainder)continue;const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++)dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping}return{srcPos,destPos}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=null,GlobalWorkerOptions.workerSrc=""},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(1);const CallbackKind_DATA=1,CallbackKind_ERROR=2,StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||"object"==typeof reason&&null!==reason||(0,_util.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),reason.name){case"AbortException":return new _util.AbortException(reason.message);case"MissingPDFException":return new _util.MissingPDFException(reason.message);case"PasswordException":return new _util.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString())}}var _createStreamSink=new WeakSet,_processStreamMessage=new WeakSet,_deleteStreamController=new WeakSet;function _createStreamSink2(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=new _util.PromiseCapability,this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self.streamSinks[streamId])},error(reason){(0,_util.assert)(reason instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:new _util.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise((function(resolve){resolve(action(data.data,streamSink))})).then((function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})}))}function _processStreamMessage2(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise((function(resolve){resolve(streamSink.onPull?.())})).then((function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})}));break;case StreamKind.ENQUEUE:if((0,_util.assert)(streamController,"enqueue should have stream controller"),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util.assert)(streamController,"close should have stream controller"),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.ERROR:(0,_util.assert)(streamController,"error should have stream controller"),streamController.controller.error(wrapReason(data.reason)),_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise((function(resolve){resolve(streamSink.onCancel?.(wrapReason(data.reason)))})).then((function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})})),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}function _deleteStreamController2(_x4,_x5){return _deleteStreamController3.apply(this,arguments)}function _deleteStreamController3(){return(_deleteStreamController3=_asyncToGenerator((function*(streamController,streamId){yield Promise.allSettled([streamController.startCall?.promise,streamController.pullCall?.promise,streamController.cancelCall?.promise]),delete this.streamControllers[streamId]}))).apply(this,arguments)}exports.MessageHandler=class MessageHandler{constructor(_sourceName,_targetName,_comObj){_classPrivateMethodInitSpec(this,_deleteStreamController),_classPrivateMethodInitSpec(this,_processStreamMessage),_classPrivateMethodInitSpec(this,_createStreamSink),this.sourceName=_sourceName,this.targetName=_targetName,this.comObj=_comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream)return void _classPrivateMethodGet(this,_processStreamMessage,_processStreamMessage2).call(this,data);if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind_DATA)capability.resolve(data.data);else{if(data.callback!==CallbackKind_ERROR)throw new Error("Unexpected callback case");capability.reject(wrapReason(data.reason))}return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise((function(resolve){resolve(action(data.data))})).then((function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_DATA,callbackId:data.callbackId,data:result})}),(function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind_ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})}))}else data.streamId?_classPrivateMethodGet(this,_createStreamSink,_createStreamSink2).call(this,data):action(data.data)},_comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=new _util.PromiseCapability;this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=new _util.PromiseCapability;return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=new _util.PromiseCapability;return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=new _util.PromiseCapability;return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Metadata=void 0;var _util=__w_pdfjs_require__(1),_metadataMap=new WeakMap,_data=new WeakMap;exports.Metadata=class Metadata{constructor({parsedData,rawData}){_classPrivateFieldInitSpec(this,_metadataMap,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_data,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_metadataMap,parsedData),_classPrivateFieldSet(this,_data,rawData)}getRaw(){return _classPrivateFieldGet(this,_data)}get(name){return _classPrivateFieldGet(this,_metadataMap).get(name)??null}getAll(){return(0,_util.objectFromMap)(_classPrivateFieldGet(this,_metadataMap))}has(name){return _classPrivateFieldGet(this,_metadataMap).has(name)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptionalContentConfig=void 0;var _util=__w_pdfjs_require__(1),_murmurhash=__w_pdfjs_require__(8);const INTERNAL=Symbol("INTERNAL");var _visible=new WeakMap;class OptionalContentGroup{constructor(name,intent){_classPrivateFieldInitSpec(this,_visible,{writable:!0,value:!0}),this.name=name,this.intent=intent}get visible(){return _classPrivateFieldGet(this,_visible)}_setVisible(internal,visible){internal!==INTERNAL&&(0,_util.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,_visible,visible)}}var _cachedGetHash=new WeakMap,_groups=new WeakMap,_initialHash=new WeakMap,_order=new WeakMap,_evaluateVisibilityExpression=new WeakSet;function _evaluateVisibilityExpression2(array){const length=array.length;if(length<2)return!0;const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element))state=_classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,element);else{if(!_classPrivateFieldGet(this,_groups).has(element))return(0,_util.warn)(`Optional content group not found: ${element}`),!0;state=_classPrivateFieldGet(this,_groups).get(element).visible}switch(operator){case"And":if(!state)return!1;break;case"Or":if(state)return!0;break;case"Not":return!state;default:return!0}}return"And"===operator}exports.OptionalContentConfig=class OptionalContentConfig{constructor(data){if(_classPrivateMethodInitSpec(this,_evaluateVisibilityExpression),_classPrivateFieldInitSpec(this,_cachedGetHash,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_groups,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_initialHash,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_order,{writable:!0,value:null}),this.name=null,this.creator=null,null!==data){this.name=data.name,this.creator=data.creator,_classPrivateFieldSet(this,_order,data.order);for(const group of data.groups)_classPrivateFieldGet(this,_groups).set(group.id,new OptionalContentGroup(group.name,group.intent));if("OFF"===data.baseState)for(const group of _classPrivateFieldGet(this,_groups).values())group._setVisible(INTERNAL,!1);for(const on of data.on)_classPrivateFieldGet(this,_groups).get(on)._setVisible(INTERNAL,!0);for(const off of data.off)_classPrivateFieldGet(this,_groups).get(off)._setVisible(INTERNAL,!1);_classPrivateFieldSet(this,_initialHash,this.getHash())}}isVisible(group){if(0===_classPrivateFieldGet(this,_groups).size)return!0;if(!group)return(0,_util.warn)("Optional content group not defined."),!0;if("OCG"===group.type)return _classPrivateFieldGet(this,_groups).has(group.id)?_classPrivateFieldGet(this,_groups).get(group.id).visible:((0,_util.warn)(`Optional content group not found: ${group.id}`),!0);if("OCMD"===group.type){if(group.expression)return _classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,group.expression);if(!group.policy||"AnyOn"===group.policy){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id))return(0,_util.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet(this,_groups).get(id).visible)return!0}return!1}if("AllOn"===group.policy){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id))return(0,_util.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet(this,_groups).get(id).visible)return!1}return!0}if("AnyOff"===group.policy){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id))return(0,_util.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet(this,_groups).get(id).visible)return!0}return!1}if("AllOff"===group.policy){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id))return(0,_util.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet(this,_groups).get(id).visible)return!1}return!0}return(0,_util.warn)(`Unknown optional content policy ${group.policy}.`),!0}return(0,_util.warn)(`Unknown group type ${group.type}.`),!0}setVisibility(id,visible=!0){_classPrivateFieldGet(this,_groups).has(id)?(_classPrivateFieldGet(this,_groups).get(id)._setVisible(INTERNAL,!!visible),_classPrivateFieldSet(this,_cachedGetHash,null)):(0,_util.warn)(`Optional content group not found: ${id}`)}get hasInitialVisibility(){return this.getHash()===_classPrivateFieldGet(this,_initialHash)}getOrder(){return _classPrivateFieldGet(this,_groups).size?_classPrivateFieldGet(this,_order)?_classPrivateFieldGet(this,_order).slice():[..._classPrivateFieldGet(this,_groups).keys()]:null}getGroups(){return _classPrivateFieldGet(this,_groups).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_groups)):null}getGroup(id){return _classPrivateFieldGet(this,_groups).get(id)||null}getHash(){if(null!==_classPrivateFieldGet(this,_cachedGetHash))return _classPrivateFieldGet(this,_cachedGetHash);const hash=new _murmurhash.MurmurHash3_64;for(const[id,group]of _classPrivateFieldGet(this,_groups))hash.update(`${id}:${group.visible}`);return _classPrivateFieldSet(this,_cachedGetHash,hash.hexdigest())}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6);exports.PDFDataTransportStream=class PDFDataTransportStream{constructor({length,initialData,progressiveDone=!1,contentDispositionFilename=null,disableRange=!1,disableStream=!1},pdfDataRangeTransport){if((0,_util.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=progressiveDone,this._contentDispositionFilename=contentDispositionFilename,initialData?.length>0){const buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!disableStream,this._isRangeSupported=!disableRange,this._contentLength=length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((begin,chunk)=>{this._onReceiveData({begin,chunk})})),this._pdfDataRangeTransport.addProgressListener(((loaded,total)=>{this._onProgress({loaded,total})})),this._pdfDataRangeTransport.addProgressiveReadListener((chunk=>{this._onReceiveData({chunk})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin,chunk}){const buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(void 0===begin)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{const found=this._rangeReaders.some((function(rangeReader){return rangeReader._begin===begin&&(rangeReader._enqueue(buffer),!0)}));(0,_util.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(evt){void 0===evt.total?this._rangeReaders[0]?.onProgress?.({loaded:evt.loaded}):this._fullRequestReader?.onProgress?.({loaded:evt.loaded,total:evt.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,_util.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeReaders.slice(0))reader.cancel(reason);this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(stream,queuedChunks,progressiveDone=!1,contentDispositionFilename=null){this._stream=stream,this._done=progressiveDone||!1,this._filename=(0,_display_utils.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(const chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:chunk,done:!1})}else this._queuedChunks.push(chunk);this._loaded+=chunk.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var _this10=this;return _asyncToGenerator((function*(){if(_this10._queuedChunks.length>0){return{value:_this10._queuedChunks.shift(),done:!1}}if(_this10._done)return{value:void 0,done:!0};const requestCapability=new _util.PromiseCapability;return _this10._requests.push(requestCapability),requestCapability.promise}))()}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end){this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(0===this._requests.length)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1});for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var _this11=this;return _asyncToGenerator((function*(){if(_this11._queuedChunk){const chunk=_this11._queuedChunk;return _this11._queuedChunk=null,{value:chunk,done:!1}}if(_this11._done)return{value:void 0,done:!0};const requestCapability=new _util.PromiseCapability;return _this11._requests.push(requestCapability),requestCapability.promise}))()}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.XfaText=void 0;class XfaText{static textContent(xfa){const items=[],output={items,styles:Object.create(null)};return function walk(node){if(!node)return;let str=null;const name=node.name;if("#text"===name)str=node.value;else{if(!XfaText.shouldBuildText(name))return;node?.attributes?.textContent?str=node.attributes.textContent:node.value&&(str=node.value)}if(null!==str&&items.push({str}),node.children)for(const child of node.children)walk(child)}(xfa),output}static shouldBuildText(name){return!("textarea"===name||"input"===name||"option"===name||"select"===name)}}exports.XfaText=XfaText},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeStandardFontDataFactory=exports.NodeFilterFactory=exports.NodeCanvasFactory=exports.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__(7);const fetchData=function(url){return new Promise(((resolve,reject)=>{__webpack_require__("?fe90").readFile(url,((error,data)=>{!error&&data?resolve(new Uint8Array(data)):reject(new Error(error))}))}))};class NodeFilterFactory extends _base_factory.BaseFilterFactory{}exports.NodeFilterFactory=NodeFilterFactory;class NodeCanvasFactory extends _base_factory.BaseCanvasFactory{_createCanvas(width,height){return __webpack_require__("?4a14").createCanvas(width,height)}}exports.NodeCanvasFactory=NodeCanvasFactory;class NodeCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url).then((data=>({cMapData:data,compressionType})))}}exports.NodeCMapReaderFactory=NodeCMapReaderFactory;class NodeStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url)}}exports.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNodeStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(22);const fs=__webpack_require__("?fe90"),http=__webpack_require__("?d446"),https=__webpack_require__("?4c38"),url=__webpack_require__("?9f5f"),fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;exports.PDFNodeStream=class PDFNodeStream{constructor(source){this.source=source,this.url=function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);return"file:"===parsedUrl.protocol||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)}(source.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start,end){if(end<=this._progressiveDataLength)return null;const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};class BaseFullReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;const source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=new _util.PromiseCapability,this._headersCapability=new _util.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var _this12=this;return _asyncToGenerator((function*(){if(yield _this12._readCapability.promise,_this12._done)return{value:void 0,done:!0};if(_this12._storedError)throw _this12._storedError;const chunk=_this12._readableStream.read();if(null===chunk)return _this12._readCapability=new _util.PromiseCapability,_this12.read();_this12._loaded+=chunk.length,_this12.onProgress?.({loaded:_this12._loaded,total:_this12._contentLength});return{value:new Uint8Array(chunk).buffer,done:!1}}))()}cancel(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",(()=>{this._readCapability.resolve()})),readableStream.on("end",(()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()})),readableStream.on("error",(reason=>{this._error(reason)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new _util.PromiseCapability;const source=stream.source;this._isStreamingSupported=!source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var _this13=this;return _asyncToGenerator((function*(){if(yield _this13._readCapability.promise,_this13._done)return{value:void 0,done:!0};if(_this13._storedError)throw _this13._storedError;const chunk=_this13._readableStream.read();if(null===chunk)return _this13._readCapability=new _util.PromiseCapability,_this13.read();_this13._loaded+=chunk.length,_this13.onProgress?.({loaded:_this13._loaded});return{value:new Uint8Array(chunk).buffer,done:!1}}))()}cancel(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",(()=>{this._readCapability.resolve()})),readableStream.on("end",(()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()})),readableStream.on("error",(reason=>{this._error(reason)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream);const handleResponse=response=>{if(404===response.statusCode){const error=new _util.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=error,void this._headersCapability.reject(error)}this._headersCapability.resolve(),this._setReadableStream(response);const getResponseHeader=name=>this._readableStream.headers[name.toLowerCase()],{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)};this._request=null,"http:"===this._url.protocol?this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse),this._request.on("error",(reason=>{this._storedError=reason,this._headersCapability.reject(reason)})),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream),this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];void 0!==value&&(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=response=>{if(404!==response.statusCode)this._setReadableStream(response);else{const error=new _util.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error}};this._request=null,"http:"===this._url.protocol?this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",(reason=>{this._storedError=reason})),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,((error,stat)=>{if(error)return"ENOENT"===error.code&&(error=new _util.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error,void this._headersCapability.reject(error);this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()}))}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),this._setReadableStream(fs.createReadStream(path,{start,end:end-1}))}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createResponseStatusError=function createResponseStatusError(status,url){if(404===status||0===status&&url.startsWith("file:"))return new _util.MissingPDFException('Missing PDF "'+url+'".');return new _util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`,status)},exports.extractFilenameFromHeader=function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch(ex){}if((0,_display_utils.isPdfFile)(filename))return filename}return null},exports.validateRangeRequestCapabilities=function validateRangeRequestCapabilities({getResponseHeader,isHttp,rangeChunkSize,disableRange}){const returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);if(!Number.isInteger(length))return returnValues;if(returnValues.suggestedLength=length,length<=2*rangeChunkSize)return returnValues;if(disableRange||!isHttp)return returnValues;if("bytes"!==getResponseHeader("Accept-Ranges"))return returnValues;if("identity"!==(getResponseHeader("Content-Encoding")||"identity"))return returnValues;return returnValues.allowRangeRequests=!0,returnValues},exports.validateResponseStatus=function validateResponseStatus(status){return 200===status||206===status};var _util=__w_pdfjs_require__(1),_content_disposition=__w_pdfjs_require__(23),_display_utils=__w_pdfjs_require__(6)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(match=iter.exec(contentDispositionStr));){let[,n,quot,part]=match;if(n=parseInt(n,10),n in matches){if(0===n)break}else matches[n]=[quot,part]}const parts=[];for(let n=0;n<matches.length&&n in matches;++n){let[quot,part]=matches[n];part=rfc2616unquote(part),quot&&(part=unescape(part),0===n&&(part=rfc5987decode(part))),parts.push(part)}return parts.join("")}(contentDisposition),tmp){return fixupEncoding(rfc2047decode(tmp))}if(tmp=toParamRegExp("filename","i").exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=(0,_util.stringToBytes)(value);value=decoder.decode(buffer),needsEncodingFixup=!1}catch(e){}}return value}function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}function rfc2616unquote(value){if(value.startsWith('"')){const parts=value.slice(1).split('\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('"');-1!==quotindex&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replaceAll(/\\(.)/g,"$1")}value=parts.join('"')}return value}function rfc5987decode(extvalue){const encodingend=extvalue.indexOf("'");if(-1===encodingend)return extvalue;return textdecode(extvalue.slice(0,encodingend),extvalue.slice(encodingend+1).replace(/^[^']*'/,""))}function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(matches,charset,encoding,text){if("q"===encoding||"Q"===encoding)return textdecode(charset,text=(text=text.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(match,hex){return String.fromCharCode(parseInt(hex,16))})));try{text=atob(text)}catch(e){}return textdecode(charset,text)}))}return""};var _util=__w_pdfjs_require__(1)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(22);class NetworkManager{constructor(url,args={}){this.url=url,this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null),this.withCredentials=args.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){const xhr=new XMLHttpRequest,xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];void 0!==value&&xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range",`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=206):pendingRequest.expectedStatus=200,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];pendingRequest&&pendingRequest.onProgress?.(evt)}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),4!==xhr.readyState)return;if(!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],0===xhr.status&&this.isHttp)return void pendingRequest.onError?.(xhr.status);const xhrStatus=xhr.status||200;if(!(200===xhrStatus&&206===pendingRequest.expectedStatus)&&xhrStatus!==pendingRequest.expectedStatus)return void pendingRequest.onError?.(xhr.status);const chunk=function getArrayBuffer(xhr){const data=xhr.response;return"string"!=typeof data?data:(0,_util.stringToBytes)(data).buffer}(xhr);if(206===xhrStatus){const rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk})}else chunk?pendingRequest.onDone({begin:0,chunk}):pendingRequest.onError?.(xhr.status)}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}}exports.PDFNetworkStream=class PDFNetworkStream{constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=new _util.PromiseCapability,this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=name=>fullRequestXhr.getResponseHeader(name),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(data){if(data)if(this._requests.length>0){this._requests.shift().resolve({value:data.chunk,done:!1})}else this._cachedChunks.push(data.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url),this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(evt){this.onProgress?.({loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var _this14=this;return _asyncToGenerator((function*(){if(_this14._storedError)throw _this14._storedError;if(_this14._cachedChunks.length>0){return{value:_this14._cachedChunks.shift(),done:!1}}if(_this14._done)return{value:void 0,done:!0};const requestCapability=new _util.PromiseCapability;return _this14._requests.push(requestCapability),requestCapability.promise}))()}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url,this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(data){const chunk=data.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:chunk,done:!1})}else this._queuedChunk=chunk;this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(evt){this.isStreamingSupported||this.onProgress?.({loaded:evt.loaded})}get isStreamingSupported(){return!1}read(){var _this15=this;return _asyncToGenerator((function*(){if(_this15._storedError)throw _this15._storedError;if(null!==_this15._queuedChunk){const chunk=_this15._queuedChunk;return _this15._queuedChunk=null,{value:chunk,done:!1}}if(_this15._done)return{value:void 0,done:!0};const requestCapability=new _util.PromiseCapability;return _this15._requests.push(requestCapability),requestCapability.promise}))()}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFetchStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(22);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}function createHeaders(httpHeaders){const headers=new Headers;for(const property in httpHeaders){const value=httpHeaders[property];void 0!==value&&headers.append(property,value)}return headers}function getArrayBuffer(val){return val instanceof Uint8Array?val.buffer:val instanceof ArrayBuffer?val:((0,_util.warn)(`getArrayBuffer - unexpected data format: ${val}`),new Uint8Array(val).buffer)}exports.PDFFetchStream=class PDFFetchStream{constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};class PDFFetchStreamReader{constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=new _util.PromiseCapability,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();const getResponseHeader=name=>response.headers.get(name),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var _this16=this;return _asyncToGenerator((function*(){yield _this16._headersCapability.promise;const{value,done}=yield _this16._reader.read();return done?{value,done}:(_this16._loaded+=value.byteLength,_this16.onProgress?.({loaded:_this16._loaded,total:_this16._contentLength}),{value:getArrayBuffer(value),done:!1})}))()}cancel(reason){this._reader?.cancel(reason),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(stream,begin,end){this._stream=stream,this._reader=null,this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=new _util.PromiseCapability,this._isStreamingSupported=!source.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var _this17=this;return _asyncToGenerator((function*(){yield _this17._readCapability.promise;const{value,done}=yield _this17._reader.read();return done?{value,done}:(_this17._loaded+=value.byteLength,_this17.onProgress?.({loaded:_this17._loaded}),{value:getArrayBuffer(value),done:!1})}))()}cancel(reason){this._reader?.cancel(reason),this._abortController.abort()}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLayerRenderTask=void 0,exports.renderTextLayer=function renderTextLayer(params){params.textContentSource||!params.textContent&&!params.textContentStream||((0,_display_utils.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),params.textContentSource=params.textContent||params.textContentStream);const{container,viewport}=params,style=getComputedStyle(container),visibility=style.getPropertyValue("visibility"),scaleFactor=parseFloat(style.getPropertyValue("--scale-factor"));"visible"===visibility&&(!scaleFactor||Math.abs(scaleFactor-viewport.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const task=new TextLayerRenderTask(params);return task._render(),task},exports.updateTextLayer=function updateTextLayer({container,viewport,textDivs,textDivProperties,isOffscreenCanvasSupported,mustRotate=!0,mustRescale=!0}){mustRotate&&(0,_display_utils.setLayerDimensions)(container,{rotation:viewport.rotation});if(mustRescale){const ctx=getCtx(0,isOffscreenCanvasSupported),params={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx};for(const div of textDivs)params.properties=textDivProperties.get(div),params.div=div,layout(params)}};var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6);const DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8,ascentCache=new Map;function getCtx(size,isOffscreenCanvasSupported){let ctx;if(isOffscreenCanvasSupported&&_util.FeatureTest.isOffscreenCanvasSupported)ctx=new OffscreenCanvas(size,size).getContext("2d",{alpha:!1});else{const canvas=document.createElement("canvas");canvas.width=canvas.height=size,ctx=canvas.getContext("2d",{alpha:!1})}return ctx}function appendText(task,geom,styles){const textDiv=document.createElement("span"),textDivProperties={angle:0,canvasWidth:0,hasText:""!==geom.str,hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_util.Util.transform(task._transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);const fontHeight=Math.hypot(tx[2],tx[3]),fontAscent=fontHeight*function getAscent(fontFamily,isOffscreenCanvasSupported){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent)return cachedAscent;const ctx=getCtx(DEFAULT_FONT_SIZE,isOffscreenCanvasSupported);ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText("");let ascent=metrics.fontBoundingBoxAscent,descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ctx.canvas.width=ctx.canvas.height=0,ratio}ctx.strokeStyle="red",ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("g",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4)if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("A",0,DEFAULT_FONT_SIZE),pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4)if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break}if(ctx.canvas.width=ctx.canvas.height=0,ascent){const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}return ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT}(style.fontFamily,task._isOffscreenCanvasSupported);let left,top;0===angle?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle));const divStyle=textDiv.style;task._container===task._rootContainer?(divStyle.left=`${(100*left/task._pageWidth).toFixed(2)}%`,divStyle.top=`${(100*top/task._pageHeight).toFixed(2)}%`):(divStyle.left=`calc(var(--scale-factor)*${left.toFixed(2)}px)`,divStyle.top=`calc(var(--scale-factor)*${top.toFixed(2)}px)`),divStyle.fontSize=`calc(var(--scale-factor)*${fontHeight.toFixed(2)}px)`,divStyle.fontFamily=style.fontFamily,textDivProperties.fontSize=fontHeight,textDiv.setAttribute("role","presentation"),textDiv.textContent=geom.str,textDiv.dir=geom.dir,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),0!==angle&&(textDivProperties.angle=angle*(180/Math.PI));let shouldScaleText=!1;if(geom.str.length>1)shouldScaleText=!0;else if(" "!==geom.str&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}shouldScaleText&&(textDivProperties.canvasWidth=style.vertical?geom.height:geom.width),task._textDivProperties.set(textDiv,textDivProperties),task._isReadableStream&&task._layoutText(textDiv)}function layout(params){const{div,scale,properties,ctx,prevFontSize,prevFontFamily}=params,{style}=div;let transform="";if(0!==properties.canvasWidth&&properties.hasText){const{fontFamily}=style,{canvasWidth,fontSize}=properties;prevFontSize===fontSize&&prevFontFamily===fontFamily||(ctx.font=`${fontSize*scale}px ${fontFamily}`,params.prevFontSize=fontSize,params.prevFontFamily=fontFamily);const{width}=ctx.measureText(div.textContent);width>0&&(transform=`scaleX(${canvasWidth*scale/width})`)}0!==properties.angle&&(transform=`rotate(${properties.angle}deg) ${transform}`),transform.length>0&&(style.transform=transform)}class TextLayerRenderTask{constructor({textContentSource,container,viewport,textDivs,textDivProperties,textContentItemsStr,isOffscreenCanvasSupported}){this._textContentSource=textContentSource,this._isReadableStream=textContentSource instanceof ReadableStream,this._container=this._rootContainer=container,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._isOffscreenCanvasSupported=isOffscreenCanvasSupported,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=textDivProperties||new WeakMap,this._canceled=!1,this._capability=new _util.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,isOffscreenCanvasSupported)};const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight],this._pageWidth=pageWidth,this._pageHeight=pageHeight,(0,_display_utils.setLayerDimensions)(container,viewport),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new _util.AbortException("TextLayer task cancelled."))}_processItems(items,styleCache){for(const item of items)if(void 0!==item.str)this._textContentItemsStr.push(item.str),appendText(this,item,styleCache);else if("beginMarkedContentProps"===item.type||"beginMarkedContent"===item.type){const parent=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==item.id&&this._container.setAttribute("id",`${item.id}`),parent.append(this._container)}else"endMarkedContent"===item.type&&(this._container=this._container.parentNode)}_layoutText(textDiv){const textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);if(this._layoutTextParams.div=textDiv,layout(this._layoutTextParams),textDivProperties.hasText&&this._container.append(textDiv),textDivProperties.hasEOL){const br=document.createElement("br");br.setAttribute("role","presentation"),this._container.append(br)}}_render(){const capability=new _util.PromiseCapability;let styleCache=Object.create(null);if(this._isReadableStream){const pump=()=>{this._reader.read().then((({value,done})=>{done?capability.resolve():(Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump())}),capability.reject)};this._reader=this._textContentSource.getReader(),pump()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items,styles}=this._textContentSource;this._processItems(items,styles),capability.resolve()}}capability.promise.then((()=>{styleCache=null,function render(task){if(task._canceled)return;const textDivs=task._textDivs,capability=task._capability;if(textDivs.length>1e5)capability.resolve();else{if(!task._isReadableStream)for(const textDiv of textDivs)task._layoutText(textDiv);capability.resolve()}}(this)}),this._capability.reject)}}exports.TextLayerRenderTask=TextLayerRenderTask},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationEditorLayer=void 0;var _util=__w_pdfjs_require__(1),_tools=__w_pdfjs_require__(5),_freetext=__w_pdfjs_require__(28),_ink=__w_pdfjs_require__(29),_display_utils=__w_pdfjs_require__(6),_accessibilityManager=new WeakMap,_allowClick=new WeakMap,_boundPointerup=new WeakMap,_boundPointerdown=new WeakMap,_editors=new WeakMap,_hadPointerDown=new WeakMap,_isCleaningUp=new WeakMap,_uiManager=new WeakMap,_changeParent=new WeakSet,_createNewEditor=new WeakSet,_createAndAddNewEditor=new WeakSet,_cleanup=new WeakSet;class AnnotationEditorLayer{constructor(options){_classPrivateMethodInitSpec(this,_cleanup),_classPrivateMethodInitSpec(this,_createAndAddNewEditor),_classPrivateMethodInitSpec(this,_createNewEditor),_classPrivateMethodInitSpec(this,_changeParent),_classPrivateFieldInitSpec(this,_accessibilityManager,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_allowClick,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_boundPointerup,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec(this,_boundPointerdown,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec(this,_editors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_hadPointerDown,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_isCleaningUp,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_uiManager,{writable:!0,value:void 0}),AnnotationEditorLayer._initialized||(AnnotationEditorLayer._initialized=!0,_freetext.FreeTextEditor.initialize(options.l10n),_ink.InkEditor.initialize(options.l10n)),options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor]),_classPrivateFieldSet(this,_uiManager,options.uiManager),this.pageIndex=options.pageIndex,this.div=options.div,_classPrivateFieldSet(this,_accessibilityManager,options.accessibilityManager),_classPrivateFieldGet(this,_uiManager).addLayer(this)}get isEmpty(){return 0===_classPrivateFieldGet(this,_editors).size}updateToolbar(mode){_classPrivateFieldGet(this,_uiManager).updateToolbar(mode)}updateMode(mode=_classPrivateFieldGet(this,_uiManager).getMode()){_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this),mode===_util.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet(this,_uiManager).unselectAll(),mode!==_util.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",mode===_util.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",mode===_util.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(isCommitting){if(!isCommitting&&_classPrivateFieldGet(this,_uiManager).getMode()!==_util.AnnotationEditorType.INK)return;if(!isCommitting)for(const editor of _classPrivateFieldGet(this,_editors).values())if(editor.isEmpty())return void editor.setInBackground();_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(isEditing){_classPrivateFieldGet(this,_uiManager).setEditingState(isEditing)}addCommands(params){_classPrivateFieldGet(this,_uiManager).addCommands(params)}enable(){this.div.style.pointerEvents="auto";for(const editor of _classPrivateFieldGet(this,_editors).values())editor.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const editor of _classPrivateFieldGet(this,_editors).values())editor.disableEditing();_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(editor){_classPrivateFieldGet(this,_uiManager).getActive()!==editor&&_classPrivateFieldGet(this,_uiManager).setActiveEditor(editor)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,_boundPointerdown)),this.div.addEventListener("pointerup",_classPrivateFieldGet(this,_boundPointerup))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,_boundPointerdown)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,_boundPointerup))}attach(editor){_classPrivateFieldGet(this,_editors).set(editor.id,editor)}detach(editor){_classPrivateFieldGet(this,_editors).delete(editor.id),_classPrivateFieldGet(this,_accessibilityManager)?.removePointerInTextLayer(editor.contentDiv)}remove(editor){_classPrivateFieldGet(this,_uiManager).removeEditor(editor),this.detach(editor),editor.div.style.display="none",setTimeout((()=>{editor.div.style.display="",editor.div.remove(),editor.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet(this,_uiManager).focusMainContainer()}),0),_classPrivateFieldGet(this,_isCleaningUp)||this.addInkEditorIfNeeded(!1)}add(editor){if(_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor),_classPrivateFieldGet(this,_uiManager).addEditor(editor),this.attach(editor),!editor.isAttachedToDOM){const div=editor.render();this.div.append(div),editor.isAttachedToDOM=!0}this.moveEditorInDOM(editor),editor.onceAdded(),_classPrivateFieldGet(this,_uiManager).addToAnnotationStorage(editor)}moveEditorInDOM(editor){_classPrivateFieldGet(this,_accessibilityManager)?.moveElementInDOM(this.div,editor.div,editor.contentDiv,!0)}addOrRebuild(editor){editor.needsToBeRebuilt()?editor.rebuild():this.add(editor)}addANewEditor(editor){this.addCommands({cmd:()=>{this.addOrRebuild(editor)},undo:()=>{editor.remove()},mustExec:!0})}addUndoableEditor(editor){this.addCommands({cmd:()=>{this.addOrRebuild(editor)},undo:()=>{editor.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,_uiManager).getId()}deserialize(data){switch(data.annotationType){case _util.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager));case _util.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager))}return null}setSelected(editor){_classPrivateFieldGet(this,_uiManager).setSelected(editor)}toggleSelected(editor){_classPrivateFieldGet(this,_uiManager).toggleSelected(editor)}isSelected(editor){return _classPrivateFieldGet(this,_uiManager).isSelected(editor)}unselect(editor){_classPrivateFieldGet(this,_uiManager).unselect(editor)}pointerup(event){const{isMac}=_util.FeatureTest.platform;0!==event.button||event.ctrlKey&&isMac||event.target===this.div&&_classPrivateFieldGet(this,_hadPointerDown)&&(_classPrivateFieldSet(this,_hadPointerDown,!1),_classPrivateFieldGet(this,_allowClick)?_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,event):_classPrivateFieldSet(this,_allowClick,!0))}pointerdown(event){const{isMac}=_util.FeatureTest.platform;if(0!==event.button||event.ctrlKey&&isMac)return;if(event.target!==this.div)return;_classPrivateFieldSet(this,_hadPointerDown,!0);const editor=_classPrivateFieldGet(this,_uiManager).getActive();_classPrivateFieldSet(this,_allowClick,!editor||editor.isEmpty())}drop(event){const id=event.dataTransfer.getData("text/plain"),editor=_classPrivateFieldGet(this,_uiManager).getEditor(id);if(!editor)return;event.preventDefault(),event.dataTransfer.dropEffect="move",_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor);const rect=this.div.getBoundingClientRect(),endX=event.clientX-rect.x,endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY),this.moveEditorInDOM(editor),editor.div.focus()}dragover(event){event.preventDefault()}destroy(){_classPrivateFieldGet(this,_uiManager).getActive()?.parent===this&&_classPrivateFieldGet(this,_uiManager).setActiveEditor(null);for(const editor of _classPrivateFieldGet(this,_editors).values())_classPrivateFieldGet(this,_accessibilityManager)?.removePointerInTextLayer(editor.contentDiv),editor.setParent(null),editor.isAttachedToDOM=!1,editor.div.remove();this.div=null,_classPrivateFieldGet(this,_editors).clear(),_classPrivateFieldGet(this,_uiManager).removeLayer(this)}render({viewport}){this.viewport=viewport,(0,_display_utils.setLayerDimensions)(this.div,viewport),(0,_tools.bindEvents)(this,this.div,["dragover","drop"]);for(const editor of _classPrivateFieldGet(this,_uiManager).getEditors(this.pageIndex))this.add(editor);this.updateMode()}update({viewport}){_classPrivateFieldGet(this,_uiManager).commitOrRemove(),this.viewport=viewport,(0,_display_utils.setLayerDimensions)(this.div,{rotation:viewport.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth,pageHeight}=this.viewport.rawDims;return[pageWidth,pageHeight]}}function _changeParent2(editor){editor.parent!==this&&(this.attach(editor),editor.parent?.detach(editor),editor.setParent(this),editor.div&&editor.isAttachedToDOM&&(editor.div.remove(),this.div.append(editor.div)))}function _createNewEditor2(params){switch(_classPrivateFieldGet(this,_uiManager).getMode()){case _util.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util.AnnotationEditorType.INK:return new _ink.InkEditor(params)}return null}function _createAndAddNewEditor2(event){const id=this.getNextId(),editor=_classPrivateMethodGet(this,_createNewEditor,_createNewEditor2).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(this,_uiManager)});return editor&&this.add(editor),editor}function _cleanup2(){_classPrivateFieldSet(this,_isCleaningUp,!0);for(const editor of _classPrivateFieldGet(this,_editors).values())editor.isEmpty()&&editor.remove();_classPrivateFieldSet(this,_isCleaningUp,!1)}_defineProperty(AnnotationEditorLayer,"_initialized",!1),exports.AnnotationEditorLayer=AnnotationEditorLayer},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.FreeTextEditor=void 0;var _util=__w_pdfjs_require__(1),_tools=__w_pdfjs_require__(5),_editor=__w_pdfjs_require__(4),_boundEditorDivBlur=new WeakMap,_boundEditorDivFocus=new WeakMap,_boundEditorDivInput=new WeakMap,_boundEditorDivKeydown=new WeakMap,_color=new WeakMap,_content=new WeakMap,_editorDivId=new WeakMap,_hasAlreadyBeenCommitted=new WeakMap,_fontSize=new WeakMap,_updateFontSize=new WeakSet,_updateColor=new WeakSet,_extractText=new WeakSet,_setEditorDimensions=new WeakSet;class FreeTextEditor extends _editor.AnnotationEditor{constructor(params){super({...params,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,_setEditorDimensions),_classPrivateMethodInitSpec(this,_extractText),_classPrivateMethodInitSpec(this,_updateColor),_classPrivateMethodInitSpec(this,_updateFontSize),_classPrivateFieldInitSpec(this,_boundEditorDivBlur,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec(this,_boundEditorDivFocus,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec(this,_boundEditorDivInput,{writable:!0,value:this.editorDivInput.bind(this)}),_classPrivateFieldInitSpec(this,_boundEditorDivKeydown,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec(this,_color,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_content,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,_editorDivId,{writable:!0,value:`${this.id}-editor`}),_classPrivateFieldInitSpec(this,_hasAlreadyBeenCommitted,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_fontSize,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_color,params.color||FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(this,_fontSize,params.fontSize||FreeTextEditor._defaultFontSize)}static initialize(l10n){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map((str=>[str,l10n.get(str)])));const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"))}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,_updateFontSize,_updateFontSize2).call(this,value);break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,_updateColor,_updateColor2).call(this,value)}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,_fontSize)],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,_color)]]}getInitialTranslation(){const scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,_fontSize))*scale]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_util.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,_boundEditorDivKeydown)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,_boundEditorDivFocus)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,_boundEditorDivBlur)),this.editorDiv.addEventListener("input",_classPrivateFieldGet(this,_boundEditorDivInput)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(this,_editorDivId)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,_boundEditorDivKeydown)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,_boundEditorDivFocus)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,_boundEditorDivBlur)),this.editorDiv.removeEventListener("input",_classPrivateFieldGet(this,_boundEditorDivInput)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(event){super.focusin(event),event.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),_classPrivateFieldGet(this,_hasAlreadyBeenCommitted)||(_classPrivateFieldSet(this,_hasAlreadyBeenCommitted,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet(this,_content,_classPrivateMethodGet(this,_extractText,_extractText2).call(this).trimEnd()),_classPrivateMethodGet(this,_setEditorDimensions,_setEditorDimensions2).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(event){this.enableEditMode(),this.editorDiv.focus()}keydown(event){event.target===this.div&&"Enter"===event.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event)}editorDivFocus(event){this.isEditing=!0}editorDivBlur(event){this.isEditing=!1}editorDivInput(event){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_classPrivateFieldGet(this,_editorDivId)),this.enableEditing(),FreeTextEditor._l10nPromise.get("editor_free_text2_aria_label").then((msg=>this.editorDiv?.setAttribute("aria-label",msg))),FreeTextEditor._l10nPromise.get("free_text2_default_content").then((msg=>this.editorDiv?.setAttribute("default-content",msg))),this.editorDiv.contentEditable=!0;const{style}=this.editorDiv;if(style.fontSize=`calc(${_classPrivateFieldGet(this,_fontSize)}px * var(--scale-factor))`,style.color=_classPrivateFieldGet(this,_color),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_tools.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);for(const line of _classPrivateFieldGet(this,_content).split("\n")){const div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br")),this.editorDiv.append(div)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);return _classPrivateFieldSet(editor,_fontSize,data.fontSize),_classPrivateFieldSet(editor,_color,_util.Util.makeHexColor(...data.color)),_classPrivateFieldSet(editor,_content,data.value),editor}serialize(){if(this.isEmpty())return null;const padding=FreeTextEditor._internalPadding*this.parentScale,rect=this.getRect(padding,padding),color=_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(this,_color));return{annotationType:_util.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet(this,_fontSize),value:_classPrivateFieldGet(this,_content),pageIndex:this.pageIndex,rect,rotation:this.rotation}}}function _updateFontSize2(fontSize){const setFontsize=size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`,this.translate(0,-(size-_classPrivateFieldGet(this,_fontSize))*this.parentScale),_classPrivateFieldSet(this,_fontSize,size),_classPrivateMethodGet(this,_setEditorDimensions,_setEditorDimensions2).call(this)},savedFontsize=_classPrivateFieldGet(this,_fontSize);this.addCommands({cmd:()=>{setFontsize(fontSize)},undo:()=>{setFontsize(savedFontsize)},mustExec:!0,type:_util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(color){const savedColor=_classPrivateFieldGet(this,_color);this.addCommands({cmd:()=>{_classPrivateFieldSet(this,_color,this.editorDiv.style.color=color)},undo:()=>{_classPrivateFieldSet(this,_color,this.editorDiv.style.color=savedColor)},mustExec:!0,type:_util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _extractText2(){const divs=this.editorDiv.getElementsByTagName("div");if(0===divs.length)return this.editorDiv.innerText;const buffer=[];for(const div of divs)buffer.push(div.innerText.replace(/\r\n?|\n/,""));return buffer.join("\n")}function _setEditorDimensions2(){const[parentWidth,parentHeight]=this.parentDimensions;let rect;if(this.isAttachedToDOM)rect=this.div.getBoundingClientRect();else{const{currentLayer,div}=this,savedDisplay=div.style.display;div.style.display="hidden",currentLayer.div.append(this.div),rect=div.getBoundingClientRect(),div.remove(),div.style.display=savedDisplay}this.width=rect.width/parentWidth,this.height=rect.height/parentHeight}_defineProperty(FreeTextEditor,"_freeTextDefaultContent",""),_defineProperty(FreeTextEditor,"_l10nPromise",void 0),_defineProperty(FreeTextEditor,"_internalPadding",0),_defineProperty(FreeTextEditor,"_defaultColor",null),_defineProperty(FreeTextEditor,"_defaultFontSize",10),_defineProperty(FreeTextEditor,"_keyboardManager",new _tools.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]])),_defineProperty(FreeTextEditor,"_type","freetext"),exports.FreeTextEditor=FreeTextEditor},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.InkEditor=void 0;var _util=__w_pdfjs_require__(1),_editor=__w_pdfjs_require__(4),_tools=__w_pdfjs_require__(5);const RESIZER_SIZE=16;var _aspectRatio=new WeakMap,_baseHeight=new WeakMap,_baseWidth=new WeakMap,_boundCanvasContextMenu=new WeakMap,_boundCanvasPointermove=new WeakMap,_boundCanvasPointerleave=new WeakMap,_boundCanvasPointerup=new WeakMap,_boundCanvasPointerdown=new WeakMap,_currentPath2D=new WeakMap,_disableEditing=new WeakMap,_hasSomethingToDraw=new WeakMap,_isCanvasInitialized=new WeakMap,_observer=new WeakMap,_realWidth=new WeakMap,_realHeight=new WeakMap,_requestFrameCallback=new WeakMap,_updateThickness=new WeakSet,_updateColor3=new WeakSet,_updateOpacity=new WeakSet,_getInitialBBox=new WeakSet,_setStroke=new WeakSet,_startDrawing=new WeakSet,_draw=new WeakSet,_endPath=new WeakSet,_stopDrawing=new WeakSet,_drawPoints=new WeakSet,_makeBezierCurve=new WeakSet,_generateBezierPoints=new WeakSet,_redraw=new WeakSet,_endDrawing=new WeakSet,_createCanvas=new WeakSet,_createObserver=new WeakSet,_setCanvasDims=new WeakSet,_setScaleFactor=new WeakSet,_updateTransform=new WeakSet,_serializePaths=new WeakSet,_extractPointsOnBezier=new WeakSet,_isAlmostFlat=new WeakSet,_getBbox=new WeakSet,_getPadding=new WeakSet,_fitToContent=new WeakSet,_setMinDims=new WeakSet;class InkEditor extends _editor.AnnotationEditor{constructor(params){super({...params,name:"inkEditor"}),_classPrivateMethodInitSpec(this,_setMinDims),_classPrivateMethodInitSpec(this,_fitToContent),_classPrivateMethodInitSpec(this,_getPadding),_classPrivateMethodInitSpec(this,_getBbox),_classPrivateMethodInitSpec(this,_isAlmostFlat),_classPrivateMethodInitSpec(this,_extractPointsOnBezier),_classPrivateMethodInitSpec(this,_serializePaths),_classPrivateMethodInitSpec(this,_updateTransform),_classPrivateMethodInitSpec(this,_setScaleFactor),_classPrivateMethodInitSpec(this,_setCanvasDims),_classPrivateMethodInitSpec(this,_createObserver),_classPrivateMethodInitSpec(this,_createCanvas),_classPrivateMethodInitSpec(this,_endDrawing),_classPrivateMethodInitSpec(this,_redraw),_classPrivateMethodInitSpec(this,_generateBezierPoints),_classPrivateMethodInitSpec(this,_makeBezierCurve),_classPrivateMethodInitSpec(this,_drawPoints),_classPrivateMethodInitSpec(this,_stopDrawing),_classPrivateMethodInitSpec(this,_endPath),_classPrivateMethodInitSpec(this,_draw),_classPrivateMethodInitSpec(this,_startDrawing),_classPrivateMethodInitSpec(this,_setStroke),_classPrivateMethodInitSpec(this,_getInitialBBox),_classPrivateMethodInitSpec(this,_updateOpacity),_classPrivateMethodInitSpec(this,_updateColor3),_classPrivateMethodInitSpec(this,_updateThickness),_classPrivateFieldInitSpec(this,_aspectRatio,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_baseHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_baseWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_boundCanvasContextMenu,{writable:!0,value:this.canvasContextMenu.bind(this)}),_classPrivateFieldInitSpec(this,_boundCanvasPointermove,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec(this,_boundCanvasPointerleave,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec(this,_boundCanvasPointerup,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec(this,_boundCanvasPointerdown,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec(this,_currentPath2D,{writable:!0,value:new Path2D}),_classPrivateFieldInitSpec(this,_disableEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_hasSomethingToDraw,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_isCanvasInitialized,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_observer,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_realWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_realHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_requestFrameCallback,{writable:!0,value:null}),this.color=params.color||null,this.thickness=params.thickness||null,this.opacity=params.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(l10n){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map((str=>[str,l10n.get(str)])))}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case _util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case _util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,_updateThickness,_updateThickness2).call(this,value);break;case _util.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,_updateColor3,_updateColor4).call(this,value);break;case _util.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,_updateOpacity,_updateOpacity2).call(this,value)}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this)),_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(this,_observer).disconnect(),_classPrivateFieldSet(this,_observer,null),super.remove())}setParent(parent){!this.parent&&parent?this._uiManager.removeShouldRescale(this):this.parent&&null===parent&&this._uiManager.addShouldRescale(this),super.setParent(parent)}onScaleChanging(){const[parentWidth,parentHeight]=this.parentDimensions,width=this.width*parentWidth,height=this.height*parentHeight;this.setDimensions(width,height)}enableEditMode(){_classPrivateFieldGet(this,_disableEditing)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(this,_disableEditing)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(this,_disableEditing,!0),this.div.classList.add("disabled"),_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(event){super.focusin(event),this.enableEditMode()}canvasPointerdown(event){0===event.button&&this.isInEditMode()&&!_classPrivateFieldGet(this,_disableEditing)&&(this.setInForeground(),event.preventDefault(),"mouse"!==event.type&&this.div.focus(),_classPrivateMethodGet(this,_startDrawing,_startDrawing2).call(this,event.offsetX,event.offsetY))}canvasContextMenu(event){event.preventDefault()}canvasPointermove(event){event.preventDefault(),_classPrivateMethodGet(this,_draw,_draw2).call(this,event.offsetX,event.offsetY)}canvasPointerup(event){event.preventDefault(),_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event)}canvasPointerleave(event){_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),InkEditor._l10nPromise.get("editor_ink2_aria_label").then((msg=>this.div?.setAttribute("aria-label",msg)));const[x,y,w,h]=_classPrivateMethodGet(this,_getInitialBBox,_getInitialBBox2).call(this);if(this.setAt(x,y,0,0),this.setDims(w,h),_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this),this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight),_classPrivateFieldSet(this,_isCanvasInitialized,!0),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),this.setDims(this.width*parentWidth,this.height*parentHeight),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,_createObserver,_createObserver2).call(this),this.div}setDimensions(width,height){const roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(_classPrivateFieldGet(this,_realWidth)===roundedWidth&&_classPrivateFieldGet(this,_realHeight)===roundedHeight)return;_classPrivateFieldSet(this,_realWidth,roundedWidth),_classPrivateFieldSet(this,_realHeight,roundedHeight),this.canvas.style.visibility="hidden",_classPrivateFieldGet(this,_aspectRatio)&&Math.abs(_classPrivateFieldGet(this,_aspectRatio)-width/height)>.01&&(height=Math.ceil(width/_classPrivateFieldGet(this,_aspectRatio)),this.setDims(width,height));const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldGet(this,_disableEditing)&&_classPrivateMethodGet(this,_setScaleFactor,_setScaleFactor2).call(this,width,height),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);editor.thickness=data.thickness,editor.color=_util.Util.makeHexColor(...data.color),editor.opacity=data.opacity;const[pageWidth,pageHeight]=editor.pageDimensions,width=editor.width*pageWidth,height=editor.height*pageHeight,scaleFactor=editor.parentScale,padding=data.thickness/2;_classPrivateFieldSet(editor,_aspectRatio,width/height),_classPrivateFieldSet(editor,_disableEditing,!0),_classPrivateFieldSet(editor,_realWidth,Math.round(width)),_classPrivateFieldSet(editor,_realHeight,Math.round(height));for(const{bezier}of data.paths){const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding),p1=scaleFactor*(height-bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding),p11=scaleFactor*(height-bezier[i+1]-padding),p20=scaleFactor*(bezier[i+2]-padding),p21=scaleFactor*(height-bezier[i+3]-padding),p30=scaleFactor*(bezier[i+4]-padding),p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]),p0=p30,p1=p31}const path2D=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D)}const bbox=_classPrivateMethodGet(editor,_getBbox,_getBbox2).call(editor);return _classPrivateFieldSet(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1])),_classPrivateMethodGet(editor,_setScaleFactor,_setScaleFactor2).call(editor,width,height),editor}serialize(){if(this.isEmpty())return null;const rect=this.getRect(0,0),height=this.rotation%180==0?rect[3]-rect[1]:rect[2]-rect[0],color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,height),pageIndex:this.pageIndex,rect,rotation:this.rotation}}}function _updateThickness2(thickness){const savedThickness=this.thickness;this.addCommands({cmd:()=>{this.thickness=thickness,_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this)},undo:()=>{this.thickness=savedThickness,_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this)},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor4(color){const savedColor=this.color;this.addCommands({cmd:()=>{this.color=color,_classPrivateMethodGet(this,_redraw,_redraw2).call(this)},undo:()=>{this.color=savedColor,_classPrivateMethodGet(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _updateOpacity2(opacity){opacity/=100;const savedOpacity=this.opacity;this.addCommands({cmd:()=>{this.opacity=opacity,_classPrivateMethodGet(this,_redraw,_redraw2).call(this)},undo:()=>{this.opacity=savedOpacity,_classPrivateMethodGet(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function _getInitialBBox2(){const{parentRotation,parentDimensions:[width,height]}=this;switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height]}}function _setStroke2(){const{ctx,color,opacity,thickness,parentScale,scaleFactor}=this;ctx.lineWidth=thickness*parentScale/scaleFactor,ctx.lineCap="round",ctx.lineJoin="round",ctx.miterLimit=10,ctx.strokeStyle=`${color}${(0,_tools.opacityToHex)(opacity)}`}function _startDrawing2(x,y){this.canvas.addEventListener("contextmenu",_classPrivateFieldGet(this,_boundCanvasContextMenu)),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,_boundCanvasPointerleave)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,_boundCanvasPointermove)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,_boundCanvasPointerup)),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown)),this.isEditing=!0,_classPrivateFieldGet(this,_isCanvasInitialized)||(_classPrivateFieldSet(this,_isCanvasInitialized,!0),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),this.thickness||=InkEditor._defaultThickness,this.color||=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor,this.opacity??=InkEditor._defaultOpacity),this.currentPath.push([x,y]),_classPrivateFieldSet(this,_hasSomethingToDraw,!1),_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this),_classPrivateFieldSet(this,_requestFrameCallback,(()=>{_classPrivateMethodGet(this,_drawPoints,_drawPoints2).call(this),_classPrivateFieldGet(this,_requestFrameCallback)&&window.requestAnimationFrame(_classPrivateFieldGet(this,_requestFrameCallback))})),window.requestAnimationFrame(_classPrivateFieldGet(this,_requestFrameCallback))}function _draw2(x,y){const[lastX,lastY]=this.currentPath.at(-1);if(this.currentPath.length>1&&x===lastX&&y===lastY)return;const currentPath=this.currentPath;let path2D=_classPrivateFieldGet(this,_currentPath2D);if(currentPath.push([x,y]),_classPrivateFieldSet(this,_hasSomethingToDraw,!0),currentPath.length<=2)return path2D.moveTo(...currentPath[0]),void path2D.lineTo(x,y);3===currentPath.length&&(_classPrivateFieldSet(this,_currentPath2D,path2D=new Path2D),path2D.moveTo(...currentPath[0])),_classPrivateMethodGet(this,_makeBezierCurve,_makeBezierCurve2).call(this,path2D,...currentPath.at(-3),...currentPath.at(-2),x,y)}function _endPath2(){if(0===this.currentPath.length)return;const lastPoint=this.currentPath.at(-1);_classPrivateFieldGet(this,_currentPath2D).lineTo(...lastPoint)}function _stopDrawing2(x,y){let bezier;if(_classPrivateFieldSet(this,_requestFrameCallback,null),x=Math.min(Math.max(x,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height),_classPrivateMethodGet(this,_draw,_draw2).call(this,x,y),_classPrivateMethodGet(this,_endPath,_endPath2).call(this),1!==this.currentPath.length)bezier=_classPrivateMethodGet(this,_generateBezierPoints,_generateBezierPoints2).call(this);else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]]}const path2D=_classPrivateFieldGet(this,_currentPath2D),currentPath=this.currentPath;this.currentPath=[],_classPrivateFieldSet(this,_currentPath2D,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(currentPath),this.paths.push(bezier),this.bezierPath2D.push(path2D),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this)),_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this))},mustExec:!0})}function _drawPoints2(){if(!_classPrivateFieldGet(this,_hasSomethingToDraw))return;_classPrivateFieldSet(this,_hasSomethingToDraw,!1);const thickness=Math.ceil(this.thickness*this.parentScale),lastPoints=this.currentPath.slice(-3),x=lastPoints.map((xy=>xy[0])),y=lastPoints.map((xy=>xy[1])),{ctx}=(Math.min(...x),Math.max(...x),Math.min(...y),Math.max(...y),this);ctx.save(),ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const path of this.bezierPath2D)ctx.stroke(path);ctx.stroke(_classPrivateFieldGet(this,_currentPath2D)),ctx.restore()}function _makeBezierCurve2(path2D,x0,y0,x1,y1,x2,y2){const prevX=(x0+x1)/2,prevY=(y0+y1)/2,x3=(x1+x2)/2,y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3)}function _generateBezierPoints2(){const path=this.currentPath;if(path.length<=2)return[[path[0],path[0],path.at(-1),path.at(-1)]];const bezierPoints=[];let i,[x0,y0]=path[0];for(i=1;i<path.length-2;i++){const[x1,y1]=path[i],[x2,y2]=path[i+1],x3=(x1+x2)/2,y3=(y1+y2)/2,control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3],control2=[x3+2*(x1-x3)/3,y3+2*(y1-y3)/3];bezierPoints.push([[x0,y0],control1,control2,[x3,y3]]),[x0,y0]=[x3,y3]}const[x1,y1]=path[i],[x2,y2]=path[i+1],control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3],control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];return bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]),bezierPoints}function _redraw2(){if(this.isEmpty())return void _classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);for(const path of this.bezierPath2D)ctx.stroke(path)}function _endDrawing2(event){this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,_boundCanvasPointerleave)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,_boundCanvasPointermove)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,_boundCanvasPointerup)),this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown)),setTimeout((()=>{this.canvas.removeEventListener("contextmenu",_classPrivateFieldGet(this,_boundCanvasContextMenu))}),10),_classPrivateMethodGet(this,_stopDrawing,_stopDrawing2).call(this,event.offsetX,event.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function _createCanvas2(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((msg=>this.canvas?.setAttribute("aria-label",msg))),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function _createObserver2(){_classPrivateFieldSet(this,_observer,new ResizeObserver((entries=>{const rect=entries[0].contentRect;rect.width&&rect.height&&this.setDimensions(rect.width,rect.height)}))),_classPrivateFieldGet(this,_observer).observe(this.div)}function _setCanvasDims2(){if(!_classPrivateFieldGet(this,_isCanvasInitialized))return;const[parentWidth,parentHeight]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*parentWidth),this.canvas.height=Math.ceil(this.height*parentHeight),_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this)}function _setScaleFactor2(width,height){const padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this),scaleFactorW=(width-padding)/_classPrivateFieldGet(this,_baseWidth),scaleFactorH=(height-padding)/_classPrivateFieldGet(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH)}function _updateTransform2(){const padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding)}function _buildPath2D(bezier){const path2D=new Path2D;for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];0===i&&path2D.moveTo(...first),path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1])}return path2D}function _serializePaths2(s,tx,ty,h){const paths=[],padding=this.thickness/2;let buffer,points;for(const bezier of this.paths){buffer=[],points=[];for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i],p10=s*(first[0]+tx)+padding,p11=h-s*(first[1]+ty)-padding,p20=s*(control1[0]+tx)+padding,p21=h-s*(control1[1]+ty)-padding,p30=s*(control2[0]+tx)+padding,p31=h-s*(control2[1]+ty)-padding,p40=s*(second[0]+tx)+padding,p41=h-s*(second[1]+ty)-padding;0===i&&(buffer.push(p10,p11),points.push(p10,p11)),buffer.push(p20,p21,p30,p31,p40,p41),_classPrivateMethodGet(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,p10,p11,p20,p21,p30,p31,p40,p41,4,points)}paths.push({bezier:buffer,points})}return paths}function _extractPointsOnBezier2(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(_classPrivateMethodGet(this,_isAlmostFlat,_isAlmostFlat2).call(this,p10,p11,p20,p21,p30,p31,p40,p41))points.push(p40,p41);else{for(let i=1;i<n-1;i++){const t=i/n,mt=1-t;let q10=t*p10+mt*p20,q11=t*p11+mt*p21,q20=t*p20+mt*p30,q21=t*p21+mt*p31;q10=t*q10+mt*q20,q11=t*q11+mt*q21,q20=t*q20+mt*(t*p30+mt*p40),q21=t*q21+mt*(t*p31+mt*p41),q10=t*q10+mt*q20,q11=t*q11+mt*q21,points.push(q10,q11)}points.push(p40,p41)}}function _isAlmostFlat2(p10,p11,p20,p21,p30,p31,p40,p41){const ax=(3*p20-2*p10-p40)**2,ay=(3*p21-2*p11-p41)**2,bx=(3*p30-p10-2*p40)**2,by=(3*p31-p11-2*p41)**2;return Math.max(ax,bx)+Math.max(ay,by)<=10}function _getBbox2(){let xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;for(const path of this.paths)for(const[first,control1,control2,second]of path){const bbox=_util.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]),yMin=Math.min(yMin,bbox[1]),xMax=Math.max(xMax,bbox[2]),yMax=Math.max(yMax,bbox[3])}return[xMin,yMin,xMax,yMax]}function _getPadding2(){return _classPrivateFieldGet(this,_disableEditing)?Math.ceil(this.thickness*this.parentScale):0}function _fitToContent2(firstTime=!1){if(this.isEmpty())return;if(!_classPrivateFieldGet(this,_disableEditing))return void _classPrivateMethodGet(this,_redraw,_redraw2).call(this);const bbox=_classPrivateMethodGet(this,_getBbox,_getBbox2).call(this),padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);_classPrivateFieldSet(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet(this,_baseWidth)*this.scaleFactor),height=Math.ceil(padding+_classPrivateFieldGet(this,_baseHeight)*this.scaleFactor),[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldSet(this,_aspectRatio,width/height),_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);const prevTranslationX=this.translationX,prevTranslationY=this.translationY;this.translationX=-bbox[0],this.translationY=-bbox[1],_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),_classPrivateFieldSet(this,_realWidth,width),_classPrivateFieldSet(this,_realHeight,height),this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding)}function _setMinDims2(){const{style}=this.div;_classPrivateFieldGet(this,_aspectRatio)>=1?(style.minHeight=`${RESIZER_SIZE}px`,style.minWidth=`${Math.round(_classPrivateFieldGet(this,_aspectRatio)*RESIZER_SIZE)}px`):(style.minWidth=`${RESIZER_SIZE}px`,style.minHeight=`${Math.round(RESIZER_SIZE/_classPrivateFieldGet(this,_aspectRatio))}px`)}_defineProperty(InkEditor,"_defaultColor",null),_defineProperty(InkEditor,"_defaultOpacity",1),_defineProperty(InkEditor,"_defaultThickness",1),_defineProperty(InkEditor,"_l10nPromise",void 0),_defineProperty(InkEditor,"_type","ink"),exports.InkEditor=InkEditor},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayer=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(6),_annotation_storage=__w_pdfjs_require__(3),_scripting_utils=__w_pdfjs_require__(31),_xfa_layer=__w_pdfjs_require__(32);const GetElementsByNameSet=new WeakSet;function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]}}class AnnotationElementFactory{static create(parameters){switch(parameters.data.annotationType){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}}class AnnotationElement{constructor(parameters,{isRenderable=!1,ignoreBorder=!1,createQuadrilaterals=!1}={}){this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderForms=parameters.renderForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._fieldObjects=parameters.fieldObjects,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&(this.quadrilaterals=this._createQuadrilaterals(ignoreBorder))}_createContainer(ignoreBorder=!1){const{data,page,viewport}=this,container=document.createElement("section");container.setAttribute("data-annotation-id",data.id),data.noRotate&&container.classList.add("norotate");const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims,{width,height}=getRectDims(data.rect),rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)("Unimplemented border style: beveled");break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)("Unimplemented border style: inset");break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid"}const borderColor=data.borderColor||null;borderColor?container.style.borderColor=_util.Util.makeHexColor(0|borderColor[0],0|borderColor[1],0|borderColor[2]):container.style.borderWidth=0}container.style.left=100*(rect[0]-pageX)/pageWidth+"%",container.style.top=100*(rect[1]-pageY)/pageHeight+"%";const{rotation}=data;return data.hasOwnCanvas||0===rotation?(container.style.width=100*width/pageWidth+"%",container.style.height=100*height/pageHeight+"%"):this.setRotation(rotation,container),container}setRotation(angle,container=this.container){const{pageWidth,pageHeight}=this.viewport.rawDims,{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;angle%180==0?(elementWidth=100*width/pageWidth,elementHeight=100*height/pageHeight):(elementWidth=100*height/pageWidth,elementHeight=100*width/pageHeight),container.style.width=`${elementWidth}%`,container.style.height=`${elementHeight}%`,container.setAttribute("data-main-rotation",(360-angle)%360)}get _commonActions(){const setColor=(jsName,styleName,event)=>{const color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1))};return(0,_util.shadow)(this,"_commonActions",{display:event=>{const hidden=event.detail.display%2==1;this.container.style.visibility=hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden,print:0===event.detail.display||3===event.detail.display})},print:event=>{this.annotationStorage.setValue(this.data.id,{print:event.detail.print})},hidden:event=>{this.container.style.visibility=event.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:event.detail.hidden})},focus:event=>{setTimeout((()=>event.target.focus({preventScroll:!1})),0)},userName:event=>{event.target.title=event.detail.userName},readonly:event=>{event.detail.readonly?event.target.setAttribute("readonly",""):event.target.removeAttribute("readonly")},required:event=>{this._setRequired(event.target,event.detail.required)},bgColor:event=>{setColor("bgColor","backgroundColor",event)},fillColor:event=>{setColor("fillColor","backgroundColor",event)},fgColor:event=>{setColor("fgColor","color",event)},textColor:event=>{setColor("textColor","color",event)},borderColor:event=>{setColor("borderColor","borderColor",event)},strokeColor:event=>{setColor("strokeColor","borderColor",event)},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle),this.annotationStorage.setValue(this.data.id,{rotation:angle})}})}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action?.(jsEvent)}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting)return;const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData)return;const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){action({detail:{[actionName]:detail},target:element}),delete storedData[actionName]}}}_createQuadrilaterals(ignoreBorder=!1){if(!this.data.quadPoints)return null;const quadrilaterals=[],savedRect=this.data.rect;for(const quadPoint of this.data.quadPoints)this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y],quadrilaterals.push(this._createContainer(ignoreBorder));return this.data.rect=savedRect,quadrilaterals}_createPopup(trigger,data){let container=this.container;this.quadrilaterals&&(trigger||=this.quadrilaterals,container=this.quadrilaterals[0]),trigger||((trigger=document.createElement("div")).classList.add("popupTriggerArea"),container.append(trigger));const popup=new PopupElement({container,trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:!0}).render();popup.style.left="100%",container.append(popup)}_renderQuadrilaterals(className){for(const quadrilateral of this.quadrilaterals)quadrilateral.classList.add(className);return this.quadrilaterals}render(){(0,_util.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(name,skipId=null){const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj)for(const{page,id,exportValues}of fieldObj){if(-1===page)continue;if(id===skipId)continue;const exportValue="string"==typeof exportValues?exportValues:null,domElement=document.querySelector(`[data-element-id="${id}"]`);!domElement||GetElementsByNameSet.has(domElement)?fields.push({id,exportValue,domElement}):(0,_util.warn)(`_getElementsByName - element not allowed: ${id}`)}return fields}for(const domElement of document.getElementsByName(name)){const{exportValue}=domElement,id=domElement.getAttribute("data-element-id");id!==skipId&&(GetElementsByNameSet.has(domElement)&&fields.push({id,exportValue,domElement}))}return fields}}var _setInternalLink=new WeakSet,_bindSetOCGState=new WeakSet;class LinkAnnotationElement extends AnnotationElement{constructor(parameters,options=null){super(parameters,{isRenderable:!0,ignoreBorder:!!options?.ignoreBorder,createQuadrilaterals:!0}),_classPrivateMethodInitSpec(this,_bindSetOCGState),_classPrivateMethodInitSpec(this,_setInternalLink),this.isTooltipOnly=parameters.data.isTooltipOnly}render(){const{data,linkService}=this,link=document.createElement("a");link.setAttribute("data-element-id",data.id);let isBound=!1;return data.url?(linkService.addLinkAttributes(link,data.url,data.newWindow),isBound=!0):data.action?(this._bindNamedAction(link,data.action),isBound=!0):data.attachment?(this._bindAttachment(link,data.attachment),isBound=!0):data.setOCGState?(_classPrivateMethodGet(this,_bindSetOCGState,_bindSetOCGState2).call(this,link,data.setOCGState),isBound=!0):data.dest?(this._bindLink(link,data.dest),isBound=!0):(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(link,data),isBound=!0),data.resetForm?(this._bindResetFormAction(link,data.resetForm),isBound=!0):this.isTooltipOnly&&!isBound&&(this._bindLink(link,""),isBound=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((quadrilateral,index)=>{const linkElement=0===index?link:link.cloneNode();return quadrilateral.append(linkElement),quadrilateral})):(this.container.classList.add("linkAnnotation"),isBound&&this.container.append(link),this.container)}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.goToDestination(destination),!1),(destination||""===destination)&&_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this)}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this)}_bindAttachment(link,attachment){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,attachment.content,attachment.filename),!1),_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this)}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl("");const map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);jsName&&(link[jsName]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:data.id,name}}),!1))}link.onclick||(link.onclick=()=>!1),_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this)}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(otherClickAction||(link.href=this.linkService.getAnchorUrl("")),_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this),!this._fieldObjects)return(0,_util.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(otherClickAction||(link.onclick=()=>!1));link.onclick=()=>{otherClickAction?.();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm,allFields=[];if(0!==resetFormFields.length||0!==resetFormRefs.length){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields)fieldIds.add(id)}for(const fields of Object.values(this._fieldObjects))for(const field of fields)fieldIds.has(field.id)===include&&allFields.push(field)}else for(const fields of Object.values(this._fieldObjects))allFields.push(...fields);const storage=this.annotationStorage,allIds=[];for(const field of allFields){const{id}=field;switch(allIds.push(id),field.type){case"text":{const value=field.defaultValue||"";storage.setValue(id,{value});break}case"checkbox":case"radiobutton":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break}case"combobox":case"listbox":{const value=field.defaultValue||"";storage.setValue(id,{value});break}default:continue}const domElement=document.querySelector(`[data-element-id="${id}"]`);domElement&&(GetElementsByNameSet.has(domElement)?domElement.dispatchEvent(new Event("resetform")):(0,_util.warn)(`_bindResetFormAction - element not allowed: ${id}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:allIds,name:"ResetForm"}}),!1}}}function _setInternalLink2(){this.container.setAttribute("data-internal-link","")}function _bindSetOCGState2(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeSetOCGState(action),!1),_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this)}class TextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str)})}render(){this.container.classList.add("textAnnotation");const image=document.createElement("img");return image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(image,this.data),this.container.append(image),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(element){this.data.hasOwnCanvas&&("CANVAS"===element.previousSibling?.nodeName&&(element.previousSibling.hidden=!0),element.hidden=!1)}_getKeyModifier(event){const{isWin,isMac}=_util.FeatureTest.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey}_setEventListener(element,baseName,eventName,valueGetter){baseName.includes("mouse")?element.addEventListener(baseName,(event=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}})})):element.addEventListener(baseName,(event=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}})}))}_setEventListeners(element,names,getter){for(const[baseName,eventName]of names)("Action"===eventName||this.data.actions?.[eventName])&&this._setEventListener(element,baseName,eventName,getter)}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=null===color?"transparent":_util.Util.makeHexColor(color[0],color[1],color[2])}_setTextStyle(element){const TEXT_ALIGNMENT=["left","center","right"],{fontColor}=this.data.defaultAppearanceData,fontSize=this.data.defaultAppearanceData.fontSize||9,style=element.style;let computedFontSize;const roundToOneDecimal=x=>Math.round(10*x)/10;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]-2),lineHeight=height/(Math.round(height/(_util.LINE_FACTOR*fontSize))||1);computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/_util.LINE_FACTOR))}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]-2);computedFontSize=Math.min(fontSize,roundToOneDecimal(height/_util.LINE_FACTOR))}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`,style.color=_util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),null!==this.data.textAlignment&&(style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment])}_setRequired(element,isRequired){isRequired?element.setAttribute("required",!0):element.removeAttribute("required"),element.setAttribute("aria-required",isRequired)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue})}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id))element.domElement&&(element.domElement[key]=value),storage.setValue(element.id,{[keyInStorage]:value})}render(){const storage=this.annotationStorage,id=this.data.id;this.container.classList.add("textWidgetAnnotation");let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.value||"";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;maxLen&&textContent.length>maxLen&&(textContent=textContent.slice(0,maxLen));let fieldFormattedValues=storedData.formattedValue||this.data.textContent?.join("\n")||null;fieldFormattedValues&&this.data.comb&&(fieldFormattedValues=fieldFormattedValues.replaceAll(/\s+/g,""));const elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1};this.data.multiLine?(element=document.createElement("textarea"),element.textContent=fieldFormattedValues??textContent,this.data.doNotScroll&&(element.style.overflowY="hidden")):(element=document.createElement("input"),element.type="text",element.setAttribute("value",fieldFormattedValues??textContent),this.data.doNotScroll&&(element.style.overflowX="hidden")),this.data.hasOwnCanvas&&(element.hidden=!0),GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=this.data.readOnly,element.name=this.data.fieldName,element.tabIndex=1e3,this._setRequired(element,this.data.required),maxLen&&(element.maxLength=maxLen),element.addEventListener("input",(event=>{storage.setValue(id,{value:event.target.value}),this.setPropertyOnSiblings(element,"value",event.target.value,"value"),elementData.formattedValue=null})),element.addEventListener("resetform",(event=>{const defaultValue=this.data.defaultFieldValue??"";element.value=elementData.userValue=defaultValue,elementData.formattedValue=null}));let blurListener=event=>{const{formattedValue}=elementData;null!=formattedValue&&(event.target.value=formattedValue),event.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){element.addEventListener("focus",(event=>{const{target}=event;elementData.userValue&&(target.value=elementData.userValue),elementData.lastCommittedValue=target.value,elementData.commitKey=1})),element.addEventListener("updatefromsandbox",(jsEvent=>{this.showElementAndHideCanvas(jsEvent.target);const actions={value(event){elementData.userValue=event.detail.value??"",storage.setValue(id,{value:elementData.userValue.toString()}),event.target.value=elementData.userValue},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue,null!=formattedValue&&event.target!==document.activeElement&&(event.target.value=formattedValue),storage.setValue(id,{formattedValue})},selRange(event){event.target.setSelectionRange(...event.detail.selRange)},charLimit:event=>{const{charLimit}=event.detail,{target}=event;if(0===charLimit)return void target.removeAttribute("maxLength");target.setAttribute("maxLength",charLimit);let value=elementData.userValue;!value||value.length<=charLimit||(value=value.slice(0,charLimit),target.value=elementData.userValue=value,storage.setValue(id,{value}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}}))}};this._dispatchEventFromSandbox(actions,jsEvent)})),element.addEventListener("keydown",(event=>{elementData.commitKey=1;let commitKey=-1;if("Escape"===event.key?commitKey=0:"Enter"!==event.key||this.data.multiLine?"Tab"===event.key&&(elementData.commitKey=3):commitKey=2,-1===commitKey)return;const{value}=event.target;elementData.lastCommittedValue!==value&&(elementData.lastCommittedValue=value,elementData.userValue=value,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))}));const _blurListener=blurListener;blurListener=null,element.addEventListener("blur",(event=>{if(!event.relatedTarget)return;const{value}=event.target;elementData.userValue=value,elementData.lastCommittedValue!==value&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}),_blurListener(event)})),this.data.actions?.Keystroke&&element.addEventListener("beforeinput",(event=>{elementData.lastCommittedValue=null;const{data,target}=event,{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{const match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);match&&(selStart-=match[0].length);break}case"deleteWordForward":{const match=value.substring(selectionStart).match(/^[^\w]*\w*/);match&&(selEnd+=match[0].length);break}case"deleteContentBackward":selectionStart===selectionEnd&&(selStart-=1);break;case"deleteContentForward":selectionStart===selectionEnd&&(selEnd+=1)}event.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,change:data||"",willCommit:!1,selStart,selEnd}})})),this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(event=>event.target.value))}if(blurListener&&element.addEventListener("blur",blurListener),this.data.comb){const combWidth=(this.data.rect[2]-this.data.rect[0])/maxLen;element.classList.add("comb"),element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`}}else element=document.createElement("div"),element.textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";return this._setTextStyle(element),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;"string"==typeof value&&(value="Off"!==value,storage.setValue(id,{value})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const element=document.createElement("input");return GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="checkbox",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("exportValue",data.exportValue),element.tabIndex=1e3,element.addEventListener("change",(event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;checkbox.domElement&&(checkbox.domElement.checked=curChecked),storage.setValue(checkbox.id,{value:curChecked})}storage.setValue(id,{value:checked})})),element.addEventListener("resetform",(event=>{const defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue})),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",(jsEvent=>{const actions={value(event){event.target.checked="Off"!==event.detail.value,storage.setValue(id,{value:event.target.checked})}};this._dispatchEventFromSandbox(actions,jsEvent)})),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(event=>event.target.checked))),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;"string"==typeof value&&(value=value!==data.buttonValue,storage.setValue(id,{value}));const element=document.createElement("input");if(GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="radio",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.tabIndex=1e3,element.addEventListener("change",(event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id))storage.setValue(radio.id,{value:!1});storage.setValue(id,{value:checked})})),element.addEventListener("resetform",(event=>{const defaultValue=data.defaultFieldValue;event.target.checked=null!=defaultValue&&defaultValue===data.buttonValue})),this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",(jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;radio.domElement&&(radio.domElement.checked=curChecked),storage.setValue(radio.id,{value:curChecked})}}};this._dispatchEventFromSandbox(actions,jsEvent)})),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(event=>event.target.checked))}return this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance})}render(){const container=super.render();container.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(container.title=this.data.alternativeText);const linkElement=container.lastChild;return this.enableScripting&&this.hasJSActions&&linkElement&&(this._setDefaultPropertiesFromJS(linkElement),linkElement.addEventListener("updatefromsandbox",(jsEvent=>{this._dispatchEventFromSandbox({},jsEvent)}))),container}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const storage=this.annotationStorage,id=this.data.id,storedData=storage.getValue(id,{value:this.data.fieldValue}),selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement),selectElement.setAttribute("data-element-id",id),selectElement.disabled=this.data.readOnly,this._setRequired(selectElement,this.data.required),selectElement.name=this.data.fieldName,selectElement.tabIndex=1e3;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0)),selectElement.addEventListener("resetform",(event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options)option.selected=option.value===defaultValue}));for(const option of this.data.options){const optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,storedData.value.includes(option.exportValue)&&(optionElement.setAttribute("selected",!0),addAnEmptyEntry=!1),selectElement.append(optionElement)}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement("option");noneOptionElement.value=" ",noneOptionElement.setAttribute("hidden",!0),noneOptionElement.setAttribute("selected",!0),selectElement.prepend(noneOptionElement),removeEmptyEntry=()=>{noneOptionElement.remove(),selectElement.removeEventListener("input",removeEmptyEntry),removeEmptyEntry=null},selectElement.addEventListener("input",removeEmptyEntry)}const getValue=isExport=>{const name=isExport?"value":"textContent",{options,multiple}=selectElement;return multiple?Array.prototype.filter.call(options,(option=>option.selected)).map((option=>option[name])):-1===options.selectedIndex?null:options[options.selectedIndex][name]};let selectedValues=getValue(!1);const getItems=event=>{const options=event.target.options;return Array.prototype.map.call(options,(option=>({displayValue:option.textContent,exportValue:option.value})))};return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener("updatefromsandbox",(jsEvent=>{const actions={value(event){removeEmptyEntry?.();const value=event.detail.value,values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options)option.selected=values.has(option.value);storage.setValue(id,{value:getValue(!0)}),selectedValues=getValue(!1)},multipleSelection(event){selectElement.multiple=!0},remove(event){const options=selectElement.options,index=event.detail.remove;if(options[index].selected=!1,selectElement.remove(index),options.length>0){-1===Array.prototype.findIndex.call(options,(option=>option.selected))&&(options[0].selected=!0)}storage.setValue(id,{value:getValue(!0),items:getItems(event)}),selectedValues=getValue(!1)},clear(event){for(;0!==selectElement.length;)selectElement.remove(0);storage.setValue(id,{value:null,items:[]}),selectedValues=getValue(!1)},insert(event){const{index,displayValue,exportValue}=event.detail.insert,selectChild=selectElement.children[index],optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectChild?selectChild.before(optionElement):selectElement.append(optionElement),storage.setValue(id,{value:getValue(!0),items:getItems(event)}),selectedValues=getValue(!1)},items(event){const{items}=event.detail;for(;0!==selectElement.length;)selectElement.remove(0);for(const item of items){const{displayValue,exportValue}=item,optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectElement.append(optionElement)}selectElement.options.length>0&&(selectElement.options[0].selected=!0),storage.setValue(id,{value:getValue(!0),items:getItems(event)}),selectedValues=getValue(!1)},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options)option.selected=indices.has(option.index);storage.setValue(id,{value:getValue(!0)}),selectedValues=getValue(!1)},editable(event){event.target.disabled=!event.detail.editable}};this._dispatchEventFromSandbox(actions,jsEvent)})),selectElement.addEventListener("input",(event=>{const exportValue=getValue(!0);storage.setValue(id,{value:exportValue}),event.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value:selectedValues,changeEx:exportValue,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(event=>event.target.value))):selectElement.addEventListener("input",(function(event){storage.setValue(id,{value:getValue(!0)})})),this.data.combo&&this._setTextStyle(selectElement),this._setBackgroundColor(selectElement),this._setDefaultPropertiesFromJS(selectElement),this.container.append(selectElement),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){const{data}=parameters;super(parameters,{isRenderable:!PopupAnnotationElement.IGNORE_TYPES.has(data.parentType)&&!!(data.titleObj?.str||data.contentsObj?.str||data.richText?.str)})}render(){this.container.classList.add("popupAnnotation");const parentElements=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===parentElements.length)return this.container;const popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),page=this.page,rect=_util.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]),popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0],popupTop=rect[1],{pageWidth,pageHeight,pageX,pageY}=this.viewport.rawDims;return this.container.style.left=100*(popupLeft-pageX)/pageWidth+"%",this.container.style.top=100*(popupTop-pageY)/pageHeight+"%",this.container.append(popup.render()),this.container}}_defineProperty(PopupAnnotationElement,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class PopupElement{constructor(parameters){this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.titleObj=parameters.titleObj,this.modificationDate=parameters.modificationDate,this.contentsObj=parameters.contentsObj,this.richText=parameters.richText,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}render(){const wrapper=document.createElement("div");wrapper.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.hidden=!0;const popup=document.createElement("div");popup.classList.add("popup");const color=this.color;if(color){const r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util.Util.makeHexColor(0|r,0|g,0|b)}const title=document.createElement("h1");title.dir=this.titleObj.dir,title.textContent=this.titleObj.str,popup.append(title);const dateObject=_display_utils.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement("span");modificationDate.classList.add("popupDate"),modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.append(modificationDate)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const contents=this._formatContents(this.contentsObj);popup.append(contents)}else _xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:popup}),popup.lastChild.classList.add("richText","popupContent");Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const element of this.trigger)element.addEventListener("click",this._toggle.bind(this)),element.addEventListener("mouseover",this._show.bind(this,!1)),element.addEventListener("mouseout",this._hide.bind(this,!1));return popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.append(popup),wrapper}_formatContents({str,dir}){const p=document.createElement("p");p.classList.add("popupContent"),p.dir=dir;const lines=str.split(/(?:\r\n?|\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line)),i<ii-1&&p.append(document.createElement("br"))}return p}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(pin=!1){pin&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(unpin=!0){unpin&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0}),this.textContent=parameters.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const content=document.createElement("div");content.classList.add("annotationTextContent"),content.setAttribute("role","comment");for(const line of this.textContent){const lineSpan=document.createElement("span");lineSpan.textContent=line,content.append(lineSpan)}this.container.append(content)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class LineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),line.setAttribute("fill","transparent"),svg.append(line),this.container.append(svg),this._createPopup(line,data),this.container}}class SquareAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","transparent"),svg.append(square),this.container.append(svg),this._createPopup(square,data),this.container}}class CircleAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","transparent"),svg.append(circle),this.container.append(svg),this._createPopup(circle,data),this.container}}class PolylineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),svg.append(polyline),this.container.append(svg),this._createPopup(polyline,data),this.container}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class InkAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(`${x},${y}`)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),this._createPopup(polyline,data),svg.append(polyline)}return this.container.append(svg),this.container}}class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str),ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0});const{filename,content}=this.data.file;this.filename=(0,_display_utils.getFilenameFromUrl)(filename,!0),this.content=content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename,content})}render(){let trigger;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?trigger=document.createElement("div"):(trigger=document.createElement("img"),trigger.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),trigger.classList.add("popupTriggerArea"),trigger.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(trigger,this.data),this.container.append(trigger),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class AnnotationLayer{static render(params){const{annotations,div,viewport,accessibilityManager}=params;(0,_display_utils.setLayerDimensions)(div,viewport);const elementParams={data:null,layer:div,page:params.page,viewport,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||"",renderForms:!1!==params.renderForms,svgFactory:new _display_utils.DOMSVGFactory,annotationStorage:params.annotationStorage||new _annotation_storage.AnnotationStorage,enableScripting:!0===params.enableScripting,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects};let zIndex=0;for(const data of annotations){if(data.noHTML)continue;if(data.annotationType!==_util.AnnotationType.POPUP){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0)continue}elementParams.data=data;const element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable)continue;const rendered=element.render();if(data.hidden&&(rendered.style.visibility="hidden"),Array.isArray(rendered))for(const renderedElement of rendered)renderedElement.style.zIndex=zIndex++,_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,renderedElement,data.id,div,accessibilityManager);else rendered.style.zIndex=zIndex++,element instanceof PopupAnnotationElement?div.prepend(rendered):_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,rendered,data.id,div,accessibilityManager)}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,params.annotationCanvasMap)}static update(params){const{annotationCanvasMap,div,viewport}=params;(0,_display_utils.setLayerDimensions)(div,{rotation:viewport.rotation}),_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,annotationCanvasMap),div.hidden=!1}}function _appendElement(element,id,div,accessibilityManager){const contentElement=element.firstChild||element;contentElement.id=`${_display_utils.AnnotationPrefix}${id}`,div.append(element),accessibilityManager?.moveElementInDOM(div,element,contentElement,!1)}function _setAnnotationCanvasMap(div,annotationCanvasMap){if(annotationCanvasMap){for(const[id,canvas]of annotationCanvasMap){const element=div.querySelector(`[data-annotation-id="${id}"]`);if(!element)continue;const{firstChild}=element;firstChild?"CANVAS"===firstChild.nodeName?firstChild.replaceWith(canvas):firstChild.before(canvas):element.append(canvas)}annotationCanvasMap.clear()}}exports.AnnotationLayer=AnnotationLayer},(__unused_webpack_module,exports)=>{function makeColorComp(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorConverters=void 0;exports.ColorConverters=class ColorConverters{static CMYK_G([c,y,m,k]){return["G",1-Math.min(1,.3*c+.59*m+.11*y+k)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_HTML([g]){const G=makeColorComp(g);return`#${G}${G}${G}`}static RGB_G([r,g,b]){return["G",.3*r+.59*g+.11*b]}static RGB_HTML([r,g,b]){return`#${makeColorComp(r)}${makeColorComp(g)}${makeColorComp(b)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([c,y,m,k]){return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)]}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb)}static RGB_CMYK([r,g,b]){const c=1-r,m=1-g,y=1-b;return["CMYK",c,m,y,Math.min(c,m,y)]}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.XfaLayer=void 0;var _xfa_text=__w_pdfjs_require__(19);exports.XfaLayer=class XfaLayer{static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case"textarea":if(null!==storedData.value&&(html.textContent=storedData.value),"print"===intent)break;html.addEventListener("input",(event=>{storage.setValue(id,{value:event.target.value})}));break;case"input":if("radio"===element.attributes.type||"checkbox"===element.attributes.type){if(storedData.value===element.attributes.xfaOn?html.setAttribute("checked",!0):storedData.value===element.attributes.xfaOff&&html.removeAttribute("checked"),"print"===intent)break;html.addEventListener("change",(event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")})}))}else{if(null!==storedData.value&&html.setAttribute("value",storedData.value),"print"===intent)break;html.addEventListener("input",(event=>{storage.setValue(id,{value:event.target.value})}))}break;case"select":if(null!==storedData.value)for(const option of element.children)option.attributes.value===storedData.value&&(option.attributes.selected=!0);html.addEventListener("input",(event=>{const options=event.target.options,value=-1===options.selectedIndex?"":options[options.selectedIndex].value;storage.setValue(id,{value})}))}}static setAttributes({html,element,storage=null,intent,linkService}){const{attributes}=element,isHTMLAnchorElement=html instanceof HTMLAnchorElement;"radio"===attributes.type&&(attributes.name=`${attributes.name}-${intent}`);for(const[key,value]of Object.entries(attributes))if(null!=value)switch(key){case"class":value.length&&html.setAttribute(key,value.join(" "));break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:(!isHTMLAnchorElement||"href"!==key&&"newWindow"!==key)&&html.setAttribute(key,value)}isHTMLAnchorElement&&linkService.addLinkAttributes(html,attributes.href,attributes.newWindow),storage&&attributes.dataId&&this.setupStorage(html,attributes.dataId,element,storage)}static render(parameters){const storage=parameters.annotationStorage,linkService=parameters.linkService,root=parameters.xfaHtml,intent=parameters.intent||"display",rootHtml=document.createElement(root.name);root.attributes&&this.setAttributes({html:rootHtml,element:root,intent,linkService});const stack=[[root,-1,rootHtml]],rootDiv=parameters.div;if(rootDiv.append(rootHtml),parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(",")})`;rootDiv.style.transform=transform}"richText"!==intent&&rootDiv.setAttribute("class","xfaLayer xfaFont");const textDivs=[];for(;stack.length>0;){const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue}const child=parent.children[++stack.at(-1)[1]];if(null===child)continue;const{name}=child;if("#text"===name){const node=document.createTextNode(child.value);textDivs.push(node),html.append(node);continue}let childHtml;if(childHtml=child?.attributes?.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name),html.append(childHtml),child.attributes&&this.setAttributes({html:childHtml,element:child,storage,intent,linkService}),child.children&&child.children.length>0)stack.push([child,-1,childHtml]);else if(child.value){const node=document.createTextNode(child.value);_xfa_text.XfaText.shouldBuildText(name)&&textDivs.push(node),childHtml.append(node)}}for(const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))el.setAttribute("readOnly",!0);return{textDivs}}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(",")})`;parameters.div.style.transform=transform,parameters.div.hidden=!1}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGGraphics=void 0;var _display_utils=__w_pdfjs_require__(6),_util=__w_pdfjs_require__(1),_is_node=__w_pdfjs_require__(10);let SVGGraphics=class{constructor(){(0,_util.unreachable)("Not implemented: SVGGraphics")}};exports.SVGGraphics=SVGGraphics;{const SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},XML_NS="http://www.w3.org/XML/1998/namespace",XLINK_NS="http://www.w3.org/1999/xlink",LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],createObjectURL=function(data,contentType="",forceDataSchema=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!forceDataSchema)return URL.createObjectURL(new Blob([data],{type:contentType}));const digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=255&data[i],b2=255&data[i+1],b3=255&data[i+2];buffer+=digits[b1>>2]+digits[(3&b1)<<4|b2>>4]+digits[i+1<ii?(15&b2)<<2|b3>>6:64]+digits[i+2<ii?63&b3:64]}return buffer},convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++)c=1&c?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=255&len,p+=4,data[p]=255&type.charCodeAt(0),data[p+1]=255&type.charCodeAt(1),data[p+2]=255&type.charCodeAt(2),data[p+3]=255&type.charCodeAt(3),p+=4,data.set(body,p),p+=body.length;const crc=function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=255&(crc^data[i]);crc=crc>>>8^crcTable[a]}return-1^crc}(data,offset+4,p);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=255&crc}function deflateSyncUncompressed(literals){let len=literals.length;const deflateBlocks=Math.ceil(len/65535),idat=new Uint8Array(2+len+5*deflateBlocks+4);let pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>65535;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+65535),pi),pi+=65535,pos+=65535,len-=65535;idat[pi++]=1,idat[pi++]=255&len,idat[pi++]=len>>8&255,idat[pi++]=255&~len,idat[pi++]=(65535&~len)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;const adler=function adler32(data,start,end){let a=1,b=0;for(let i=start;i<end;++i)a=(a+(255&data[i]))%65521,b=(b+a)%65521;return b<<16|a}(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=255&adler,idat}function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width,height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=3*width;break;case _util.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=4*width;break;default:throw new Error("invalid format")}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++)literals[offsetLiterals++]^=255}}const ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,255&width,height>>24&255,height>>16&255,height>>8&255,255&height,bitDepth,colorType,0,0,0]),idat=function deflateSync(literals){if(!_is_node.isNodeJS)return deflateSyncUncompressed(literals);try{let input;input=parseInt(process.versions.node)>=8?literals:Buffer.from(literals);const output=__webpack_require__("?afbb").deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}(literals),pngLength=PNG_HEADER.length+36+ihdr.length+idat.length,data=new Uint8Array(pngLength);let offset=0;return data.set(PNG_HEADER,offset),offset+=PNG_HEADER.length,writePngChunk("IHDR",ihdr,data,offset),offset+=12+ihdr.length,writePngChunk("IDATA",idat,data,offset),offset+=12+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),createObjectURL(data,"image/png",forceDataSchema)}return function convertImgDataToPng(imgData,forceDataSchema,isMask){return encode(imgData,void 0===imgData.kind?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind,forceDataSchema,isMask)}}();class SVGExtraState{constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util.IDENTITY_MATRIX,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,y){this.x=x,this.y=y}}function opListToTree(opList){let opTree=[];const tmp=[];for(const opListElement of opList)"save"!==opListElement.fn?"restore"===opListElement.fn?opTree=tmp.pop():opTree.push(opListElement):(opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree.at(-1).items);return opTree}function pf(value){if(Number.isInteger(value))return value.toString();const s=value.toFixed(10);let i=s.length-1;if("0"!==s[i])return s;do{i--}while("0"===s[i]);return s.substring(0,"."===s[i]?i:i+1)}function pm(m){if(0===m[4]&&0===m[5]){if(0===m[1]&&0===m[2])return 1===m[0]&&1===m[3]?"":`scale(${pf(m[0])} ${pf(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){return`rotate(${pf(180*Math.acos(m[0])/Math.PI)})`}}else if(1===m[0]&&0===m[1]&&0===m[2]&&1===m[3])return`translate(${pf(m[4])} ${pf(m[5])})`;return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ${pf(m[5])})`}let clipCount=0,maskCount=0,shadingCount=0;exports.SVGGraphics=SVGGraphics=class{constructor(commonObjs,objs,forceDataSchema=!1){(0,_display_utils.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _display_utils.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[];for(const op in _util.OPS)this._operatorIdMapping[_util.OPS[op]]=op}getObject(data,fallback=null){return"string"==typeof data?data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data):fallback}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){const fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util.OPS.dependency)for(const obj of argsArray[i]){const objsPool=obj.startsWith("g_")?this.commonObjs:this.objs,promise=new Promise((resolve=>{objsPool.get(obj,resolve)}));this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then((()=>(this.transformMatrix=_util.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement)))}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return opListToTree(opList)}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(0|fnId){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip("nonzero");break;case _util.OPS.eoClip:this.clip("evenodd");break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)(`Unimplemented operator ${fn}`)}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.hypot(a,b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.append(current.tspan)}beginText(){const current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util.IDENTITY_MATRIX,current.lineMatrix=_util.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[],current.ycoords=[]}moveText(x,y){const current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y))}showText(glyphs){const current=this.current,font=current.font,fontSize=current.fontSize;if(0===fontSize)return;const fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(null===glyph){x+=fontDirection*wordSpacing;continue}if("number"==typeof glyph){x+=spacingDir*glyph*fontSize/1e3;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar;let scaledX,scaledY,charWidth,width=glyph.width;if(vertical){let vx;const vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:.5*width,vx=-vx*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character),charWidth=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection,x+=charWidth}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),vertical?current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" ")):current.tspan.setAttributeNS(null,"y",pf(-current.y)),vertical?current.y-=x:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);const fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;0!==current.textRise&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve"),current.txtElement.append(current.tspan),current.txtgrp.append(current.txtElement),this._ensureTransformGroup().append(current.txtElement)}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}addFontStyle(fontObj){if(!fontObj.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }\n`}setFont(details){const current=this.current,fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj,!this.embedFonts||fontObj.missingFile||this.embeddedFonts[fontObj.loadedName]||(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[],current.ycoords=[]}endText(){const current=this.current;current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&current.txtElement?.hasChildNodes()&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util.Util.makeHexColor(r,g,b)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r,g,b){this.current.fillColor=_util.Util.makeHexColor(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){const width=this.viewport.width,height=this.viewport.height,inv=_util.Util.inverseTransform(this.transformMatrix),bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(rect)}_makeColorN_Pattern(args){return"TilingPattern"===args[0]?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){const color=args[1],operatorList=args[2],matrix=args[3]||_util.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId="shading"+shadingCount++,[tx0,ty0,tx1,ty1]=_util.Util.normalizeRect([..._util.Util.applyTransform([x0,y0],matrix),..._util.Util.applyTransform([x1,y1],matrix)]),[xscale,yscale]=_util.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x",`${tx0}`),tiling.setAttributeNS(null,"y",`${ty0}`);const svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,2===paintType){const cssColor=_util.Util.makeHexColor(...color);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.append(bbox.childNodes[0]),this.defs.append(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch("string"==typeof args&&(args=this.objs.get(args)),args[0]){case"RadialAxial":const shadingId="shading"+shadingCount++,colorStops=args[3];let gradient;switch(args[1]){case"axial":const point0=args[4],point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":const focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`)}for(const colorStop of colorStops){const stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.append(stop)}return this.defs.append(gradient),`url(#${shadingId})`;case"Mesh":return(0,_util.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y,d=[],j=0;for(const op of ops)switch(0|op){case _util.OPS.rectangle:x=args[j++],y=args[j++];const xw=x+args[j++],yh=y+args[j++];d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util.OPS.closePath:d.push("Z")}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}endPath(){const current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element)return void(this.pendingClip=null);const clipId="clippath"+clipCount++,clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));const clipElement=current.element.cloneNode(!0);if("evenodd"===this.pendingClip?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.append(clipElement),this.defs.append(clipPath),current.activeClipUrl){current.clipGroup=null;for(const prev of this.extraStack)prev.clipGroup=null;clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)}current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,"d")}Z`;current.path.setAttributeNS(null,"d",d)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale){this.current.textHScale=scale/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util.warn)(`Unimplemented graphic state operator ${key}`)}}fill(){const current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}stroke(){const current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(element,lineWidthScale=1){const current=this.current;let dashArray=current.dashArray;1!==lineWidthScale&&dashArray.length>0&&(dashArray=dashArray.map((function(value){return lineWidthScale*value}))),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(rect)}paintImageXObject(objId){const imgData=this.getObject(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)(`Dependent image with object ID ${objId} is not ready yet`)}paintInlineImageXObject(imgData,mask){const width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");const imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.append(imgEl):this._ensureTransformGroup().append(imgEl)}paintImageMaskXObject(img){const imgData=this.getObject(img.data,img);if(imgData.bitmap)return void(0,_util.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId="mask"+maskCount++;const mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask",`url(#${current.maskId})`),this.defs.append(mask),this._ensureTransformGroup().append(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&6===matrix.length&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.append(definitions),this.defs=definitions;const rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.append(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}var __nested_webpack_exports__={};return(()=>{var exports=__nested_webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AbortException",{enumerable:!0,get:function(){return _util.AbortException}}),Object.defineProperty(exports,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _annotation_editor_layer.AnnotationEditorLayer}}),Object.defineProperty(exports,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _util.AnnotationEditorParamsType}}),Object.defineProperty(exports,"AnnotationEditorType",{enumerable:!0,get:function(){return _util.AnnotationEditorType}}),Object.defineProperty(exports,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _tools.AnnotationEditorUIManager}}),Object.defineProperty(exports,"AnnotationLayer",{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports,"AnnotationMode",{enumerable:!0,get:function(){return _util.AnnotationMode}}),Object.defineProperty(exports,"CMapCompressionType",{enumerable:!0,get:function(){return _util.CMapCompressionType}}),Object.defineProperty(exports,"FeatureTest",{enumerable:!0,get:function(){return _util.FeatureTest}}),Object.defineProperty(exports,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _worker_options.GlobalWorkerOptions}}),Object.defineProperty(exports,"InvalidPDFException",{enumerable:!0,get:function(){return _util.InvalidPDFException}}),Object.defineProperty(exports,"MissingPDFException",{enumerable:!0,get:function(){return _util.MissingPDFException}}),Object.defineProperty(exports,"OPS",{enumerable:!0,get:function(){return _util.OPS}}),Object.defineProperty(exports,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports,"PDFDateString",{enumerable:!0,get:function(){return _display_utils.PDFDateString}}),Object.defineProperty(exports,"PDFWorker",{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports,"PasswordResponses",{enumerable:!0,get:function(){return _util.PasswordResponses}}),Object.defineProperty(exports,"PermissionFlag",{enumerable:!0,get:function(){return _util.PermissionFlag}}),Object.defineProperty(exports,"PixelsPerInch",{enumerable:!0,get:function(){return _display_utils.PixelsPerInch}}),Object.defineProperty(exports,"PromiseCapability",{enumerable:!0,get:function(){return _util.PromiseCapability}}),Object.defineProperty(exports,"RenderingCancelledException",{enumerable:!0,get:function(){return _display_utils.RenderingCancelledException}}),Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _svg.SVGGraphics}}),Object.defineProperty(exports,"UnexpectedResponseException",{enumerable:!0,get:function(){return _util.UnexpectedResponseException}}),Object.defineProperty(exports,"Util",{enumerable:!0,get:function(){return _util.Util}}),Object.defineProperty(exports,"VerbosityLevel",{enumerable:!0,get:function(){return _util.VerbosityLevel}}),Object.defineProperty(exports,"XfaLayer",{enumerable:!0,get:function(){return _xfa_layer.XfaLayer}}),Object.defineProperty(exports,"build",{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _util.createValidAbsoluteUrl}}),Object.defineProperty(exports,"getDocument",{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports,"getFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils.getFilenameFromUrl}}),Object.defineProperty(exports,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils.getPdfFilenameFromUrl}}),Object.defineProperty(exports,"getXfaPageViewport",{enumerable:!0,get:function(){return _display_utils.getXfaPageViewport}}),Object.defineProperty(exports,"isDataScheme",{enumerable:!0,get:function(){return _display_utils.isDataScheme}}),Object.defineProperty(exports,"isPdfFile",{enumerable:!0,get:function(){return _display_utils.isPdfFile}}),Object.defineProperty(exports,"loadScript",{enumerable:!0,get:function(){return _display_utils.loadScript}}),Object.defineProperty(exports,"normalizeUnicode",{enumerable:!0,get:function(){return _util.normalizeUnicode}}),Object.defineProperty(exports,"renderTextLayer",{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports,"setLayerDimensions",{enumerable:!0,get:function(){return _display_utils.setLayerDimensions}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return _util.shadow}}),Object.defineProperty(exports,"updateTextLayer",{enumerable:!0,get:function(){return _text_layer.updateTextLayer}}),Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return _api.version}});var _util=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(6),_text_layer=__w_pdfjs_require__(26),_annotation_editor_layer=__w_pdfjs_require__(27),_tools=__w_pdfjs_require__(5),_annotation_layer=__w_pdfjs_require__(30),_worker_options=__w_pdfjs_require__(14),_svg=__w_pdfjs_require__(33),_xfa_layer=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})()))},"./node_modules/pdfjs-dist/web/pdf_viewer.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _classPrivateFieldSet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js").default,_asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/asyncToGenerator.js").default,_classPrivateMethodInitSpec=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js").default,_classPrivateFieldInitSpec=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js").default,_classStaticPrivateMethodGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classStaticPrivateMethodGet.js").default,_classPrivateMethodGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateMethodGet.js").default,_classPrivateFieldGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js").default;!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(globalThis,(()=>(()=>{"use strict";var __webpack_modules__=[,(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleLinkService=exports.PDFLinkService=exports.LinkTarget=void 0;var _ui_utils=__w_pdfjs_require__(2);const LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function addLinkAttributes(link,{url,target,rel,enabled=!0}={}){if(!url||"string"!=typeof url)throw new Error('A valid "url" parameter must provided.');const urlNullRemoved=(0,_ui_utils.removeNullCharacters)(url);enabled?link.href=link.title=urlNullRemoved:(link.href="",link.title=`Disabled: ${urlNullRemoved}`,link.onclick=()=>!1);let targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr,link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"}exports.LinkTarget=LinkTarget;var _pagesRefCache=new WeakMap,_goToDestinationHelper=new WeakSet;class PDFLinkService{constructor({eventBus,externalLinkTarget=null,externalLinkRel=null,ignoreDestinationZoom=!1}={}){_classPrivateMethodInitSpec(this,_goToDestinationHelper),_classPrivateFieldInitSpec(this,_pagesRefCache,{writable:!0,value:new Map}),this.eventBus=eventBus,this.externalLinkTarget=externalLinkTarget,this.externalLinkRel=externalLinkRel,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ignoreDestinationZoom,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(pdfDocument,baseUrl=null){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,_classPrivateFieldGet(this,_pagesRefCache).clear()}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setHistory(pdfHistory){this.pdfHistory=pdfHistory}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(value){this.pdfViewer.currentPageNumber=value}get rotation(){return this.pdfViewer.pagesRotation}set rotation(value){this.pdfViewer.pagesRotation=value}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}goToDestination(dest){var _this=this;return _asyncToGenerator((function*(){if(!_this.pdfDocument)return;let namedDest,explicitDest;"string"==typeof dest?(namedDest=dest,explicitDest=yield _this.pdfDocument.getDestination(dest)):(namedDest=null,explicitDest=yield dest),Array.isArray(explicitDest)?_classPrivateMethodGet(_this,_goToDestinationHelper,_goToDestinationHelper2).call(_this,dest,namedDest,explicitDest):console.error(`PDFLinkService.goToDestination: "${explicitDest}" is not a valid destination array, for dest="${dest}".`)}))()}goToPage(val){if(!this.pdfDocument)return;const pageNumber="string"==typeof val&&this.pdfViewer.pageLabelToPageNumber(val)||0|val;Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(pageNumber)),this.pdfViewer.scrollPageIntoView({pageNumber})):console.error(`PDFLinkService.goToPage: "${val}" is not a valid page.`)}addLinkAttributes(link,url,newWindow=!1){addLinkAttributes(link,{url,target:newWindow?LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(dest){if("string"==typeof dest){if(dest.length>0)return this.getAnchorUrl("#"+escape(dest))}else if(Array.isArray(dest)){const str=JSON.stringify(dest);if(str.length>0)return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}getAnchorUrl(anchor){return this.baseUrl?this.baseUrl+anchor:anchor}setHash(hash){if(!this.pdfDocument)return;let pageNumber,dest;if(hash.includes("=")){const params=(0,_ui_utils.parseQueryString)(hash);if(params.has("search")){const query=params.get("search").replaceAll('"',""),phrase="true"===params.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:phrase?query:query.match(/\S+/g)})}if(params.has("page")&&(pageNumber=0|params.get("page")||1),params.has("zoom")){const zoomArgs=params.get("zoom").split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error(`PDFLinkService.setHash: "${zoomArg}" is not a valid zoom value.`):dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),params.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:params.get("pagemode")}),params.has("nameddest")&&this.goToDestination(params.get("nameddest"))}else{dest=unescape(hash);try{dest=JSON.parse(dest),Array.isArray(dest)||(dest=dest.toString())}catch(ex){}if("string"==typeof dest||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,dest))return void this.goToDestination(dest);console.error(`PDFLinkService.setHash: "${unescape(hash)}" is not a valid destination.`)}}executeNamedAction(action){switch(action){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action})}executeSetOCGState(action){var _this2=this;return _asyncToGenerator((function*(){const pdfDocument=_this2.pdfDocument,optionalContentConfig=yield _this2.pdfViewer.optionalContentConfigPromise;if(pdfDocument!==_this2.pdfDocument)return;let operator;for(const elem of action.state){switch(elem){case"ON":case"OFF":case"Toggle":operator=elem;continue}switch(operator){case"ON":optionalContentConfig.setVisibility(elem,!0);break;case"OFF":optionalContentConfig.setVisibility(elem,!1);break;case"Toggle":const group=optionalContentConfig.getGroup(elem);group&&optionalContentConfig.setVisibility(elem,!group.visible)}}_this2.pdfViewer.optionalContentConfigPromise=Promise.resolve(optionalContentConfig)}))()}cachePageRef(pageNum,pageRef){if(!pageRef)return;const refStr=0===pageRef.gen?`${pageRef.num}R`:`${pageRef.num}R${pageRef.gen}`;_classPrivateFieldGet(this,_pagesRefCache).set(refStr,pageNum)}_cachedPageNumber(pageRef){if(!pageRef)return null;const refStr=0===pageRef.gen?`${pageRef.num}R`:`${pageRef.num}R${pageRef.gen}`;return _classPrivateFieldGet(this,_pagesRefCache).get(refStr)||null}}function _goToDestinationHelper2(rawDest,namedDest=null,explicitDest){const destRef=explicitDest[0];let pageNumber;if("object"==typeof destRef&&null!==destRef){if(pageNumber=this._cachedPageNumber(destRef),!pageNumber)return void this.pdfDocument.getPageIndex(destRef).then((pageIndex=>{this.cachePageRef(pageIndex+1,destRef),_classPrivateMethodGet(this,_goToDestinationHelper,_goToDestinationHelper2).call(this,rawDest,namedDest,explicitDest)})).catch((()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${destRef}" is not a valid page reference, for dest="${rawDest}".`)}))}else{if(!Number.isInteger(destRef))return void console.error(`PDFLinkService.#goToDestinationHelper: "${destRef}" is not a valid destination reference, for dest="${rawDest}".`);pageNumber=destRef+1}!pageNumber||pageNumber<1||pageNumber>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${pageNumber}" is not a valid page number, for dest="${rawDest}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest,explicitDest,pageNumber})),this.pdfViewer.scrollPageIntoView({pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function _isValidExplicitDestination(dest){if(!Array.isArray(dest))return!1;const destLength=dest.length;if(destLength<2)return!1;const page=dest[0];if(!("object"==typeof page&&Number.isInteger(page.num)&&Number.isInteger(page.gen)||Number.isInteger(page)&&page>=0))return!1;const zoom=dest[1];if("object"!=typeof zoom||"string"!=typeof zoom.name)return!1;let allowNull=!0;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(let i=2;i<destLength;i++){const param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}exports.PDFLinkService=PDFLinkService;exports.SimpleLinkService=class SimpleLinkService{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(value){}get rotation(){return 0}set rotation(value){}get isInPresentationMode(){return!1}goToDestination(dest){return _asyncToGenerator((function*(){}))()}goToPage(val){}addLinkAttributes(link,url,newWindow=!1){addLinkAttributes(link,{url,enabled:this.externalLinkEnabled})}getDestinationHash(dest){return"#"}getAnchorUrl(hash){return"#"}setHash(hash){}executeNamedAction(action){}executeSetOCGState(action){}cachePageRef(pageNum,pageRef){}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.animationStarted=exports.VERTICAL_PADDING=exports.UNKNOWN_SCALE=exports.TextLayerMode=exports.SpreadMode=exports.SidebarView=exports.ScrollMode=exports.SCROLLBAR_PADDING=exports.RenderingStates=exports.ProgressBar=exports.PresentationModeState=exports.OutputScale=exports.MIN_SCALE=exports.MAX_SCALE=exports.MAX_AUTO_SCALE=exports.DEFAULT_SCALE_VALUE=exports.DEFAULT_SCALE_DELTA=exports.DEFAULT_SCALE=exports.CursorTool=exports.AutoPrintRegExp=void 0,exports.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(layout){let scrollMode=ScrollMode.VERTICAL,spreadMode=SpreadMode.NONE;switch(layout){case"SinglePage":scrollMode=ScrollMode.PAGE;break;case"OneColumn":break;case"TwoPageLeft":scrollMode=ScrollMode.PAGE;case"TwoColumnLeft":spreadMode=SpreadMode.ODD;break;case"TwoPageRight":scrollMode=ScrollMode.PAGE;case"TwoColumnRight":spreadMode=SpreadMode.EVEN}return{scrollMode,spreadMode}},exports.apiPageModeToSidebarView=function apiPageModeToSidebarView(mode){switch(mode){case"UseNone":return SidebarView.NONE;case"UseThumbs":return SidebarView.THUMBS;case"UseOutlines":return SidebarView.OUTLINE;case"UseAttachments":return SidebarView.ATTACHMENTS;case"UseOC":return SidebarView.LAYERS}return SidebarView.NONE},exports.approximateFraction=function approximateFraction(x){if(Math.floor(x)===x)return[x,1];const xinv=1/x;if(xinv>8)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv];const x_=x>1?xinv:x;let result,a=0,b=1,c=1,d=1;for(;;){const p=a+c,q=b+d;if(q>8)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result},exports.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,exports.binarySearchFirstItem=binarySearchFirstItem,exports.docStyle=void 0,exports.getActiveOrFocusedElement=function getActiveOrFocusedElement(){let curRoot=document,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");for(;curActiveOrFocused?.shadowRoot;)curRoot=curActiveOrFocused.shadowRoot,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");return curActiveOrFocused},exports.getPageSizeInches=function getPageSizeInches({view,userUnit,rotate}){const[x1,y1,x2,y2]=view,changeOrientation=rotate%180!=0,width=(x2-x1)/72*userUnit,height=(y2-y1)/72*userUnit;return{width:changeOrientation?height:width,height:changeOrientation?width:height}},exports.getVisibleElements=function getVisibleElements({scrollEl,views,sortByVisibility=!1,horizontal=!1,rtl=!1}){const top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;const visible=[],ids=new Set,numViews=views.length;let firstVisibleElementInd=binarySearchFirstItem(views,horizontal?function isElementNextAfterViewHorizontally(view){const element=view.div,elementLeft=element.offsetLeft+element.clientLeft,elementRight=elementLeft+element.clientWidth;return rtl?elementLeft<right:elementRight>left}:function isElementBottomAfterViewTop(view){const element=view.div;return element.offsetTop+element.clientTop+element.clientHeight>top});firstVisibleElementInd>0&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=backtrackBeforeAllVisibleElements(firstVisibleElementInd,views,top));let lastEdge=horizontal?right:-1;for(let i=firstVisibleElementInd;i<numViews;i++){const view=views[i],element=view.div,currentWidth=element.offsetLeft+element.clientLeft,currentHeight=element.offsetTop+element.clientTop,viewWidth=element.clientWidth,viewHeight=element.clientHeight,viewRight=currentWidth+viewWidth,viewBottom=currentHeight+viewHeight;if(-1===lastEdge)viewBottom>=bottom&&(lastEdge=viewBottom);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right)continue;const hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom),fractionWidth=(viewWidth-(Math.max(0,left-currentWidth)+Math.max(0,viewRight-right)))/viewWidth,percent=(viewHeight-hiddenHeight)/viewHeight*fractionWidth*100|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view,percent,widthPercent:100*fractionWidth|0}),ids.add(view.id)}const first=visible[0],last=visible.at(-1);sortByVisibility&&visible.sort((function(a,b){const pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}));return{first,last,views:visible,ids}},exports.isPortraitOrientation=function isPortraitOrientation(size){return size.width<=size.height},exports.isValidRotation=function isValidRotation(angle){return Number.isInteger(angle)&&angle%90==0},exports.isValidScrollMode=function isValidScrollMode(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN},exports.isValidSpreadMode=function isValidSpreadMode(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN},exports.noContextMenuHandler=function noContextMenuHandler(evt){evt.preventDefault()},exports.normalizeWheelEventDelta=function normalizeWheelEventDelta(evt){const deltaMode=evt.deltaMode;let delta=normalizeWheelEventDirection(evt);deltaMode===WheelEvent.DOM_DELTA_PIXEL?delta/=900:deltaMode===WheelEvent.DOM_DELTA_LINE&&(delta/=30);return delta},exports.normalizeWheelEventDirection=normalizeWheelEventDirection,exports.parseQueryString=function parseQueryString(query){const params=new Map;for(const[key,value]of new URLSearchParams(query))params.set(key.toLowerCase(),value);return params},exports.removeNullCharacters=function removeNullCharacters(str,replaceInvisible=!1){if("string"!=typeof str)return console.error("The argument must be a string."),str;replaceInvisible&&(str=str.replaceAll(InvisibleCharactersRegExp," "));return str.replaceAll("\0","")},exports.roundToDivide=function roundToDivide(x,div){const r=x%div;return 0===r?x:Math.round(x-r+div)},exports.scrollIntoView=function scrollIntoView(element,spot,scrollMatches=!1){let parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");let offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||scrollMatches&&(parent.classList.contains("markedContent")||"hidden"===getComputedStyle(parent).overflow);)if(offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX));parent.scrollTop=offsetY},exports.toggleCheckedBtn=function toggleCheckedBtn(button,toggle,view=null){button.classList.toggle("toggled",toggle),button.setAttribute("aria-checked",toggle),view?.classList.toggle("hidden",!toggle)},exports.toggleExpandedBtn=function toggleExpandedBtn(button,toggle,view=null){button.classList.toggle("toggled",toggle),button.setAttribute("aria-expanded",toggle),view?.classList.toggle("hidden",!toggle)},exports.watchScroll=function watchScroll(viewAreaElement,callback){const debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame((function viewAreaElementScrolled(){rAF=null;const currentX=viewAreaElement.scrollLeft,lastX=state.lastX;currentX!==lastX&&(state.right=currentX>lastX),state.lastX=currentX;const currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)})))},state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};let rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state};exports.DEFAULT_SCALE_VALUE="auto";exports.DEFAULT_SCALE=1;exports.DEFAULT_SCALE_DELTA=1.1;exports.MIN_SCALE=.1;exports.MAX_SCALE=10;exports.UNKNOWN_SCALE=0;exports.MAX_AUTO_SCALE=1.25;exports.SCROLLBAR_PADDING=40;exports.VERTICAL_PADDING=5;exports.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};exports.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};exports.SidebarView=SidebarView;exports.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};const ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};exports.ScrollMode=ScrollMode;const SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};exports.SpreadMode=SpreadMode;exports.CursorTool={SELECT:0,HAND:1,ZOOM:2};exports.AutoPrintRegExp=/\bprint\s*\(/;exports.OutputScale=class OutputScale{constructor(){const pixelRatio=window.devicePixelRatio||1;this.sx=pixelRatio,this.sy=pixelRatio}get scaled(){return 1!==this.sx||1!==this.sy}};const InvisibleCharactersRegExp=/[\x01-\x1F]/g;function binarySearchFirstItem(items,condition,start=0){let minIndex=start,maxIndex=items.length-1;if(maxIndex<0||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){const currentIndex=minIndex+maxIndex>>1;condition(items[currentIndex])?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;let elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;pageTop>=top&&(elt=views[index-1].div,pageTop=elt.offsetTop+elt.clientTop);for(let i=index-2;i>=0&&(elt=views[i].div,!(elt.offsetTop+elt.clientTop+elt.clientHeight<=pageTop));--i)index=i;return index}function normalizeWheelEventDirection(evt){let delta=Math.hypot(evt.deltaX,evt.deltaY);const angle=Math.atan2(evt.deltaY,evt.deltaX);return-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta),delta}const animationStarted=new Promise((function(resolve){window.requestAnimationFrame(resolve)}));exports.animationStarted=animationStarted;const docStyle=document.documentElement.style;exports.docStyle=docStyle;var _classList=new WeakMap,_disableAutoFetchTimeout=new WeakMap,_percent=new WeakMap,_style=new WeakMap,_visible=new WeakMap;exports.ProgressBar=class ProgressBar{constructor(bar){_classPrivateFieldInitSpec(this,_classList,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_disableAutoFetchTimeout,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_percent,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_style,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_visible,{writable:!0,value:!0}),_classPrivateFieldSet(this,_classList,bar.classList),_classPrivateFieldSet(this,_style,bar.style)}get percent(){return _classPrivateFieldGet(this,_percent)}set percent(val){_classPrivateFieldSet(this,_percent,function clamp(v,min,max){return Math.min(Math.max(v,min),max)}(val,0,100)),isNaN(val)?_classPrivateFieldGet(this,_classList).add("indeterminate"):(_classPrivateFieldGet(this,_classList).remove("indeterminate"),_classPrivateFieldGet(this,_style).setProperty("--progressBar-percent",`${_classPrivateFieldGet(this,_percent)}%`))}setWidth(viewer){if(!viewer)return;const scrollbarWidth=viewer.parentNode.offsetWidth-viewer.offsetWidth;scrollbarWidth>0&&_classPrivateFieldGet(this,_style).setProperty("--progressBar-end-offset",`${scrollbarWidth}px`)}setDisableAutoFetch(delay=5e3){isNaN(_classPrivateFieldGet(this,_percent))||(_classPrivateFieldGet(this,_disableAutoFetchTimeout)&&clearTimeout(_classPrivateFieldGet(this,_disableAutoFetchTimeout)),this.show(),_classPrivateFieldSet(this,_disableAutoFetchTimeout,setTimeout((()=>{_classPrivateFieldSet(this,_disableAutoFetchTimeout,null),this.hide()}),delay)))}hide(){_classPrivateFieldGet(this,_visible)&&(_classPrivateFieldSet(this,_visible,!1),_classPrivateFieldGet(this,_classList).add("hidden"))}show(){_classPrivateFieldGet(this,_visible)||(_classPrivateFieldSet(this,_visible,!0),_classPrivateFieldGet(this,_classList).remove("hidden"))}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_l10n_utils=__w_pdfjs_require__(5),_ui_utils=__w_pdfjs_require__(2),_numAnnotations=new WeakMap,_onPresentationModeChanged=new WeakMap,_updatePresentationModeState=new WeakSet;function _updatePresentationModeState2(state){if(!this.div)return;let disableFormElements=!1;switch(state){case _ui_utils.PresentationModeState.FULLSCREEN:disableFormElements=!0;break;case _ui_utils.PresentationModeState.NORMAL:break;default:return}for(const section of this.div.childNodes)section.hasAttribute("data-internal-link")||(section.inert=disableFormElements)}exports.AnnotationLayerBuilder=class AnnotationLayerBuilder{constructor({pageDiv,pdfPage,linkService,downloadManager,annotationStorage=null,imageResourcesPath="",renderForms=!0,l10n=_l10n_utils.NullL10n,enableScripting=!1,hasJSActionsPromise=null,fieldObjectsPromise=null,annotationCanvasMap=null,accessibilityManager=null}){_classPrivateMethodInitSpec(this,_updatePresentationModeState),_classPrivateFieldInitSpec(this,_numAnnotations,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_onPresentationModeChanged,{writable:!0,value:null}),this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.linkService=linkService,this.downloadManager=downloadManager,this.imageResourcesPath=imageResourcesPath,this.renderForms=renderForms,this.l10n=l10n,this.annotationStorage=annotationStorage,this.enableScripting=enableScripting,this._hasJSActionsPromise=hasJSActionsPromise||Promise.resolve(!1),this._fieldObjectsPromise=fieldObjectsPromise||Promise.resolve(null),this._annotationCanvasMap=annotationCanvasMap,this._accessibilityManager=accessibilityManager,this.div=null,this._cancelled=!1,this._eventBus=linkService.eventBus}render(viewport,intent="display"){var _this3=this;return _asyncToGenerator((function*(){if(_this3.div){if(_this3._cancelled||0===_classPrivateFieldGet(_this3,_numAnnotations))return;return void _pdfjsLib.AnnotationLayer.update({viewport:viewport.clone({dontFlip:!0}),div:_this3.div,annotationCanvasMap:_this3._annotationCanvasMap})}const[annotations,hasJSActions,fieldObjects]=yield Promise.all([_this3.pdfPage.getAnnotations({intent}),_this3._hasJSActionsPromise,_this3._fieldObjectsPromise]);_this3._cancelled||(_classPrivateFieldSet(_this3,_numAnnotations,annotations.length),_this3.div=document.createElement("div"),_this3.div.className="annotationLayer",_this3.pageDiv.append(_this3.div),0!==_classPrivateFieldGet(_this3,_numAnnotations)?(_pdfjsLib.AnnotationLayer.render({viewport:viewport.clone({dontFlip:!0}),div:_this3.div,annotations,page:_this3.pdfPage,imageResourcesPath:_this3.imageResourcesPath,renderForms:_this3.renderForms,linkService:_this3.linkService,downloadManager:_this3.downloadManager,annotationStorage:_this3.annotationStorage,enableScripting:_this3.enableScripting,hasJSActions,fieldObjects,annotationCanvasMap:_this3._annotationCanvasMap,accessibilityManager:_this3._accessibilityManager}),_this3.l10n.translate(_this3.div),_this3.linkService.isInPresentationMode&&_classPrivateMethodGet(_this3,_updatePresentationModeState,_updatePresentationModeState2).call(_this3,_ui_utils.PresentationModeState.FULLSCREEN),_classPrivateFieldGet(_this3,_onPresentationModeChanged)||(_classPrivateFieldSet(_this3,_onPresentationModeChanged,(evt=>{_classPrivateMethodGet(_this3,_updatePresentationModeState,_updatePresentationModeState2).call(_this3,evt.state)})),_this3._eventBus?._on("presentationmodechanged",_classPrivateFieldGet(_this3,_onPresentationModeChanged)))):_this3.hide())}))()}cancel(){this._cancelled=!0,_classPrivateFieldGet(this,_onPresentationModeChanged)&&(this._eventBus?._off("presentationmodechanged",_classPrivateFieldGet(this,_onPresentationModeChanged)),_classPrivateFieldSet(this,_onPresentationModeChanged,null))}hide(){this.div&&(this.div.hidden=!0)}}},module=>{let pdfjsLib;pdfjsLib="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:__webpack_require__("./node_modules/pdfjs-dist/build/pdf.js"),module.exports=pdfjsLib},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NullL10n=void 0,exports.fixupLangCode=function fixupLangCode(langCode){return PARTIAL_LANG_CODES[langCode?.toLowerCase()]||langCode},exports.getL10nFallback=getL10nFallback;const DEFAULT_L10N_STRINGS={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};function getL10nFallback(key,args){switch(key){case"find_match_count":key=`find_match_count[${1===args.total?"one":"other"}]`;break;case"find_match_count_limit":key=`find_match_count_limit[${1===args.limit?"one":"other"}]`}return DEFAULT_L10N_STRINGS[key]||""}DEFAULT_L10N_STRINGS.print_progress_percent="{{progress}}%";const PARTIAL_LANG_CODES={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};const NullL10n={getLanguage:()=>_asyncToGenerator((function*(){return"en-us"}))(),getDirection:()=>_asyncToGenerator((function*(){return"ltr"}))(),get:(key,args=null,fallback=getL10nFallback(key,args))=>_asyncToGenerator((function*(){return function formatL10nValue(text,args){return args?text.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((all,name)=>name in args?args[name]:"{{"+name+"}}")):text}(fallback,args)}))(),translate:element=>_asyncToGenerator((function*(){}))()};exports.NullL10n=NullL10n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DownloadManager=void 0;var _pdfjsLib=__w_pdfjs_require__(4);function download(blobUrl,filename){const a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=blobUrl,a.target="_parent","download"in a&&(a.download=filename),(document.body||document.documentElement).append(a),a.click(),a.remove()}var _openBlobUrls=new WeakMap;exports.DownloadManager=class DownloadManager{constructor(){_classPrivateFieldInitSpec(this,_openBlobUrls,{writable:!0,value:new WeakMap})}downloadUrl(url,filename,_options){(0,_pdfjsLib.createValidAbsoluteUrl)(url,"http://example.com")?download(url+"#pdfjs.action=download",filename):console.error(`downloadUrl - not a valid URL: ${url}`)}downloadData(data,filename,contentType){download(URL.createObjectURL(new Blob([data],{type:contentType})),filename)}openOrDownloadData(element,data,filename){const contentType=(0,_pdfjsLib.isPdfFile)(filename)?"application/pdf":"";return this.downloadData(data,filename,contentType),!1}download(blob,url,filename,_options){download(URL.createObjectURL(blob),filename)}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaitOnType=exports.EventBus=exports.AutomationEventBus=void 0,exports.waitOnEventOrTimeout=function waitOnEventOrTimeout({target,name,delay=0}){return new Promise((function(resolve,reject){if("object"!=typeof target||!name||"string"!=typeof name||!(Number.isInteger(delay)&&delay>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(type){target instanceof EventBus?target._off(name,eventHandler):target.removeEventListener(name,eventHandler),timeout&&clearTimeout(timeout),resolve(type)}const eventHandler=handler.bind(null,WaitOnType.EVENT);target instanceof EventBus?target._on(name,eventHandler):target.addEventListener(name,eventHandler);const timeoutHandler=handler.bind(null,WaitOnType.TIMEOUT),timeout=setTimeout(timeoutHandler,delay)}))};const WaitOnType={EVENT:"event",TIMEOUT:"timeout"};exports.WaitOnType=WaitOnType;var _listeners=new WeakMap;class EventBus{constructor(){_classPrivateFieldInitSpec(this,_listeners,{writable:!0,value:Object.create(null)})}on(eventName,listener,options=null){this._on(eventName,listener,{external:!0,once:options?.once})}off(eventName,listener,options=null){this._off(eventName,listener,{external:!0,once:options?.once})}dispatch(eventName,data){const eventListeners=_classPrivateFieldGet(this,_listeners)[eventName];if(!eventListeners||0===eventListeners.length)return;let externalListeners;for(const{listener,external,once}of eventListeners.slice(0))once&&this._off(eventName,listener),external?(externalListeners||=[]).push(listener):listener(data);if(externalListeners){for(const listener of externalListeners)listener(data);externalListeners=null}}_on(eventName,listener,options=null){(_classPrivateFieldGet(this,_listeners)[eventName]||=[]).push({listener,external:!0===options?.external,once:!0===options?.once})}_off(eventName,listener,options=null){const eventListeners=_classPrivateFieldGet(this,_listeners)[eventName];if(eventListeners)for(let i=0,ii=eventListeners.length;i<ii;i++)if(eventListeners[i].listener===listener)return void eventListeners.splice(i,1)}}exports.EventBus=EventBus;exports.AutomationEventBus=class AutomationEventBus extends EventBus{dispatch(eventName,data){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericL10n=void 0,__w_pdfjs_require__(9);var _l10n_utils=__w_pdfjs_require__(5);const webL10n=document.webL10n;exports.GenericL10n=class GenericL10n{constructor(lang){this._lang=lang,this._ready=new Promise(((resolve,reject)=>{webL10n.setLanguage((0,_l10n_utils.fixupLangCode)(lang),(()=>{resolve(webL10n)}))}))}getLanguage(){var _this4=this;return _asyncToGenerator((function*(){return(yield _this4._ready).getLanguage()}))()}getDirection(){var _this5=this;return _asyncToGenerator((function*(){return(yield _this5._ready).getDirection()}))()}get(key,args=null,fallback=(0,_l10n_utils.getL10nFallback)(key,args)){var _this6=this;return _asyncToGenerator((function*(){return(yield _this6._ready).get(key,args,fallback)}))()}translate(element){var _this7=this;return _asyncToGenerator((function*(){return(yield _this7._ready).translate(element)}))()}}},()=>{document.webL10n=function(window,document,undefined){var gL10nData={},gTextData="",gTextProp="textContent",gLanguage="",gMacros={},gReadyState="loading",gAsyncResourceLoading=!0;function xhrLoadText(url,onSuccess,onFailure){onSuccess=onSuccess||function _onSuccess(data){},onFailure=onFailure||function _onFailure(){};var xhr=new XMLHttpRequest;xhr.open("GET",url,gAsyncResourceLoading),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=utf-8"),xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||0===xhr.status?onSuccess(xhr.responseText):onFailure())},xhr.onerror=onFailure,xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function evalString(text){return text.lastIndexOf("\\")<0?text:text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(href,(function(response){gTextData+=response,function parseProperties(text,parsedPropertiesCallback){var dictionary={},reBlank=/^\s*|\s*$/,reComment=/^\s*#|^\s*$/,reSection=/^\s*\[(.*)\]\s*$/,reImport=/^\s*@import\s+url\((.*)\)\s*$/i,reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax,parsedRawLinesCallback){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/),currentLang="*",genericLang=lang.split("-",1)[0],skipLang=!1,match="";!function nextEntry(){for(;;){if(!entries.length)return void parsedRawLinesCallback();var line=entries.shift();if(!reComment.test(line)){if(extendedSyntax){if(match=reSection.exec(line)){currentLang=match[1].toLowerCase(),skipLang="*"!==currentLang&&currentLang!==lang&&currentLang!==genericLang;continue}if(skipLang)continue;if(match=reImport.exec(line))return void loadImport(baseURL+match[1],nextEntry)}var tmp=line.match(reSplit);tmp&&3==tmp.length&&(dictionary[tmp[1]]=evalString(tmp[2]))}}}()}function loadImport(url,callback){xhrLoadText(url,(function(content){parseRawLines(content,!1,callback)}),(function(){console.warn(url+" not found."),callback()}))}parseRawLines(text,!0,(function(){parsedPropertiesCallback(dictionary)}))}(response,(function(data){for(var key in data){var id,prop,index=key.lastIndexOf(".");index>0?(id=key.substring(0,index),prop=key.substring(index+1)):(id=key,prop=gTextProp),gL10nData[id]||(gL10nData[id]={}),gL10nData[id][prop]=data[key]}successCallback&&successCallback()}))}),failureCallback)}function loadLocale(lang,callback){lang&&(lang=lang.toLowerCase()),callback=callback||function _callback(){},function clear(){gL10nData={},gTextData="",gLanguage=""}(),gLanguage=lang;var langLinks=function getL10nResourceLinks(){return document.querySelectorAll('link[type="application/l10n"]')}(),langCount=langLinks.length;if(0!==langCount){var onResourceLoaded,gResourceCount=0;onResourceLoaded=function(){++gResourceCount>=langCount&&(callback(),gReadyState="complete")};for(var i=0;i<langCount;i++){new L10nResourceLink(langLinks[i]).load(lang,onResourceLoaded)}}else{var dict=function getL10nDictionary(){var script=document.querySelector('script[type="application/l10n"]');return script?JSON.parse(script.innerHTML):null}();if(dict&&dict.locales&&dict.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(gL10nData=dict.locales[lang])){var defaultLocale=dict.default_locale.toLowerCase();for(var anyCaseLang in dict.locales){if((anyCaseLang=anyCaseLang.toLowerCase())===lang){gL10nData=dict.locales[lang];break}anyCaseLang===defaultLocale&&(gL10nData=dict.locales[defaultLocale])}}callback()}else console.log("no resource to load, early way out");gReadyState="complete"}function L10nResourceLink(link){var href=link.href;this.load=function(lang,callback){parseResource(href,lang,callback,(function(){console.warn(href+" not found."),console.warn('"'+lang+'" resource not found'),gLanguage="",callback()}))}}}function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){if(console.warn("#"+key+" is undefined."),!fallback)return null;data=fallback}var rv={};for(var prop in data){var str=data[prop];str=substArguments(str=substIndexes(str,args,key,prop),args,key),rv[prop]=str}return rv}function substIndexes(str,args,key,prop){var reMatch=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(str);if(!reMatch||!reMatch.length)return str;var param,macroName=reMatch[1],paramName=reMatch[2];(args&&paramName in args?param=args[paramName]:paramName in gL10nData&&(param=gL10nData[paramName]),macroName in gMacros)&&(str=(0,gMacros[macroName])(str,param,key,prop));return str}function substArguments(str,args,key){return str.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(matched_text,arg){return args&&arg in args?args[arg]:arg in gL10nData?gL10nData[arg]:(console.log("argument {{"+arg+"}} for #"+key+" is undefined."),matched_text)}))}function translateElement(element){var l10n=function getL10nAttributes(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id"),l10nArgs=element.getAttribute("data-l10n-args"),args={};if(l10nArgs)try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}return{id:l10nId,args}}(element);if(l10n.id){var data=getL10nData(l10n.id,l10n.args);if(data){if(data[gTextProp]){if(0===function getChildElementCount(element){if(element.children)return element.children.length;if(void 0!==element.childElementCount)return element.childElementCount;for(var count=0,i=0;i<element.childNodes.length;i++)count+=1===element.nodeType?1:0;return count}(element))element[gTextProp]=data[gTextProp];else{for(var children=element.childNodes,found=!1,i=0,l=children.length;i<l;i++)3===children[i].nodeType&&/\S/.test(children[i].nodeValue)&&(found?children[i].nodeValue="":(children[i].nodeValue=data[gTextProp],found=!0));if(!found){var textNode=document.createTextNode(data[gTextProp]);element.prepend(textNode)}}delete data[gTextProp]}for(var k in data)element[k]=data[k]}else console.warn("#"+l10n.id+" is undefined.")}}return gMacros.plural=function(str,param,key,prop){var n=parseFloat(param);if(isNaN(n))return str;if(prop!=gTextProp)return str;gMacros._pluralRules||(gMacros._pluralRules=function getPluralRules(lang){function isIn(n,list){return-1!==list.indexOf(n)}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){return isBetween(n%100,3,10)?"few":0===n?"zero":isBetween(n%100,11,99)?"many":2==n?"two":1==n?"one":"other"},2:function(n){return 0!==n&&n%10==0?"many":2==n?"two":1==n?"one":"other"},3:function(n){return 1==n?"one":"other"},4:function(n){return isBetween(n,0,1)?"one":"other"},5:function(n){return isBetween(n,0,2)&&2!=n?"one":"other"},6:function(n){return 0===n?"zero":n%10==1&&n%100!=11?"one":"other"},7:function(n){return 2==n?"two":1==n?"one":"other"},8:function(n){return isBetween(n,3,6)?"few":isBetween(n,7,10)?"many":2==n?"two":1==n?"one":"other"},9:function(n){return 0===n||1!=n&&isBetween(n%100,1,19)?"few":1==n?"one":"other"},10:function(n){return isBetween(n%10,2,9)&&!isBetween(n%100,11,19)?"few":n%10!=1||isBetween(n%100,11,19)?"other":"one"},11:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":n%10==0||isBetween(n%10,5,9)||isBetween(n%100,11,14)?"many":n%10==1&&n%100!=11?"one":"other"},12:function(n){return isBetween(n,2,4)?"few":1==n?"one":"other"},13:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":1!=n&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14)?"many":1==n?"one":"other"},14:function(n){return isBetween(n%100,3,4)?"few":n%100==2?"two":n%100==1?"one":"other"},15:function(n){return 0===n||isBetween(n%100,2,10)?"few":isBetween(n%100,11,19)?"many":1==n?"one":"other"},16:function(n){return n%10==1&&11!=n?"one":"other"},17:function(n){return 3==n?"few":0===n?"zero":6==n?"many":2==n?"two":1==n?"one":"other"},18:function(n){return 0===n?"zero":isBetween(n,0,2)&&0!==n&&2!=n?"one":"other"},19:function(n){return isBetween(n,2,10)?"few":isBetween(n,0,1)?"one":"other"},20:function(n){return!isBetween(n%10,3,4)&&n%10!=9||isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)?n%1e6==0&&0!==n?"many":n%10!=2||isIn(n%100,[12,72,92])?n%10!=1||isIn(n%100,[11,71,91])?"other":"one":"two":"few"},21:function(n){return 0===n?"zero":1==n?"one":"other"},22:function(n){return isBetween(n,0,1)||isBetween(n,11,99)?"one":"other"},23:function(n){return isBetween(n%10,1,2)||n%20==0?"one":"other"},24:function(n){return isBetween(n,3,10)||isBetween(n,13,19)?"few":isIn(n,[2,12])?"two":isIn(n,[1,11])?"one":"other"}},index={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[lang.replace(/-.*$/,"")];return index in pluralRules?pluralRules[index]:(console.warn("plural form unknown for ["+lang+"]"),function(){return"other"})}(gLanguage));var index="["+gMacros._pluralRules(n)+"]";return 0===n&&key+"[zero]"in gL10nData?str=gL10nData[key+"[zero]"][prop]:1==n&&key+"[one]"in gL10nData?str=gL10nData[key+"[one]"][prop]:2==n&&key+"[two]"in gL10nData?str=gL10nData[key+"[two]"][prop]:key+index in gL10nData?str=gL10nData[key+index][prop]:key+"[other]"in gL10nData&&(str=gL10nData[key+"[other]"][prop]),str},{get:function(key,args,fallbackString){var fallback,index=key.lastIndexOf("."),prop=gTextProp;index>0&&(prop=key.substring(index+1),key=key.substring(0,index)),fallbackString&&((fallback={})[prop]=fallbackString);var data=getL10nData(key,args,fallback);return data&&prop in data?data[prop]:"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang,callback){loadLocale(lang,(function(){callback&&callback()}))},getDirection:function(){var shortCode=gLanguage.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(shortCode)>=0?"rtl":"ltr"},translate:function translateFragment(element){for(var children=function getTranslatableChildren(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}(element=element||document.documentElement),elementCount=children.length,i=0;i<elementCount;i++)translateElement(children[i]);translateElement(element)},getReadyState:function(){return gReadyState},ready:function(callback){callback&&("complete"==gReadyState||"interactive"==gReadyState?window.setTimeout((function(){callback()})):document.addEventListener&&document.addEventListener("localized",(function once(){document.removeEventListener("localized",once),callback()})))}}}(window,document)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFindController=exports.FindState=void 0;var _ui_utils=__w_pdfjs_require__(2),_pdf_find_utils=__w_pdfjs_require__(11),_pdfjsLib=__w_pdfjs_require__(4);const FindState={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};exports.FindState=FindState;const CHARACTERS_TO_NORMALIZE={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},DIACRITICS_EXCEPTION=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let DIACRITICS_EXCEPTION_STR;const DIACRITICS_REG_EXP=/\p{M}+/gu,SPECIAL_CHARS_REG_EXP=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,NOT_DIACRITIC_FROM_END_REG_EXP=/([^\p{M}])\p{M}*$/u,NOT_DIACRITIC_FROM_START_REG_EXP=/^\p{M}*([^\p{M}])/u,SYLLABLES_REG_EXP=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,SYLLABLES_LENGTHS=new Map,FIRST_CHAR_SYLLABLES_REG_EXP="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",NFKC_CHARS_TO_NORMALIZE=new Map;let noSyllablesRegExp=null,withSyllablesRegExp=null;function normalize(text){const syllablePositions=[];let m,normalizationRegex;for(;null!==(m=SYLLABLES_REG_EXP.exec(text));){let{index}=m;for(const char of m[0]){let len=SYLLABLES_LENGTHS.get(char);len||(len=char.normalize("NFD").length,SYLLABLES_LENGTHS.set(char,len)),syllablePositions.push([len,index++])}}if(0===syllablePositions.length&&noSyllablesRegExp)normalizationRegex=noSyllablesRegExp;else if(syllablePositions.length>0&&withSyllablesRegExp)normalizationRegex=withSyllablesRegExp;else{const regexp=`([${Object.keys(CHARACTERS_TO_NORMALIZE).join("")}])|([${(0,_pdf_find_utils.getNormalizeWithNFKC)()}])|(${"(?:゙|゚)"}\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(${"(?:\\p{Ideographic}|[぀-ヿ])"}\\n)|(\\n)`;normalizationRegex=0===syllablePositions.length?noSyllablesRegExp=new RegExp(regexp+"|(\\u0000)","gum"):withSyllablesRegExp=new RegExp(regexp+`|(${FIRST_CHAR_SYLLABLES_REG_EXP})`,"gum")}const rawDiacriticsPositions=[];for(;null!==(m=DIACRITICS_REG_EXP.exec(text));)rawDiacriticsPositions.push([m[0].length,m.index]);let normalized=text.normalize("NFD");const positions=[[0,0]];let rawDiacriticsIndex=0,syllableIndex=0,shift=0,shiftOrigin=0,eol=0,hasDiacritics=!1;return normalized=normalized.replace(normalizationRegex,((match,p1,p2,p3,p4,p5,p6,p7,p8,i)=>{if(i-=shiftOrigin,p1){const replacement=CHARACTERS_TO_NORMALIZE[p1],jj=replacement.length;for(let j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);return shift-=jj-1,replacement}if(p2){let replacement=NFKC_CHARS_TO_NORMALIZE.get(p2);replacement||(replacement=p2.normalize("NFKC"),NFKC_CHARS_TO_NORMALIZE.set(p2,replacement));const jj=replacement.length;for(let j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);return shift-=jj-1,replacement}if(p3)return hasDiacritics=!0,i+eol===rawDiacriticsPositions[rawDiacriticsIndex]?.[1]?++rawDiacriticsIndex:(positions.push([i-1-shift+1,shift-1]),shift-=1,shiftOrigin+=1),positions.push([i-shift+1,shift]),shiftOrigin+=1,eol+=1,p3.charAt(0);if(p4){const hasTrailingDashEOL=p4.endsWith("\n"),len=hasTrailingDashEOL?p4.length-2:p4.length;hasDiacritics=!0;let jj=len;i+eol===rawDiacriticsPositions[rawDiacriticsIndex]?.[1]&&(jj-=rawDiacriticsPositions[rawDiacriticsIndex][0],++rawDiacriticsIndex);for(let j=1;j<=jj;j++)positions.push([i-1-shift+j,shift-j]);return shift-=jj,shiftOrigin+=jj,hasTrailingDashEOL?(i+=len-1,positions.push([i-shift+1,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p4.slice(0,len)):p4}if(p5){const len=p5.length-2;return positions.push([i-shift+len,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p5.slice(0,-2)}if(p6){const len=p6.length-1;return positions.push([i-shift+len,shift]),shiftOrigin+=1,eol+=1,p6.slice(0,-1)}if(p7)return positions.push([i-shift+1,shift-1]),shift-=1,shiftOrigin+=1,eol+=1," ";if(i+eol===syllablePositions[syllableIndex]?.[1]){const newCharLen=syllablePositions[syllableIndex][0]-1;++syllableIndex;for(let j=1;j<=newCharLen;j++)positions.push([i-(shift-j),shift-j]);shift-=newCharLen,shiftOrigin+=newCharLen}return p8})),positions.push([normalized.length,shift]),[normalized,positions,hasDiacritics]}function getOriginalIndex(diffs,pos,len){if(!diffs)return[pos,len];const start=pos,end=pos+len-1;let i=(0,_ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=start));diffs[i][0]>start&&--i;let j=(0,_ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=end),i);diffs[j][0]>end&&--j;const oldStart=start+diffs[i][1];return[oldStart,end+diffs[j][1]+1-oldStart]}var _state=new WeakMap,_updateMatchesCountOnProgress=new WeakMap,_visitedPagesCount=new WeakMap,_onFind=new WeakSet,_reset=new WeakSet,_query=new WeakMap,_shouldDirtyMatch=new WeakSet,_isEntireWord=new WeakSet,_calculateRegExpMatch=new WeakSet,_convertToRegExpString=new WeakSet,_calculateMatch=new WeakSet,_extractText=new WeakSet,_updatePage=new WeakSet,_updateAllPages=new WeakSet,_nextMatch=new WeakSet,_matchesReady=new WeakSet,_nextPageMatch=new WeakSet,_advanceOffsetPage=new WeakSet,_updateMatch=new WeakSet,_onFindBarClose=new WeakSet,_requestMatchesCount=new WeakSet,_updateUIResultsCount=new WeakSet,_updateUIState=new WeakSet;function _onFind2(state){if(!state)return;!1===state.phraseSearch&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),"string"==typeof state.query&&(state.query=state.query.match(/\S+/g)));const pdfDocument=this._pdfDocument,{type}=state;(null===_classPrivateFieldGet(this,_state)||_classPrivateMethodGet(this,_shouldDirtyMatch,_shouldDirtyMatch2).call(this,state))&&(this._dirtyMatch=!0),_classPrivateFieldSet(this,_state,state),"highlightallchange"!==type&&_classPrivateMethodGet(this,_updateUIState,_updateUIState2).call(this,FindState.PENDING),this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument)return;_classPrivateMethodGet(this,_extractText,_extractText2).call(this);const findbarClosed=!this._highlightMatches,pendingTimeout=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),type?this._dirtyMatch?_classPrivateMethodGet(this,_nextMatch,_nextMatch2).call(this):"again"===type?(_classPrivateMethodGet(this,_nextMatch,_nextMatch2).call(this),findbarClosed&&_classPrivateFieldGet(this,_state).highlightAll&&_classPrivateMethodGet(this,_updateAllPages,_updateAllPages2).call(this)):"highlightallchange"===type?(pendingTimeout?_classPrivateMethodGet(this,_nextMatch,_nextMatch2).call(this):this._highlightMatches=!0,_classPrivateMethodGet(this,_updateAllPages,_updateAllPages2).call(this)):_classPrivateMethodGet(this,_nextMatch,_nextMatch2).call(this):this._findTimeout=setTimeout((()=>{_classPrivateMethodGet(this,_nextMatch,_nextMatch2).call(this),this._findTimeout=null}),250)}))}function _reset2(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],_classPrivateFieldSet(this,_visitedPagesCount,0),_classPrivateFieldSet(this,_state,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new _pdfjsLib.PromiseCapability}function _get_query(){const{query}=_classPrivateFieldGet(this,_state);return"string"==typeof query?(query!==this._rawQuery&&(this._rawQuery=query,[this._normalizedQuery]=normalize(query)),this._normalizedQuery):(query||[]).filter((q=>!!q)).map((q=>normalize(q)[0]))}function _shouldDirtyMatch2(state){const newQuery=state.query,prevQuery=_classPrivateFieldGet(this,_state).query,newType=typeof newQuery;if(newType!==typeof prevQuery)return!0;if("string"===newType){if(newQuery!==prevQuery)return!0}else if(JSON.stringify(newQuery)!==JSON.stringify(prevQuery))return!0;switch(state.type){case"again":const pageNumber=this._selected.pageIdx+1,linkService=this._linkService;return pageNumber>=1&&pageNumber<=linkService.pagesCount&&pageNumber!==linkService.page&&!(this.onIsPageVisible?.(pageNumber)??1);case"highlightallchange":return!1}return!0}function _isEntireWord2(content,startIdx,length){let match=content.slice(0,startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);if(match){const first=content.charCodeAt(startIdx),limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(first)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}if(match=content.slice(startIdx+length).match(NOT_DIACRITIC_FROM_START_REG_EXP),match){const last=content.charCodeAt(startIdx+length-1),limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(last)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}return!0}function _calculateRegExpMatch2(query,entireWord,pageIndex,pageContent){const matches=this._pageMatches[pageIndex]=[],matchesLength=this._pageMatchesLength[pageIndex]=[];if(!query)return;const diffs=this._pageDiffs[pageIndex];let match;for(;null!==(match=query.exec(pageContent));){if(entireWord&&!_classPrivateMethodGet(this,_isEntireWord,_isEntireWord2).call(this,pageContent,match.index,match[0].length))continue;const[matchPos,matchLen]=getOriginalIndex(diffs,match.index,match[0].length);matchLen&&(matches.push(matchPos),matchesLength.push(matchLen))}}function _convertToRegExpString2(query,hasDiacritics){const{matchDiacritics}=_classPrivateFieldGet(this,_state);let isUnicode=!1;return(query=query.replaceAll(SPECIAL_CHARS_REG_EXP,((match,p1,p2,p3,p4,p5)=>p1?`[ ]*\\${p1}[ ]*`:p2?`[ ]*${p2}[ ]*`:p3?"[ ]+":matchDiacritics?p4||p5:p4?DIACRITICS_EXCEPTION.has(p4.charCodeAt(0))?p4:"":hasDiacritics?(isUnicode=!0,`${p5}\\p{M}*`):p5))).endsWith("[ ]*")&&(query=query.slice(0,query.length-4)),matchDiacritics&&hasDiacritics&&(DIACRITICS_EXCEPTION_STR||=String.fromCharCode(...DIACRITICS_EXCEPTION),isUnicode=!0,query=`${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\p{M}]|$)`),[isUnicode,query]}function _calculateMatch2(pageIndex){var _this$visitedPagesCou;let query=_classPrivateFieldGet(this,_query);if(0===query.length)return;const{caseSensitive,entireWord}=_classPrivateFieldGet(this,_state),pageContent=this._pageContents[pageIndex],hasDiacritics=this._hasDiacritics[pageIndex];let isUnicode=!1;"string"==typeof query?[isUnicode,query]=_classPrivateMethodGet(this,_convertToRegExpString,_convertToRegExpString2).call(this,query,hasDiacritics):query=query.sort().reverse().map((q=>{const[isUnicodePart,queryPart]=_classPrivateMethodGet(this,_convertToRegExpString,_convertToRegExpString2).call(this,q,hasDiacritics);return isUnicode||=isUnicodePart,`(${queryPart})`})).join("|");query=query?new RegExp(query,`g${isUnicode?"u":""}${caseSensitive?"":"i"}`):null,_classPrivateMethodGet(this,_calculateRegExpMatch,_calculateRegExpMatch2).call(this,query,entireWord,pageIndex,pageContent),_classPrivateFieldGet(this,_state).highlightAll&&_classPrivateMethodGet(this,_updatePage,_updatePage2).call(this,pageIndex),this._resumePageIdx===pageIndex&&(this._resumePageIdx=null,_classPrivateMethodGet(this,_nextPageMatch,_nextPageMatch2).call(this));const pageMatchesCount=this._pageMatches[pageIndex].length;this._matchesCountTotal+=pageMatchesCount,_classPrivateFieldGet(this,_updateMatchesCountOnProgress)?pageMatchesCount>0&&_classPrivateMethodGet(this,_updateUIResultsCount,_updateUIResultsCount2).call(this):_classPrivateFieldSet(this,_visitedPagesCount,(_this$visitedPagesCou=_classPrivateFieldGet(this,_visitedPagesCount),++_this$visitedPagesCou))===this._linkService.pagesCount&&_classPrivateMethodGet(this,_updateUIResultsCount,_updateUIResultsCount2).call(this)}function _extractText2(){if(this._extractTextPromises.length>0)return;let promise=Promise.resolve();const textOptions={disableNormalization:!0};for(let i=0,ii=this._linkService.pagesCount;i<ii;i++){const extractTextCapability=new _pdfjsLib.PromiseCapability;this._extractTextPromises[i]=extractTextCapability.promise,promise=promise.then((()=>this._pdfDocument.getPage(i+1).then((pdfPage=>pdfPage.getTextContent(textOptions))).then((textContent=>{const strBuf=[];for(const textItem of textContent.items)strBuf.push(textItem.str),textItem.hasEOL&&strBuf.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=normalize(strBuf.join("")),extractTextCapability.resolve()}),(reason=>{console.error(`Unable to get text content for page ${i+1}`,reason),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,extractTextCapability.resolve()}))))}}function _updatePage2(index){this._scrollMatches&&this._selected.pageIdx===index&&(this._linkService.page=index+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:index})}function _updateAllPages2(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function _nextMatch2(){const previous=_classPrivateFieldGet(this,_state).findPrevious,currentPageIndex=this._linkService.page-1,numPages=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=currentPageIndex,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,_classPrivateFieldSet(this,_visitedPagesCount,0),this._matchesCountTotal=0,_classPrivateMethodGet(this,_updateAllPages,_updateAllPages2).call(this);for(let i=0;i<numPages;i++)this._pendingFindMatches.has(i)||(this._pendingFindMatches.add(i),this._extractTextPromises[i].then((()=>{this._pendingFindMatches.delete(i),_classPrivateMethodGet(this,_calculateMatch,_calculateMatch2).call(this,i)})))}if(0===_classPrivateFieldGet(this,_query).length)return void _classPrivateMethodGet(this,_updateUIState,_updateUIState2).call(this,FindState.FOUND);if(this._resumePageIdx)return;const offset=this._offset;if(this._pagesToSearch=numPages,null!==offset.matchIdx){const numPageMatches=this._pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0)return offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1,void _classPrivateMethodGet(this,_updateMatch,_updateMatch2).call(this,!0);_classPrivateMethodGet(this,_advanceOffsetPage,_advanceOffsetPage2).call(this,previous)}_classPrivateMethodGet(this,_nextPageMatch,_nextPageMatch2).call(this)}function _matchesReady2(matches){const offset=this._offset,numMatches=matches.length,previous=_classPrivateFieldGet(this,_state).findPrevious;return numMatches?(offset.matchIdx=previous?numMatches-1:0,_classPrivateMethodGet(this,_updateMatch,_updateMatch2).call(this,!0),!0):(_classPrivateMethodGet(this,_advanceOffsetPage,_advanceOffsetPage2).call(this,previous),!!(offset.wrapped&&(offset.matchIdx=null,this._pagesToSearch<0))&&(_classPrivateMethodGet(this,_updateMatch,_updateMatch2).call(this,!1),!0))}function _nextPageMatch2(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let matches=null;do{const pageIdx=this._offset.pageIdx;if(matches=this._pageMatches[pageIdx],!matches){this._resumePageIdx=pageIdx;break}}while(!_classPrivateMethodGet(this,_matchesReady,_matchesReady2).call(this,matches))}function _advanceOffsetPage2(previous){const offset=this._offset,numPages=this._linkService.pagesCount;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1,offset.matchIdx=null,this._pagesToSearch--,(offset.pageIdx>=numPages||offset.pageIdx<0)&&(offset.pageIdx=previous?numPages-1:0,offset.wrapped=!0)}function _updateMatch2(found=!1){let state=FindState.NOT_FOUND;const wrapped=this._offset.wrapped;if(this._offset.wrapped=!1,found){const previousPage=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,state=wrapped?FindState.WRAPPED:FindState.FOUND,-1!==previousPage&&previousPage!==this._selected.pageIdx&&_classPrivateMethodGet(this,_updatePage,_updatePage2).call(this,previousPage)}_classPrivateMethodGet(this,_updateUIState,_updateUIState2).call(this,state,_classPrivateFieldGet(this,_state).findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,_classPrivateMethodGet(this,_updatePage,_updatePage2).call(this,this._selected.pageIdx))}function _onFindBarClose2(evt){const pdfDocument=this._pdfDocument;this._firstPageCapability.promise.then((()=>{!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),_classPrivateMethodGet(this,_updateUIState,_updateUIState2).call(this,FindState.FOUND),this._highlightMatches=!1,_classPrivateMethodGet(this,_updateAllPages,_updateAllPages2).call(this))}))}function _requestMatchesCount2(){const{pageIdx,matchIdx}=this._selected;let current=0,total=this._matchesCountTotal;if(-1!==matchIdx){for(let i=0;i<pageIdx;i++)current+=this._pageMatches[i]?.length||0;current+=matchIdx+1}return(current<1||current>total)&&(current=total=0),{current,total}}function _updateUIResultsCount2(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:_classPrivateMethodGet(this,_requestMatchesCount,_requestMatchesCount2).call(this)})}function _updateUIState2(state,previous=!1){(_classPrivateFieldGet(this,_updateMatchesCountOnProgress)||_classPrivateFieldGet(this,_visitedPagesCount)===this._linkService.pagesCount&&state!==FindState.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state,previous,matchesCount:_classPrivateMethodGet(this,_requestMatchesCount,_requestMatchesCount2).call(this),rawQuery:_classPrivateFieldGet(this,_state)?.query??null})}exports.PDFFindController=class PDFFindController{constructor({linkService:_linkService,eventBus,updateMatchesCountOnProgress=!0}){_classPrivateMethodInitSpec(this,_updateUIState),_classPrivateMethodInitSpec(this,_updateUIResultsCount),_classPrivateMethodInitSpec(this,_requestMatchesCount),_classPrivateMethodInitSpec(this,_onFindBarClose),_classPrivateMethodInitSpec(this,_updateMatch),_classPrivateMethodInitSpec(this,_advanceOffsetPage),_classPrivateMethodInitSpec(this,_nextPageMatch),_classPrivateMethodInitSpec(this,_matchesReady),_classPrivateMethodInitSpec(this,_nextMatch),_classPrivateMethodInitSpec(this,_updateAllPages),_classPrivateMethodInitSpec(this,_updatePage),_classPrivateMethodInitSpec(this,_extractText),_classPrivateMethodInitSpec(this,_calculateMatch),_classPrivateMethodInitSpec(this,_convertToRegExpString),_classPrivateMethodInitSpec(this,_calculateRegExpMatch),_classPrivateMethodInitSpec(this,_isEntireWord),_classPrivateMethodInitSpec(this,_shouldDirtyMatch),_classPrivateFieldInitSpec(this,_query,{get:_get_query,set:void 0}),_classPrivateMethodInitSpec(this,_reset),_classPrivateMethodInitSpec(this,_onFind),_classPrivateFieldInitSpec(this,_state,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_updateMatchesCountOnProgress,{writable:!0,value:!0}),_classPrivateFieldInitSpec(this,_visitedPagesCount,{writable:!0,value:0}),this._linkService=_linkService,this._eventBus=eventBus,_classPrivateFieldSet(this,_updateMatchesCountOnProgress,updateMatchesCountOnProgress),this.onIsPageVisible=null,_classPrivateMethodGet(this,_reset,_reset2).call(this),eventBus._on("find",_classPrivateMethodGet(this,_onFind,_onFind2).bind(this)),eventBus._on("findbarclose",_classPrivateMethodGet(this,_onFindBarClose,_onFindBarClose2).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return _classPrivateFieldGet(this,_state)}setDocument(pdfDocument){this._pdfDocument&&_classPrivateMethodGet(this,_reset,_reset2).call(this),pdfDocument&&(this._pdfDocument=pdfDocument,this._firstPageCapability.resolve())}scrollMatchIntoView({element=null,selectedLeft=0,pageIndex=-1,matchIndex=-1}){if(!this._scrollMatches||!element)return;if(-1===matchIndex||matchIndex!==this._selected.matchIdx)return;if(-1===pageIndex||pageIndex!==this._selected.pageIdx)return;this._scrollMatches=!1;const spot={top:-50,left:selectedLeft+-400};(0,_ui_utils.scrollIntoView)(element,spot,!0)}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CharacterType=void 0,exports.getCharacterType=function getCharacterType(charCode){if(function isAlphabeticalScript(charCode){return charCode<11904}(charCode))return function isAscii(charCode){return 0==(65408&charCode)}(charCode)?function isAsciiSpace(charCode){return 32===charCode||9===charCode||13===charCode||10===charCode}(charCode)?CharacterType.SPACE:function isAsciiAlpha(charCode){return charCode>=97&&charCode<=122||charCode>=65&&charCode<=90}(charCode)||function isAsciiDigit(charCode){return charCode>=48&&charCode<=57}(charCode)||95===charCode?CharacterType.ALPHA_LETTER:CharacterType.PUNCT:function isThai(charCode){return 3584==(65408&charCode)}(charCode)?CharacterType.THAI_LETTER:160===charCode?CharacterType.SPACE:CharacterType.ALPHA_LETTER;if(function isHan(charCode){return charCode>=13312&&charCode<=40959||charCode>=63744&&charCode<=64255}(charCode))return CharacterType.HAN_LETTER;if(function isKatakana(charCode){return charCode>=12448&&charCode<=12543}(charCode))return CharacterType.KATAKANA_LETTER;if(function isHiragana(charCode){return charCode>=12352&&charCode<=12447}(charCode))return CharacterType.HIRAGANA_LETTER;if(function isHalfwidthKatakana(charCode){return charCode>=65376&&charCode<=65439}(charCode))return CharacterType.HALFWIDTH_KATAKANA_LETTER;return CharacterType.ALPHA_LETTER},exports.getNormalizeWithNFKC=function getNormalizeWithNFKC(){return NormalizeWithNFKC||=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦",NormalizeWithNFKC};const CharacterType={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};let NormalizeWithNFKC;exports.CharacterType=CharacterType},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFHistory=void 0,exports.isDestArraysEqual=isDestArraysEqual,exports.isDestHashesEqual=isDestHashesEqual;var _ui_utils=__w_pdfjs_require__(2),_event_utils=__w_pdfjs_require__(7);function getCurrentHash(){return document.location.hash}function isDestHashesEqual(destHash,pushHash){if("string"!=typeof destHash||"string"!=typeof pushHash)return!1;if(destHash===pushHash)return!0;return(0,_ui_utils.parseQueryString)(destHash).get("nameddest")===pushHash}function isDestArraysEqual(firstDest,secondDest){function isEntryEqual(first,second){if(typeof first!=typeof second)return!1;if(Array.isArray(first)||Array.isArray(second))return!1;if(null!==first&&"object"==typeof first&&null!==second){if(Object.keys(first).length!==Object.keys(second).length)return!1;for(const key in first)if(!isEntryEqual(first[key],second[key]))return!1;return!0}return first===second||Number.isNaN(first)&&Number.isNaN(second)}if(!Array.isArray(firstDest)||!Array.isArray(secondDest))return!1;if(firstDest.length!==secondDest.length)return!1;for(let i=0,ii=firstDest.length;i<ii;i++)if(!isEntryEqual(firstDest[i],secondDest[i]))return!1;return!0}exports.PDFHistory=class PDFHistory{constructor({linkService,eventBus}){this.linkService=linkService,this.eventBus=eventBus,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",(evt=>{this._isPagesLoaded=!!evt.pagesCount}),{once:!0})}))}initialize({fingerprint,resetHistory=!1,updateUrl=!1}){if(!fingerprint||"string"!=typeof fingerprint)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const reInitialized=""!==this._fingerprint&&this._fingerprint!==fingerprint;this._fingerprint=fingerprint,this._updateUrl=!0===updateUrl,this._initialized=!0,this._bindEvents();const state=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(state,!0)||resetHistory){const{hash,page,rotation}=this._parseCurrentHash(!0);return!hash||reInitialized||resetHistory?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash,page,rotation},!0)}const destination=state.destination;this._updateInternalState(destination,state.uid,!0),void 0!==destination.rotation&&(this._initialRotation=destination.rotation),destination.dest?(this._initialBookmark=JSON.stringify(destination.dest),this._destination.page=null):destination.hash?this._initialBookmark=destination.hash:destination.page&&(this._initialBookmark=`page=${destination.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest=null,explicitDest,pageNumber}){if(!this._initialized)return;if(namedDest&&"string"!=typeof namedDest)return void console.error(`PDFHistory.push: "${namedDest}" is not a valid namedDest parameter.`);if(!Array.isArray(explicitDest))return void console.error(`PDFHistory.push: "${explicitDest}" is not a valid explicitDest parameter.`);if(!this._isValidPage(pageNumber)&&(null!==pageNumber||this._destination))return void console.error(`PDFHistory.push: "${pageNumber}" is not a valid pageNumber parameter.`);const hash=namedDest||JSON.stringify(explicitDest);if(!hash)return;let forceReplace=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,hash)||isDestArraysEqual(this._destination.dest,explicitDest))){if(this._destination.page)return;forceReplace=!0}this._popStateInProgress&&!forceReplace||(this._pushOrReplaceState({dest:explicitDest,hash,page:pageNumber,rotation:this.linkService.rotation},forceReplace),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))}pushPage(pageNumber){this._initialized&&(this._isValidPage(pageNumber)?this._destination?.page!==pageNumber&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${pageNumber}`,page:pageNumber,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))):console.error(`PDFHistory.pushPage: "${pageNumber}" is not a valid page number.`))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this._isValidState(state)&&state.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this._isValidState(state)&&state.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(destination,forceReplace=!1){const shouldReplace=forceReplace||!this._destination,newState={fingerprint:this._fingerprint,uid:shouldReplace?this._uid:this._uid+1,destination};let newUrl;if(this._updateInternalState(destination,newState.uid),this._updateUrl&&destination?.hash){const baseUrl=document.location.href.split("#")[0];baseUrl.startsWith("file://")||(newUrl=`${baseUrl}#${destination.hash}`)}shouldReplace?window.history.replaceState(newState,"",newUrl):window.history.pushState(newState,"",newUrl)}_tryPushCurrentPosition(temporary=!1){if(!this._position)return;let position=this._position;if(temporary&&(position=Object.assign(Object.create(null),this._position),position.temporary=!0),!this._destination)return void this._pushOrReplaceState(position);if(this._destination.temporary)return void this._pushOrReplaceState(position,!0);if(this._destination.hash===position.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let forceReplace=!1;if(this._destination.page>=position.first&&this._destination.page<=position.page){if(void 0!==this._destination.dest||!this._destination.first)return;forceReplace=!0}this._pushOrReplaceState(position,forceReplace)}_isValidPage(val){return Number.isInteger(val)&&val>0&&val<=this.linkService.pagesCount}_isValidState(state,checkReload=!1){if(!state)return!1;if(state.fingerprint!==this._fingerprint){if(!checkReload)return!1;{if("string"!=typeof state.fingerprint||state.fingerprint.length!==this._fingerprint.length)return!1;const[perfEntry]=performance.getEntriesByType("navigation");if("reload"!==perfEntry?.type)return!1}}return!(!Number.isInteger(state.uid)||state.uid<0)&&(null!==state.destination&&"object"==typeof state.destination)}_updateInternalState(destination,uid,removeTemporary=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),removeTemporary&&destination?.temporary&&delete destination.temporary,this._destination=destination,this._uid=uid,this._maxUid=Math.max(this._maxUid,uid),this._numPositionUpdates=0}_parseCurrentHash(checkNameddest=!1){const hash=unescape(getCurrentHash()).substring(1),params=(0,_ui_utils.parseQueryString)(hash),nameddest=params.get("nameddest")||"";let page=0|params.get("page");return(!this._isValidPage(page)||checkNameddest&&nameddest.length>0)&&(page=null),{hash,page,rotation:this.linkService.rotation}}_updateViewarea({location}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:location.pdfOpenParams.substring(1),page:this.linkService.page,first:location.pageNumber,rotation:location.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null}),1e3))}_popState({state}){const newHash=getCurrentHash(),hashChanged=this._currentHash!==newHash;if(this._currentHash=newHash,!state){this._uid++;const{hash,page,rotation}=this._parseCurrentHash();return void this._pushOrReplaceState({hash,page,rotation},!0)}if(!this._isValidState(state))return;this._popStateInProgress=!0,hashChanged&&(this._blockHashChange++,(0,_event_utils.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--})));const destination=state.destination;this._updateInternalState(destination,state.uid,!0),(0,_ui_utils.isValidRotation)(destination.rotation)&&(this.linkService.rotation=destination.rotation),destination.dest?this.linkService.goToDestination(destination.dest):destination.hash?this.linkService.setHash(destination.hash):destination.page&&(this.linkService.page=destination.page),Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPageView=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_ui_utils=__w_pdfjs_require__(2),_annotation_editor_layer_builder=__w_pdfjs_require__(14),_annotation_layer_builder=__w_pdfjs_require__(3),_app_options=__w_pdfjs_require__(15),_l10n_utils=__w_pdfjs_require__(5),_pdf_link_service=__w_pdfjs_require__(1),_struct_tree_layer_builder=__w_pdfjs_require__(16),_text_accessibility=__w_pdfjs_require__(17),_text_highlighter=__w_pdfjs_require__(18),_text_layer_builder=__w_pdfjs_require__(19),_xfa_layer_builder=__w_pdfjs_require__(20);const MAX_CANVAS_PIXELS=_app_options.compatibilityParams.maxCanvasPixels||16777216,DEFAULT_LAYER_PROPERTIES=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new _pdf_link_service.SimpleLinkService}});var _annotationMode=new WeakMap,_layerProperties=new WeakMap,_loadingId=new WeakMap,_previousRotation=new WeakMap,_renderError=new WeakMap,_renderingState=new WeakMap,_textLayerMode=new WeakMap,_useThumbnailCanvas=new WeakMap,_viewportMap=new WeakMap,_setDimensions=new WeakSet,_renderAnnotationLayer=new WeakSet,_renderAnnotationEditorLayer=new WeakSet,_renderXfaLayer=new WeakSet,_renderTextLayer=new WeakSet,_renderStructTreeLayer=new WeakSet,_buildXfaTextContentItems=new WeakSet,_finishRenderTask=new WeakSet;function _setDimensions2(){const{viewport}=this;if(this.pdfPage){if(_classPrivateFieldGet(this,_previousRotation)===viewport.rotation)return;_classPrivateFieldSet(this,_previousRotation,viewport.rotation)}(0,_pdfjsLib.setLayerDimensions)(this.div,viewport,!0,!1)}function _renderAnnotationLayer2(){return _renderAnnotationLayer3.apply(this,arguments)}function _renderAnnotationLayer3(){return(_renderAnnotationLayer3=_asyncToGenerator((function*(){let error=null;try{yield this.annotationLayer.render(this.viewport,"display")}catch(ex){console.error(`#renderAnnotationLayer: "${ex}".`),error=ex}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error})}}))).apply(this,arguments)}function _renderAnnotationEditorLayer2(){return _renderAnnotationEditorLayer3.apply(this,arguments)}function _renderAnnotationEditorLayer3(){return(_renderAnnotationEditorLayer3=_asyncToGenerator((function*(){let error=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(ex){console.error(`#renderAnnotationEditorLayer: "${ex}".`),error=ex}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error})}}))).apply(this,arguments)}function _renderXfaLayer2(){return _renderXfaLayer3.apply(this,arguments)}function _renderXfaLayer3(){return(_renderXfaLayer3=_asyncToGenerator((function*(){let error=null;try{const result=yield this.xfaLayer.render(this.viewport,"display");result?.textDivs&&this._textHighlighter&&_classPrivateMethodGet(this,_buildXfaTextContentItems,_buildXfaTextContentItems2).call(this,result.textDivs)}catch(ex){console.error(`#renderXfaLayer: "${ex}".`),error=ex}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error})}}))).apply(this,arguments)}function _renderTextLayer2(){return _renderTextLayer3.apply(this,arguments)}function _renderTextLayer3(){return(_renderTextLayer3=_asyncToGenerator((function*(){const{pdfPage,textLayer,viewport}=this;if(!textLayer)return;let error=null;try{if(!textLayer.renderingDone){const readableStream=pdfPage.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});textLayer.setTextContentSource(readableStream)}yield textLayer.render(viewport)}catch(ex){if(ex instanceof _pdfjsLib.AbortException)return;console.error(`#renderTextLayer: "${ex}".`),error=ex}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:textLayer.numTextDivs,error}),_classPrivateMethodGet(this,_renderStructTreeLayer,_renderStructTreeLayer2).call(this)}))).apply(this,arguments)}function _renderStructTreeLayer2(){return _renderStructTreeLayer3.apply(this,arguments)}function _renderStructTreeLayer3(){return(_renderStructTreeLayer3=_asyncToGenerator((function*(){if(!this.textLayer)return;this.structTreeLayer||=new _struct_tree_layer_builder.StructTreeLayerBuilder;const tree=yield this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree(),treeDom=this.structTreeLayer?.render(tree);treeDom&&this.canvas?.append(treeDom),this.structTreeLayer?.show()}))).apply(this,arguments)}function _buildXfaTextContentItems2(_x){return _buildXfaTextContentItems3.apply(this,arguments)}function _buildXfaTextContentItems3(){return(_buildXfaTextContentItems3=_asyncToGenerator((function*(textDivs){const text=yield this.pdfPage.getTextContent(),items=[];for(const item of text.items)items.push(item.str);this._textHighlighter.setTextMapping(textDivs,items),this._textHighlighter.enable()}))).apply(this,arguments)}function _finishRenderTask2(_x2){return _finishRenderTask3.apply(this,arguments)}function _finishRenderTask3(){return(_finishRenderTask3=_asyncToGenerator((function*(renderTask,error=null){if(renderTask===this.renderTask&&(this.renderTask=null),error instanceof _pdfjsLib.RenderingCancelledException)_classPrivateFieldSet(this,_renderError,null);else if(_classPrivateFieldSet(this,_renderError,error),this.renderingState=_ui_utils.RenderingStates.FINISHED,this._resetZoomLayer(!0),_classPrivateFieldGet(this,_useThumbnailCanvas).regularAnnotations=!renderTask.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:_classPrivateFieldGet(this,_renderError)}),error)throw error}))).apply(this,arguments)}exports.PDFPageView=class PDFPageView{constructor(options){_classPrivateMethodInitSpec(this,_finishRenderTask),_classPrivateMethodInitSpec(this,_buildXfaTextContentItems),_classPrivateMethodInitSpec(this,_renderStructTreeLayer),_classPrivateMethodInitSpec(this,_renderTextLayer),_classPrivateMethodInitSpec(this,_renderXfaLayer),_classPrivateMethodInitSpec(this,_renderAnnotationEditorLayer),_classPrivateMethodInitSpec(this,_renderAnnotationLayer),_classPrivateMethodInitSpec(this,_setDimensions),_classPrivateFieldInitSpec(this,_annotationMode,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS}),_classPrivateFieldInitSpec(this,_layerProperties,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_loadingId,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_previousRotation,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_renderError,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_renderingState,{writable:!0,value:_ui_utils.RenderingStates.INITIAL}),_classPrivateFieldInitSpec(this,_textLayerMode,{writable:!0,value:_ui_utils.TextLayerMode.ENABLE}),_classPrivateFieldInitSpec(this,_useThumbnailCanvas,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}}),_classPrivateFieldInitSpec(this,_viewportMap,{writable:!0,value:new WeakMap});const container=options.container,defaultViewport=options.defaultViewport;this.id=options.id,this.renderingId="page"+this.id,_classPrivateFieldSet(this,_layerProperties,options.layerProperties||DEFAULT_LAYER_PROPERTIES),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=options.scale||_ui_utils.DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this._optionalContentConfigPromise=options.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,_classPrivateFieldSet(this,_textLayerMode,options.textLayerMode??_ui_utils.TextLayerMode.ENABLE),_classPrivateFieldSet(this,_annotationMode,options.annotationMode??_pdfjsLib.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=options.imageResourcesPath||"",this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=options.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=options.maxCanvasPixels||MAX_CANVAS_PIXELS,this.pageColors=options.pageColors||null,this.eventBus=options.eventBus,this.renderingQueue=options.renderingQueue,this.l10n=options.l10n||_l10n_utils.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const div=document.createElement("div");if(div.className="page",div.setAttribute("data-page-number",this.id),div.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((msg=>{div.setAttribute("aria-label",msg)})),this.div=div,_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),container?.append(div),this._isStandalone){container?.style.setProperty("--scale-factor",this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise}=options;optionalContentConfigPromise&&optionalContentConfigPromise.then((optionalContentConfig=>{optionalContentConfigPromise===this._optionalContentConfigPromise&&(_classPrivateFieldGet(this,_useThumbnailCanvas).initialOptionalContent=optionalContentConfig.hasInitialVisibility)}))}}get renderingState(){return _classPrivateFieldGet(this,_renderingState)}set renderingState(state){if(state!==_classPrivateFieldGet(this,_renderingState))switch(_classPrivateFieldSet(this,_renderingState,state),_classPrivateFieldGet(this,_loadingId)&&(clearTimeout(_classPrivateFieldGet(this,_loadingId)),_classPrivateFieldSet(this,_loadingId,null)),state){case _ui_utils.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case _ui_utils.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),_classPrivateFieldSet(this,_loadingId,setTimeout((()=>{this.div.classList.add("loading"),_classPrivateFieldSet(this,_loadingId,null)}),0));break;case _ui_utils.RenderingStates.INITIAL:case _ui_utils.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}setPdfPage(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;const totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation}),_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,_pdfjsLib.shadow)(this,"_textHighlighter",new _text_highlighter.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:_classPrivateFieldGet(this,_layerProperties).call(this).findController}))}_resetZoomLayer(removeFromDOM=!1){if(!this.zoomLayer)return;const zoomLayerCanvas=this.zoomLayer.firstChild;_classPrivateFieldGet(this,_viewportMap).delete(zoomLayerCanvas),zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,removeFromDOM&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer=!1,keepAnnotationLayer=!1,keepAnnotationEditorLayer=!1,keepXfaLayer=!1,keepTextLayer=!1}={}){this.cancelRendering({keepAnnotationLayer,keepAnnotationEditorLayer,keepXfaLayer,keepTextLayer}),this.renderingState=_ui_utils.RenderingStates.INITIAL;const div=this.div,childNodes=div.childNodes,zoomLayerNode=keepZoomLayer&&this.zoomLayer||null,annotationLayerNode=keepAnnotationLayer&&this.annotationLayer?.div||null,annotationEditorLayerNode=keepAnnotationEditorLayer&&this.annotationEditorLayer?.div||null,xfaLayerNode=keepXfaLayer&&this.xfaLayer?.div||null,textLayerNode=keepTextLayer&&this.textLayer?.div||null;for(let i=childNodes.length-1;i>=0;i--){const node=childNodes[i];switch(node){case zoomLayerNode:case annotationLayerNode:case annotationEditorLayerNode:case xfaLayerNode:case textLayerNode:continue}node.remove()}div.removeAttribute("data-loaded"),annotationLayerNode&&this.annotationLayer.hide(),annotationEditorLayerNode&&this.annotationEditorLayer.hide(),xfaLayerNode&&this.xfaLayer.hide(),textLayerNode&&this.textLayer.hide(),this.structTreeLayer?.hide(),zoomLayerNode||(this.canvas&&(_classPrivateFieldGet(this,_viewportMap).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale=0,rotation=null,optionalContentConfigPromise=null,drawingDelay=-1}){this.scale=scale||this.scale,"number"==typeof rotation&&(this.rotation=rotation),optionalContentConfigPromise instanceof Promise&&(this._optionalContentConfigPromise=optionalContentConfigPromise,optionalContentConfigPromise.then((optionalContentConfig=>{optionalContentConfigPromise===this._optionalContentConfigPromise&&(_classPrivateFieldGet(this,_useThumbnailCanvas).initialOptionalContent=optionalContentConfig.hasInitialVisibility)})));const totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation}),_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),this._isStandalone&&this.div.parentNode?.style.setProperty("--scale-factor",this.viewport.scale);let isScalingRestricted=!1;if(this.canvas&&this.maxCanvasPixels>0){const{width,height}=this.viewport,{sx,sy}=this.outputScale;(Math.floor(width)*sx|0)*(Math.floor(height)*sy|0)>this.maxCanvasPixels&&(isScalingRestricted=!0)}const onlyCssZoom=this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted,postponeDrawing=!onlyCssZoom&&drawingDelay>=0&&drawingDelay<1e3;if(this.canvas){if(postponeDrawing||onlyCssZoom)return postponeDrawing&&this.renderingState!==_ui_utils.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:drawingDelay}),this.renderingState=_ui_utils.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!postponeDrawing,hideTextLayer:postponeDrawing}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:_classPrivateFieldGet(this,_renderError)});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer=!1,keepAnnotationEditorLayer=!1,keepXfaLayer=!1,keepTextLayer=!1,cancelExtraDelay=0}={}){this.renderTask&&(this.renderTask.cancel(cancelExtraDelay),this.renderTask=null),this.resume=null,!this.textLayer||keepTextLayer&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||keepAnnotationLayer&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.annotationEditorLayer||keepAnnotationEditorLayer&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||keepXfaLayer&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target,redrawAnnotationLayer=!1,redrawAnnotationEditorLayer=!1,redrawXfaLayer=!1,redrawTextLayer=!1,hideTextLayer=!1}){if(!target.hasAttribute("zooming")){target.setAttribute("zooming",!0);const{style}=target;style.width=style.height=""}const originalViewport=_classPrivateFieldGet(this,_viewportMap).get(target);if(this.viewport!==originalViewport){const relativeRotation=this.viewport.rotation-originalViewport.rotation,absRotation=Math.abs(relativeRotation);let scaleX=1,scaleY=1;if(90===absRotation||270===absRotation){const{width,height}=this.viewport;scaleX=height/width,scaleY=width/height}target.style.transform=`rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`}redrawAnnotationLayer&&this.annotationLayer&&_classPrivateMethodGet(this,_renderAnnotationLayer,_renderAnnotationLayer2).call(this),redrawAnnotationEditorLayer&&this.annotationEditorLayer&&_classPrivateMethodGet(this,_renderAnnotationEditorLayer,_renderAnnotationEditorLayer2).call(this),redrawXfaLayer&&this.xfaLayer&&_classPrivateMethodGet(this,_renderXfaLayer,_renderXfaLayer2).call(this),this.textLayer&&(hideTextLayer?(this.textLayer.hide(),this.structTreeLayer?.hide()):redrawTextLayer&&_classPrivateMethodGet(this,_renderTextLayer,_renderTextLayer2).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)}draw(){var _this8=this;return _asyncToGenerator((function*(){_this8.renderingState!==_ui_utils.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),_this8.reset());const{div,l10n,pageColors,pdfPage,viewport}=_this8;if(!pdfPage)throw _this8.renderingState=_ui_utils.RenderingStates.FINISHED,new Error("pdfPage is not loaded");_this8.renderingState=_ui_utils.RenderingStates.RUNNING;const canvasWrapper=document.createElement("div");if(canvasWrapper.classList.add("canvasWrapper"),div.append(canvasWrapper),_this8.textLayer||_classPrivateFieldGet(_this8,_textLayerMode)===_ui_utils.TextLayerMode.DISABLE||pdfPage.isPureXfa||(_this8._accessibilityManager||=new _text_accessibility.TextAccessibilityManager,_this8.textLayer=new _text_layer_builder.TextLayerBuilder({highlighter:_this8._textHighlighter,accessibilityManager:_this8._accessibilityManager,isOffscreenCanvasSupported:_this8.isOffscreenCanvasSupported,enablePermissions:_classPrivateFieldGet(_this8,_textLayerMode)===_ui_utils.TextLayerMode.ENABLE_PERMISSIONS}),div.append(_this8.textLayer.div)),!_this8.annotationLayer&&_classPrivateFieldGet(_this8,_annotationMode)!==_pdfjsLib.AnnotationMode.DISABLE){const{annotationStorage,downloadManager,enableScripting,fieldObjectsPromise,hasJSActionsPromise,linkService}=_classPrivateFieldGet(_this8,_layerProperties).call(_this8);_this8._annotationCanvasMap||=new Map,_this8.annotationLayer=new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:div,pdfPage,annotationStorage,imageResourcesPath:_this8.imageResourcesPath,renderForms:_classPrivateFieldGet(_this8,_annotationMode)===_pdfjsLib.AnnotationMode.ENABLE_FORMS,linkService,downloadManager,l10n,enableScripting,hasJSActionsPromise,fieldObjectsPromise,annotationCanvasMap:_this8._annotationCanvasMap,accessibilityManager:_this8._accessibilityManager})}const{width,height}=viewport,canvas=document.createElement("canvas");canvas.setAttribute("role","presentation"),canvas.hidden=!0;const hasHCM=!(!pageColors?.background||!pageColors?.foreground);let showCanvas=isLastShow=>{hasHCM&&!isLastShow||(canvas.hidden=!1,showCanvas=null)};canvasWrapper.append(canvas),_this8.canvas=canvas;const ctx=canvas.getContext("2d",{alpha:!1}),outputScale=_this8.outputScale=new _ui_utils.OutputScale;if(_this8.useOnlyCssZoom){const actualSizeViewport=viewport.clone({scale:_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});outputScale.sx*=actualSizeViewport.width/width,outputScale.sy*=actualSizeViewport.height/height}if(_this8.maxCanvasPixels>0){const pixelsInViewport=width*height,maxScale=Math.sqrt(_this8.maxCanvasPixels/pixelsInViewport);outputScale.sx>maxScale||outputScale.sy>maxScale?(outputScale.sx=maxScale,outputScale.sy=maxScale,_this8.hasRestrictedScaling=!0):_this8.hasRestrictedScaling=!1}const sfx=(0,_ui_utils.approximateFraction)(outputScale.sx),sfy=(0,_ui_utils.approximateFraction)(outputScale.sy);canvas.width=(0,_ui_utils.roundToDivide)(width*outputScale.sx,sfx[0]),canvas.height=(0,_ui_utils.roundToDivide)(height*outputScale.sy,sfy[0]);const{style}=canvas;style.width=(0,_ui_utils.roundToDivide)(width,sfx[1])+"px",style.height=(0,_ui_utils.roundToDivide)(height,sfy[1])+"px",_classPrivateFieldGet(_this8,_viewportMap).set(canvas,viewport);const renderContext={canvasContext:ctx,transform:outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,viewport,annotationMode:_classPrivateFieldGet(_this8,_annotationMode),optionalContentConfigPromise:_this8._optionalContentConfigPromise,annotationCanvasMap:_this8._annotationCanvasMap,pageColors},renderTask=_this8.renderTask=_this8.pdfPage.render(renderContext);renderTask.onContinue=cont=>{if(showCanvas?.(!1),_this8.renderingQueue&&!_this8.renderingQueue.isHighestPriority(_this8))return _this8.renderingState=_ui_utils.RenderingStates.PAUSED,void(_this8.resume=()=>{_this8.renderingState=_ui_utils.RenderingStates.RUNNING,cont()});cont()};const resultPromise=renderTask.promise.then(_asyncToGenerator((function*(){if(showCanvas?.(!0),yield _classPrivateMethodGet(_this8,_finishRenderTask,_finishRenderTask2).call(_this8,renderTask),_classPrivateMethodGet(_this8,_renderTextLayer,_renderTextLayer2).call(_this8),_this8.annotationLayer&&(yield _classPrivateMethodGet(_this8,_renderAnnotationLayer,_renderAnnotationLayer2).call(_this8)),!_this8.annotationEditorLayer){const{annotationEditorUIManager}=_classPrivateFieldGet(_this8,_layerProperties).call(_this8);if(!annotationEditorUIManager)return;_this8.annotationEditorLayer=new _annotation_editor_layer_builder.AnnotationEditorLayerBuilder({uiManager:annotationEditorUIManager,pageDiv:div,pdfPage,l10n,accessibilityManager:_this8._accessibilityManager})}_classPrivateMethodGet(_this8,_renderAnnotationEditorLayer,_renderAnnotationEditorLayer2).call(_this8)})),(error=>(error instanceof _pdfjsLib.RenderingCancelledException||showCanvas?.(!0),_classPrivateMethodGet(_this8,_finishRenderTask,_finishRenderTask2).call(_this8,renderTask,error))));if(pdfPage.isPureXfa){if(_this8.xfaLayer)_this8.xfaLayer.div&&div.append(_this8.xfaLayer.div);else{const{annotationStorage,linkService}=_classPrivateFieldGet(_this8,_layerProperties).call(_this8);_this8.xfaLayer=new _xfa_layer_builder.XfaLayerBuilder({pageDiv:div,pdfPage,annotationStorage,linkService})}_classPrivateMethodGet(_this8,_renderXfaLayer,_renderXfaLayer2).call(_this8)}return div.setAttribute("data-loaded",!0),_this8.eventBus.dispatch("pagerender",{source:_this8,pageNumber:_this8.id}),resultPromise}))()}setPageLabel(label){this.pageLabel="string"==typeof label?label:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent,regularAnnotations}=_classPrivateFieldGet(this,_useThumbnailCanvas);return initialOptionalContent&&regularAnnotations?this.canvas:null}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationEditorLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_l10n_utils=__w_pdfjs_require__(5),_uiManager=new WeakMap;exports.AnnotationEditorLayerBuilder=class AnnotationEditorLayerBuilder{constructor(options){_classPrivateFieldInitSpec(this,_uiManager,{writable:!0,value:void 0}),this.pageDiv=options.pageDiv,this.pdfPage=options.pdfPage,this.accessibilityManager=options.accessibilityManager,this.l10n=options.l10n||_l10n_utils.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,_classPrivateFieldSet(this,_uiManager,options.uiManager)}render(viewport,intent="display"){var _this9=this;return _asyncToGenerator((function*(){if("display"!==intent)return;if(_this9._cancelled)return;const clonedViewport=viewport.clone({dontFlip:!0});if(_this9.div)return _this9.annotationEditorLayer.update({viewport:clonedViewport}),void _this9.show();const div=_this9.div=document.createElement("div");div.className="annotationEditorLayer",div.tabIndex=0,div.hidden=!0,_this9.pageDiv.append(div),_this9.annotationEditorLayer=new _pdfjsLib.AnnotationEditorLayer({uiManager:_classPrivateFieldGet(_this9,_uiManager),div,accessibilityManager:_this9.accessibilityManager,pageIndex:_this9.pdfPage.pageNumber-1,l10n:_this9.l10n,viewport:clonedViewport});const parameters={viewport:clonedViewport,div,annotations:null,intent};_this9.annotationEditorLayer.render(parameters),_this9.show()}))()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&!this.annotationEditorLayer.isEmpty&&(this.div.hidden=!1)}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.compatibilityParams=exports.OptionKind=exports.AppOptions=void 0;const compatibilityParams=Object.create(null);exports.compatibilityParams=compatibilityParams;{const userAgent=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,isAndroid=/Android/.test(userAgent),isIOS=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent)||"MacIntel"===platform&&maxTouchPoints>1;!function checkCanvasSizeLimitation(){(isIOS||isAndroid)&&(compatibilityParams.maxCanvasPixels=5242880)}()}const OptionKind={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};exports.OptionKind=OptionKind;const defaultOptions={annotationEditorMode:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},annotationMode:{value:2,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cursorToolOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},defaultZoomDelay:{value:400,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},defaultZoomValue:{value:"",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},disableHistory:{value:!1,kind:OptionKind.VIEWER},disablePageLabels:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableFloatingToolbar:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePermissions:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableScripting:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:OptionKind.VIEWER},externalLinkTarget:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},historyUpdateUrl:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},imageResourcesPath:{value:"./images/",kind:OptionKind.VIEWER},maxCanvasPixels:{value:16777216,kind:OptionKind.VIEWER},forcePageColors:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},pdfBugEnabled:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},printResolution:{value:150,kind:OptionKind.VIEWER},sidebarViewOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},scrollModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},spreadModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},textLayerMode:{value:1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},useOnlyCssZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewerCssTheme:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cMapPacked:{value:!0,kind:OptionKind.API},cMapUrl:{value:"../web/cmaps/",kind:OptionKind.API},disableAutoFetch:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableFontFace:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableRange:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableStream:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},docBaseUrl:{value:"",kind:OptionKind.API},enableXfa:{value:!0,kind:OptionKind.API+OptionKind.PREFERENCE},fontExtraProperties:{value:!1,kind:OptionKind.API},isEvalSupported:{value:!0,kind:OptionKind.API},isOffscreenCanvasSupported:{value:!0,kind:OptionKind.API},maxImageSize:{value:-1,kind:OptionKind.API},pdfBug:{value:!1,kind:OptionKind.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:OptionKind.API},verbosity:{value:1,kind:OptionKind.API},workerPort:{value:null,kind:OptionKind.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:OptionKind.WORKER}};defaultOptions.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:OptionKind.VIEWER},defaultOptions.disablePreferences={value:!1,kind:OptionKind.VIEWER},defaultOptions.locale={value:navigator.language||"en-US",kind:OptionKind.VIEWER},defaultOptions.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:OptionKind.VIEWER};const userOptions=Object.create(null);class AppOptions{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(name){const userOption=userOptions[name];if(void 0!==userOption)return userOption;const defaultOption=defaultOptions[name];return void 0!==defaultOption?compatibilityParams[name]??defaultOption.value:void 0}static getAll(kind=null){const options=Object.create(null);for(const name in defaultOptions){const defaultOption=defaultOptions[name];if(kind){if(0==(kind&defaultOption.kind))continue;if(kind===OptionKind.PREFERENCE){const value=defaultOption.value,valueType=typeof value;if("boolean"===valueType||"string"===valueType||"number"===valueType&&Number.isInteger(value)){options[name]=value;continue}throw new Error(`Invalid type for preference: ${name}`)}}const userOption=userOptions[name];options[name]=void 0!==userOption?userOption:compatibilityParams[name]??defaultOption.value}return options}static set(name,value){userOptions[name]=value}static setAll(options){for(const name in options)userOptions[name]=options[name]}static remove(name){delete userOptions[name]}}exports.AppOptions=AppOptions,AppOptions._hasUserOptions=function(){return Object.keys(userOptions).length>0}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StructTreeLayerBuilder=void 0;const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;var _treeDom=new WeakMap,_setAttributes=new WeakSet,_walk=new WeakSet;function _setAttributes2(structElement,htmlElement){void 0!==structElement.alt&&htmlElement.setAttribute("aria-label",structElement.alt),void 0!==structElement.id&&htmlElement.setAttribute("aria-owns",structElement.id),void 0!==structElement.lang&&htmlElement.setAttribute("lang",structElement.lang)}function _walk2(node){if(!node)return null;const element=document.createElement("span");if("role"in node){const{role}=node,match=role.match(HEADING_PATTERN);match?(element.setAttribute("role","heading"),element.setAttribute("aria-level",match[1])):PDF_ROLE_TO_HTML_ROLE[role]&&element.setAttribute("role",PDF_ROLE_TO_HTML_ROLE[role])}if(_classPrivateMethodGet(this,_setAttributes,_setAttributes2).call(this,node,element),node.children)if(1===node.children.length&&"id"in node.children[0])_classPrivateMethodGet(this,_setAttributes,_setAttributes2).call(this,node.children[0],element);else for(const kid of node.children)element.append(_classPrivateMethodGet(this,_walk,_walk2).call(this,kid));return element}exports.StructTreeLayerBuilder=class StructTreeLayerBuilder{constructor(){_classPrivateMethodInitSpec(this,_walk),_classPrivateMethodInitSpec(this,_setAttributes),_classPrivateFieldInitSpec(this,_treeDom,{writable:!0,value:void 0})}get renderingDone(){return void 0!==_classPrivateFieldGet(this,_treeDom)}render(structTree){if(void 0!==_classPrivateFieldGet(this,_treeDom))return _classPrivateFieldGet(this,_treeDom);const treeDom=_classPrivateMethodGet(this,_walk,_walk2).call(this,structTree);return treeDom?.classList.add("structTree"),_classPrivateFieldSet(this,_treeDom,treeDom)}hide(){_classPrivateFieldGet(this,_treeDom)&&!_classPrivateFieldGet(this,_treeDom).hidden&&(_classPrivateFieldGet(this,_treeDom).hidden=!0)}show(){_classPrivateFieldGet(this,_treeDom)?.hidden&&(_classPrivateFieldGet(this,_treeDom).hidden=!1)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextAccessibilityManager=void 0;var _ui_utils=__w_pdfjs_require__(2),_enabled=new WeakMap,_textChildren=new WeakMap,_textNodes=new WeakMap,_waitingElements=new WeakMap,_addIdToAriaOwns=new WeakSet;class TextAccessibilityManager{constructor(){_classPrivateMethodInitSpec(this,_addIdToAriaOwns),_classPrivateFieldInitSpec(this,_enabled,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_textChildren,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_textNodes,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_waitingElements,{writable:!0,value:new Map})}setTextMapping(textDivs){_classPrivateFieldSet(this,_textChildren,textDivs)}enable(){if(_classPrivateFieldGet(this,_enabled))throw new Error("TextAccessibilityManager is already enabled.");if(!_classPrivateFieldGet(this,_textChildren))throw new Error("Text divs and strings have not been set.");if(_classPrivateFieldSet(this,_enabled,!0),_classPrivateFieldSet(this,_textChildren,_classPrivateFieldGet(this,_textChildren).slice()),_classPrivateFieldGet(this,_textChildren).sort(_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions)),_classPrivateFieldGet(this,_textNodes).size>0){const textChildren=_classPrivateFieldGet(this,_textChildren);for(const[id,nodeIndex]of _classPrivateFieldGet(this,_textNodes)){document.getElementById(id)?_classPrivateMethodGet(this,_addIdToAriaOwns,_addIdToAriaOwns2).call(this,id,textChildren[nodeIndex]):_classPrivateFieldGet(this,_textNodes).delete(id)}}for(const[element,isRemovable]of _classPrivateFieldGet(this,_waitingElements))this.addPointerInTextLayer(element,isRemovable);_classPrivateFieldGet(this,_waitingElements).clear()}disable(){_classPrivateFieldGet(this,_enabled)&&(_classPrivateFieldGet(this,_waitingElements).clear(),_classPrivateFieldSet(this,_textChildren,null),_classPrivateFieldSet(this,_enabled,!1))}removePointerInTextLayer(element){if(!_classPrivateFieldGet(this,_enabled))return void _classPrivateFieldGet(this,_waitingElements).delete(element);const children=_classPrivateFieldGet(this,_textChildren);if(!children||0===children.length)return;const{id}=element,nodeIndex=_classPrivateFieldGet(this,_textNodes).get(id);if(void 0===nodeIndex)return;const node=children[nodeIndex];_classPrivateFieldGet(this,_textNodes).delete(id);let owns=node.getAttribute("aria-owns");owns?.includes(id)&&(owns=owns.split(" ").filter((x=>x!==id)).join(" "),owns?node.setAttribute("aria-owns",owns):(node.removeAttribute("aria-owns"),node.setAttribute("role","presentation")))}addPointerInTextLayer(element,isRemovable){const{id}=element;if(!id)return;if(!_classPrivateFieldGet(this,_enabled))return void _classPrivateFieldGet(this,_waitingElements).set(element,isRemovable);isRemovable&&this.removePointerInTextLayer(element);const children=_classPrivateFieldGet(this,_textChildren);if(!children||0===children.length)return;const index=(0,_ui_utils.binarySearchFirstItem)(children,(node=>_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,element,node)<0)),nodeIndex=Math.max(0,index-1);_classPrivateMethodGet(this,_addIdToAriaOwns,_addIdToAriaOwns2).call(this,id,children[nodeIndex]),_classPrivateFieldGet(this,_textNodes).set(id,nodeIndex)}moveElementInDOM(container,element,contentElement,isRemovable){if(this.addPointerInTextLayer(contentElement,isRemovable),!container.hasChildNodes())return void container.append(element);const children=Array.from(container.childNodes).filter((node=>node!==element));if(0===children.length)return;const elementToCompare=contentElement||element,index=(0,_ui_utils.binarySearchFirstItem)(children,(node=>_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,elementToCompare,node)<0));0===index?children[0].before(element):children[index-1].after(element)}}function _compareElementPositions(e1,e2){const rect1=e1.getBoundingClientRect(),rect2=e2.getBoundingClientRect();if(0===rect1.width&&0===rect1.height)return 1;if(0===rect2.width&&0===rect2.height)return-1;const top1=rect1.y,bot1=rect1.y+rect1.height,mid1=rect1.y+rect1.height/2,top2=rect2.y,bot2=rect2.y+rect2.height,mid2=rect2.y+rect2.height/2;if(mid1<=top2&&mid2>=bot1)return-1;if(mid2<=top1&&mid1>=bot2)return 1;return rect1.x+rect1.width/2-(rect2.x+rect2.width/2)}function _addIdToAriaOwns2(id,node){const owns=node.getAttribute("aria-owns");owns?.includes(id)||node.setAttribute("aria-owns",owns?`${owns} ${id}`:id),node.removeAttribute("role")}exports.TextAccessibilityManager=TextAccessibilityManager},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextHighlighter=void 0;exports.TextHighlighter=class TextHighlighter{constructor({findController,eventBus,pageIndex}){this.findController=findController,this.matches=[],this.eventBus=eventBus,this.pageIdx=pageIndex,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(divs,texts){this.textDivs=divs,this.textContentItemsStr=texts}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=evt=>{evt.pageIndex!==this.pageIdx&&-1!==evt.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(matches,matchesLength){if(!matches)return[];const{textContentItemsStr}=this;let i=0,iIndex=0;const end=textContentItemsStr.length-1,result=[];for(let m=0,mm=matches.length;m<mm;m++){let matchIdx=matches[m];for(;i!==end&&matchIdx>=iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;i===textContentItemsStr.length&&console.error("Could not find a matching mapping");const match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=matchesLength[m];i!==end&&matchIdx>iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},result.push(match)}return result}_renderMatches(matches){if(0===matches.length)return;const{findController,pageIdx}=this,{textContentItemsStr,textDivs}=this,isSelectedPage=pageIdx===findController.selected.pageIdx,selectedMatchIdx=findController.selected.matchIdx;let prevEnd=null;const infinity={divIdx:-1,offset:void 0};function beginText(begin,className){const divIdx=begin.divIdx;return textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){let div=textDivs[divIdx];if(div.nodeType===Node.TEXT_NODE){const span=document.createElement("span");div.before(span),span.append(div),textDivs[divIdx]=span,div=span}const content=textContentItemsStr[divIdx].substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){const span=document.createElement("span");return span.className=`${className} appended`,span.append(node),div.append(span),className.includes("selected")?span.offsetLeft:0}return div.append(node),0}let i0=selectedMatchIdx,i1=i0+1;if(findController.state.highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;let lastDivIdx=-1,lastOffset=-1;for(let i=i0;i<i1;i++){const match=matches[i],begin=match.begin;if(begin.divIdx===lastDivIdx&&begin.offset===lastOffset)continue;lastDivIdx=begin.divIdx,lastOffset=begin.offset;const end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";let selectedLeft=0;if(prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(let n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end,isSelected&&findController.scrollMatchIntoView({element:textDivs[begin.divIdx],selectedLeft,pageIndex:pageIdx,matchIndex:selectedMatchIdx})}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}_updateMatches(reset=!1){if(!this.enabled&&!reset)return;const{findController,matches,pageIdx}=this,{textContentItemsStr,textDivs}=this;let clearedUntilDivIdx=-1;for(const match of matches){for(let n=Math.max(clearedUntilDivIdx,match.begin.divIdx),end=match.end.divIdx;n<=end;n++){const div=textDivs[n];div.textContent=textContentItemsStr[n],div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(!findController?.highlightMatches||reset)return;const pageMatches=findController.pageMatches[pageIdx]||null,pageMatchesLength=findController.pageMatchesLength[pageIdx]||null;this.matches=this._convertMatches(pageMatches,pageMatchesLength),this._renderMatches(this.matches)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_ui_utils=__w_pdfjs_require__(2),_enablePermissions=new WeakMap,_rotation=new WeakMap,_scale=new WeakMap,_textContentSource=new WeakMap,_finishRendering=new WeakSet,_bindMouse=new WeakSet;function _finishRendering2(){this.renderingDone=!0;const endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.div.append(endOfContent),_classPrivateMethodGet(this,_bindMouse,_bindMouse2).call(this)}function _bindMouse2(){const{div}=this;div.addEventListener("mousedown",(evt=>{const end=div.querySelector(".endOfContent");if(!end)return;let adjustTop=evt.target!==div;if(adjustTop&&="none"!==getComputedStyle(end).getPropertyValue("-moz-user-select"),adjustTop){const divBounds=div.getBoundingClientRect(),r=Math.max(0,(evt.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")})),div.addEventListener("mouseup",(()=>{const end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))})),div.addEventListener("copy",(event=>{if(!_classPrivateFieldGet(this,_enablePermissions)){const selection=document.getSelection();event.clipboardData.setData("text/plain",(0,_ui_utils.removeNullCharacters)((0,_pdfjsLib.normalizeUnicode)(selection.toString())))}event.preventDefault(),event.stopPropagation()}))}exports.TextLayerBuilder=class TextLayerBuilder{constructor({highlighter=null,accessibilityManager=null,isOffscreenCanvasSupported=!0,enablePermissions=!1}){_classPrivateMethodInitSpec(this,_bindMouse),_classPrivateMethodInitSpec(this,_finishRendering),_classPrivateFieldInitSpec(this,_enablePermissions,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_rotation,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_scale,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_textContentSource,{writable:!0,value:null}),this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=highlighter,this.accessibilityManager=accessibilityManager,this.isOffscreenCanvasSupported=isOffscreenCanvasSupported,_classPrivateFieldSet(this,_enablePermissions,!0===enablePermissions),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}render(viewport){var _this10=this;return _asyncToGenerator((function*(){if(!_classPrivateFieldGet(_this10,_textContentSource))throw new Error('No "textContentSource" parameter specified.');const scale=viewport.scale*(globalThis.devicePixelRatio||1),{rotation}=viewport;if(_this10.renderingDone){const mustRotate=rotation!==_classPrivateFieldGet(_this10,_rotation),mustRescale=scale!==_classPrivateFieldGet(_this10,_scale);return(mustRotate||mustRescale)&&(_this10.hide(),(0,_pdfjsLib.updateTextLayer)({container:_this10.div,viewport,textDivs:_this10.textDivs,textDivProperties:_this10.textDivProperties,isOffscreenCanvasSupported:_this10.isOffscreenCanvasSupported,mustRescale,mustRotate}),_classPrivateFieldSet(_this10,_scale,scale),_classPrivateFieldSet(_this10,_rotation,rotation)),void _this10.show()}_this10.cancel(),_this10.highlighter?.setTextMapping(_this10.textDivs,_this10.textContentItemsStr),_this10.accessibilityManager?.setTextMapping(_this10.textDivs),_this10.textLayerRenderTask=(0,_pdfjsLib.renderTextLayer)({textContentSource:_classPrivateFieldGet(_this10,_textContentSource),container:_this10.div,viewport,textDivs:_this10.textDivs,textDivProperties:_this10.textDivProperties,textContentItemsStr:_this10.textContentItemsStr,isOffscreenCanvasSupported:_this10.isOffscreenCanvasSupported}),yield _this10.textLayerRenderTask.promise,_classPrivateMethodGet(_this10,_finishRendering,_finishRendering2).call(_this10),_classPrivateFieldSet(_this10,_scale,scale),_classPrivateFieldSet(_this10,_rotation,rotation),_this10.show(),_this10.accessibilityManager?.enable()}))()}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(source){this.cancel(),_classPrivateFieldSet(this,_textContentSource,source)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.XfaLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(4);exports.XfaLayerBuilder=class XfaLayerBuilder{constructor({pageDiv,pdfPage,annotationStorage=null,linkService,xfaHtml=null}){this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.annotationStorage=annotationStorage,this.linkService=linkService,this.xfaHtml=xfaHtml,this.div=null,this._cancelled=!1}render(viewport,intent="display"){var _this11=this;return _asyncToGenerator((function*(){if("print"===intent){const parameters={viewport:viewport.clone({dontFlip:!0}),div:_this11.div,xfaHtml:_this11.xfaHtml,annotationStorage:_this11.annotationStorage,linkService:_this11.linkService,intent},div=document.createElement("div");return _this11.pageDiv.append(div),parameters.div=div,_pdfjsLib.XfaLayer.render(parameters)}const xfaHtml=yield _this11.pdfPage.getXfa();if(_this11._cancelled||!xfaHtml)return{textDivs:[]};const parameters={viewport:viewport.clone({dontFlip:!0}),div:_this11.div,xfaHtml,annotationStorage:_this11.annotationStorage,linkService:_this11.linkService,intent};return _this11.div?_pdfjsLib.XfaLayer.update(parameters):(_this11.div=document.createElement("div"),_this11.pageDiv.append(_this11.div),parameters.div=_this11.div,_pdfjsLib.XfaLayer.render(parameters))}))()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFScriptingManager=void 0;var _ui_utils=__w_pdfjs_require__(2),_pdfjsLib=__w_pdfjs_require__(4);exports.PDFScriptingManager=class PDFScriptingManager{constructor({eventBus,sandboxBundleSrc=null,scriptingFactory=null,docPropertiesLookup=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=eventBus,this._sandboxBundleSrc=sandboxBundleSrc,this._scriptingFactory=scriptingFactory,this._docPropertiesLookup=docPropertiesLookup,this._scriptingFactory||window.addEventListener("updatefromsandbox",(event=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:event.detail})}))}setViewer(pdfViewer){this._pdfViewer=pdfViewer}setDocument(pdfDocument){var _this12=this;return _asyncToGenerator((function*(){if(_this12._pdfDocument&&(yield _this12._destroyScripting()),_this12._pdfDocument=pdfDocument,!pdfDocument)return;const[objects,calculationOrder,docActions]=yield Promise.all([pdfDocument.getFieldObjects(),pdfDocument.getCalculationOrderIds(),pdfDocument.getJSActions()]);if(objects||docActions){if(pdfDocument===_this12._pdfDocument){try{_this12._scripting=_this12._createScripting()}catch(error){return console.error(`PDFScriptingManager.setDocument: "${error?.message}".`),void(yield _this12._destroyScripting())}_this12._internalEvents.set("updatefromsandbox",(event=>{event?.source===window&&_this12._updateFromSandbox(event.detail)})),_this12._internalEvents.set("dispatcheventinsandbox",(event=>{_this12._scripting?.dispatchEventInSandbox(event.detail)})),_this12._internalEvents.set("pagechanging",(({pageNumber,previous})=>{pageNumber!==previous&&(_this12._dispatchPageClose(previous),_this12._dispatchPageOpen(pageNumber))})),_this12._internalEvents.set("pagerendered",(({pageNumber})=>{_this12._pageOpenPending.has(pageNumber)&&pageNumber===_this12._pdfViewer.currentPageNumber&&_this12._dispatchPageOpen(pageNumber)})),_this12._internalEvents.set("pagesdestroy",function(){var _ref2=_asyncToGenerator((function*(event){yield _this12._dispatchPageClose(_this12._pdfViewer.currentPageNumber),yield _this12._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),_this12._closeCapability?.resolve()}));return function(_x3){return _ref2.apply(this,arguments)}}());for(const[name,listener]of _this12._internalEvents)_this12._eventBus._on(name,listener);try{const docProperties=yield _this12._getDocProperties();if(pdfDocument!==_this12._pdfDocument)return;yield _this12._scripting.createSandbox({objects,calculationOrder,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...docProperties,actions:docActions}}),_this12._eventBus.dispatch("sandboxcreated",{source:_this12})}catch(error){return console.error(`PDFScriptingManager.setDocument: "${error?.message}".`),void(yield _this12._destroyScripting())}yield _this12._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield _this12._dispatchPageOpen(_this12._pdfViewer.currentPageNumber,!0),Promise.resolve().then((()=>{pdfDocument===_this12._pdfDocument&&(_this12._ready=!0)}))}}else yield _this12._destroyScripting()}))()}dispatchWillSave(detail){var _this13=this;return _asyncToGenerator((function*(){return _this13._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}))()}dispatchDidSave(detail){var _this14=this;return _asyncToGenerator((function*(){return _this14._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}))()}dispatchWillPrint(detail){var _this15=this;return _asyncToGenerator((function*(){return _this15._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}))()}dispatchDidPrint(detail){var _this16=this;return _asyncToGenerator((function*(){return _this16._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}))()}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,_pdfjsLib.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,_pdfjsLib.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,_pdfjsLib.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(detail){var _this17=this;return _asyncToGenerator((function*(){const isInPresentationMode=_this17._pdfViewer.isInPresentationMode||_this17._pdfViewer.isChangingPresentationMode,{id,siblings,command,value}=detail;if(!id){switch(command){case"clear":console.clear();break;case"error":console.error(value);break;case"layout":{if(isInPresentationMode)return;const modes=(0,_ui_utils.apiPageLayoutToViewerModes)(value);_this17._pdfViewer.spreadMode=modes.spreadMode;break}case"page-num":_this17._pdfViewer.currentPageNumber=value+1;break;case"print":yield _this17._pdfViewer.pagesPromise,_this17._eventBus.dispatch("print",{source:_this17});break;case"println":console.log(value);break;case"zoom":if(isInPresentationMode)return;_this17._pdfViewer.currentScaleValue=value;break;case"SaveAs":_this17._eventBus.dispatch("download",{source:_this17});break;case"FirstPage":_this17._pdfViewer.currentPageNumber=1;break;case"LastPage":_this17._pdfViewer.currentPageNumber=_this17._pdfViewer.pagesCount;break;case"NextPage":_this17._pdfViewer.nextPage();break;case"PrevPage":_this17._pdfViewer.previousPage();break;case"ZoomViewIn":if(isInPresentationMode)return;_this17._pdfViewer.increaseScale();break;case"ZoomViewOut":if(isInPresentationMode)return;_this17._pdfViewer.decreaseScale()}return}if(isInPresentationMode&&detail.focus)return;delete detail.id,delete detail.siblings;const ids=siblings?[id,...siblings]:[id];for(const elementId of ids){const element=document.querySelector(`[data-element-id="${elementId}"]`);element?element.dispatchEvent(new CustomEvent("updatefromsandbox",{detail})):_this17._pdfDocument?.annotationStorage.setValue(elementId,detail)}}))()}_dispatchPageOpen(pageNumber,initialize=!1){var _this18=this;return _asyncToGenerator((function*(){const pdfDocument=_this18._pdfDocument,visitedPages=_this18._visitedPages;if(initialize&&(_this18._closeCapability=new _pdfjsLib.PromiseCapability),!_this18._closeCapability)return;const pageView=_this18._pdfViewer.getPageView(pageNumber-1);if(pageView?.renderingState!==_ui_utils.RenderingStates.FINISHED)return void _this18._pageOpenPending.add(pageNumber);_this18._pageOpenPending.delete(pageNumber);const actionsPromise=_asyncToGenerator((function*(){const actions=yield visitedPages.has(pageNumber)?null:pageView.pdfPage?.getJSActions();pdfDocument===_this18._pdfDocument&&(yield _this18._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber,actions}))}))();visitedPages.set(pageNumber,actionsPromise)}))()}_dispatchPageClose(pageNumber){var _this19=this;return _asyncToGenerator((function*(){const pdfDocument=_this19._pdfDocument,visitedPages=_this19._visitedPages;if(!_this19._closeCapability)return;if(_this19._pageOpenPending.has(pageNumber))return;const actionsPromise=visitedPages.get(pageNumber);actionsPromise&&(visitedPages.set(pageNumber,null),yield actionsPromise,pdfDocument===_this19._pdfDocument&&(yield _this19._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber})))}))()}_getDocProperties(){var _this20=this;return _asyncToGenerator((function*(){if(_this20._docPropertiesLookup)return _this20._docPropertiesLookup(_this20._pdfDocument);const{docPropertiesLookup}=__w_pdfjs_require__(22);return docPropertiesLookup(_this20._pdfDocument)}))()}_createScripting(){if(this._destroyCapability=new _pdfjsLib.PromiseCapability,this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting}=__w_pdfjs_require__(22);return new GenericScripting(this._sandboxBundleSrc)}_destroyScripting(){var _this21=this;return _asyncToGenerator((function*(){if(!_this21._scripting)return _this21._pdfDocument=null,void _this21._destroyCapability?.resolve();_this21._closeCapability&&(yield Promise.race([_this21._closeCapability.promise,new Promise((resolve=>{setTimeout(resolve,1e3)}))]).catch((reason=>{})),_this21._closeCapability=null),_this21._pdfDocument=null;try{yield _this21._scripting.destroySandbox()}catch(ex){}for(const[name,listener]of _this21._internalEvents)_this21._eventBus._off(name,listener);_this21._internalEvents.clear(),_this21._pageOpenPending.clear(),_this21._visitedPages.clear(),_this21._scripting=null,_this21._ready=!1,_this21._destroyCapability?.resolve()}))()}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericScripting=void 0,exports.docPropertiesLookup=function docPropertiesLookup(_x4){return _docPropertiesLookup.apply(this,arguments)};var _pdfjsLib=__w_pdfjs_require__(4);function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator((function*(pdfDocument){const baseUrl="".split("#")[0];let{info,metadata,contentDispositionFilename,contentLength}=yield pdfDocument.getMetadata();if(!contentLength){const{length}=yield pdfDocument.getDownloadInfo();contentLength=length}return{...info,baseURL:baseUrl,filesize:contentLength,filename:contentDispositionFilename||(0,_pdfjsLib.getPdfFilenameFromUrl)(""),metadata:metadata?.getRaw(),authors:metadata?.get("dc:creator"),numPages:pdfDocument.numPages,URL:""}}))).apply(this,arguments)}exports.GenericScripting=class GenericScripting{constructor(sandboxBundleSrc){this._ready=(0,_pdfjsLib.loadScript)(sandboxBundleSrc,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}createSandbox(data){var _this22=this;return _asyncToGenerator((function*(){(yield _this22._ready).create(data)}))()}dispatchEventInSandbox(event){var _this23=this;return _asyncToGenerator((function*(){const sandbox=yield _this23._ready;setTimeout((()=>sandbox.dispatchEvent(event)),0)}))()}destroySandbox(){var _this24=this;return _asyncToGenerator((function*(){(yield _this24._ready).nukeSandbox()}))()}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFSinglePageViewer=void 0;var _ui_utils=__w_pdfjs_require__(2),_pdf_viewer=__w_pdfjs_require__(24);class PDFSinglePageViewer extends _pdf_viewer.PDFViewer{_resetView(){super._resetView(),this._scrollMode=_ui_utils.ScrollMode.PAGE,this._spreadMode=_ui_utils.SpreadMode.NONE}set scrollMode(mode){}_updateScrollMode(){}set spreadMode(mode){}_updateSpreadMode(){}}exports.PDFSinglePageViewer=PDFSinglePageViewer},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{let _Symbol$iterator;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagesCountLimit=exports.PDFViewer=exports.PDFPageViewBuffer=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_ui_utils=__w_pdfjs_require__(2),_l10n_utils=__w_pdfjs_require__(5),_pdf_page_view=__w_pdfjs_require__(13),_pdf_rendering_queue=__w_pdfjs_require__(25),_pdf_link_service=__w_pdfjs_require__(1);const PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function isValidAnnotationEditorMode(mode){return Object.values(_pdfjsLib.AnnotationEditorType).includes(mode)&&mode!==_pdfjsLib.AnnotationEditorType.DISABLE}exports.PagesCountLimit=PagesCountLimit;var _buf=new WeakMap,_size=new WeakMap,_destroyFirstView=new WeakSet;_Symbol$iterator=Symbol.iterator;class PDFPageViewBuffer{constructor(size){_classPrivateMethodInitSpec(this,_destroyFirstView),_classPrivateFieldInitSpec(this,_buf,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_size,{writable:!0,value:0}),_classPrivateFieldSet(this,_size,size)}push(view){const buf=_classPrivateFieldGet(this,_buf);buf.has(view)&&buf.delete(view),buf.add(view),buf.size>_classPrivateFieldGet(this,_size)&&_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}resize(newSize,idsToKeep=null){_classPrivateFieldSet(this,_size,newSize);const buf=_classPrivateFieldGet(this,_buf);if(idsToKeep){const ii=buf.size;let i=1;for(const view of buf)if(idsToKeep.has(view.id)&&(buf.delete(view),buf.add(view)),++i>ii)break}for(;buf.size>_classPrivateFieldGet(this,_size);)_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}has(view){return _classPrivateFieldGet(this,_buf).has(view)}[_Symbol$iterator](){return _classPrivateFieldGet(this,_buf).keys()}}function _destroyFirstView2(){const firstView=_classPrivateFieldGet(this,_buf).keys().next().value;firstView?.destroy(),_classPrivateFieldGet(this,_buf).delete(firstView)}exports.PDFPageViewBuffer=PDFPageViewBuffer;var _buffer=new WeakMap,_annotationEditorMode=new WeakMap,_annotationEditorUIManager=new WeakMap,_annotationMode2=new WeakMap,_containerTopLeft=new WeakMap,_copyCallbackBound=new WeakMap,_enablePermissions2=new WeakMap,_getAllTextInProgress=new WeakMap,_hiddenCopyElement=new WeakMap,_interruptCopyCondition=new WeakMap,_previousContainerHeight=new WeakMap,_resizeObserver=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_scaleTimeoutId=new WeakMap,_textLayerMode2=new WeakMap,_layerProperties2=new WeakSet,_initializePermissions=new WeakSet,_onePageRenderedOrForceFetch=new WeakSet,_copyCallback=new WeakSet,_ensurePageViewVisible=new WeakSet,_scrollIntoView=new WeakSet,_isSameScale=new WeakSet,_setScaleUpdatePages=new WeakSet,_pageWidthScaleFactor=new WeakMap,_setScale=new WeakSet,_resetCurrentPageView=new WeakSet,_ensurePdfPageLoaded=new WeakSet,_getScrollAhead=new WeakSet,_updateContainerHeightCss=new WeakSet,_resizeObserverCallback=new WeakSet;function _layerProperties3(){const self=this;return{get annotationEditorUIManager(){return _classPrivateFieldGet(self,_annotationEditorUIManager)},get annotationStorage(){return self.pdfDocument?.annotationStorage},get downloadManager(){return self.downloadManager},get enableScripting(){return!!self._scriptingManager},get fieldObjectsPromise(){return self.pdfDocument?.getFieldObjects()},get findController(){return self.findController},get hasJSActionsPromise(){return self.pdfDocument?.hasJSActions()},get linkService(){return self.linkService}}}function _initializePermissions2(permissions){const params={annotationEditorMode:_classPrivateFieldGet(this,_annotationEditorMode),annotationMode:_classPrivateFieldGet(this,_annotationMode2),textLayerMode:_classPrivateFieldGet(this,_textLayerMode2)};return permissions?(permissions.includes(_pdfjsLib.PermissionFlag.COPY)||_classPrivateFieldGet(this,_textLayerMode2)!==_ui_utils.TextLayerMode.ENABLE||(params.textLayerMode=_ui_utils.TextLayerMode.ENABLE_PERMISSIONS),permissions.includes(_pdfjsLib.PermissionFlag.MODIFY_CONTENTS)||(params.annotationEditorMode=_pdfjsLib.AnnotationEditorType.DISABLE),permissions.includes(_pdfjsLib.PermissionFlag.MODIFY_ANNOTATIONS)||permissions.includes(_pdfjsLib.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,_annotationMode2)!==_pdfjsLib.AnnotationMode.ENABLE_FORMS||(params.annotationMode=_pdfjsLib.AnnotationMode.ENABLE),params):params}function _onePageRenderedOrForceFetch2(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const visibilityChangePromise=new Promise((resolve=>{_classPrivateFieldSet(this,_onVisibilityChange,(()=>{"hidden"===document.visibilityState&&(resolve(),document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null))})),document.addEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange))}));return Promise.race([this._onePageRenderedCapability.promise,visibilityChangePromise])}function _copyCallback2(textLayerMode,event){const selection=document.getSelection(),{focusNode,anchorNode}=selection;if(anchorNode&&focusNode&&selection.containsNode(_classPrivateFieldGet(this,_hiddenCopyElement))){if(_classPrivateFieldGet(this,_getAllTextInProgress)||textLayerMode===_ui_utils.TextLayerMode.ENABLE_PERMISSIONS)return event.preventDefault(),void event.stopPropagation();_classPrivateFieldSet(this,_getAllTextInProgress,!0);const savedCursor=this.container.style.cursor;this.container.style.cursor="wait";const interruptCopy=ev=>_classPrivateFieldSet(this,_interruptCopyCondition,"Escape"===ev.key);window.addEventListener("keydown",interruptCopy),this.getAllText().then(function(){var _ref5=_asyncToGenerator((function*(text){null!==text&&(yield navigator.clipboard.writeText(text))}));return function(_x5){return _ref5.apply(this,arguments)}}()).catch((reason=>{console.warn(`Something goes wrong when extracting the text: ${reason.message}`)})).finally((()=>{_classPrivateFieldSet(this,_getAllTextInProgress,!1),_classPrivateFieldSet(this,_interruptCopyCondition,!1),window.removeEventListener("keydown",interruptCopy),this.container.style.cursor=savedCursor})),event.preventDefault(),event.stopPropagation()}}function _ensurePageViewVisible2(){if(this._scrollMode!==_ui_utils.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const pageNumber=this._currentPageNumber,state=_classPrivateFieldGet(this,_scrollModePageState),viewer=this.viewer;if(viewer.textContent="",state.pages.length=0,this._spreadMode!==_ui_utils.SpreadMode.NONE||this.isInPresentationMode){const pageIndexSet=new Set,parity=this._spreadMode-1;-1===parity?pageIndexSet.add(pageNumber-1):pageNumber%2!==parity?(pageIndexSet.add(pageNumber-1),pageIndexSet.add(pageNumber)):(pageIndexSet.add(pageNumber-2),pageIndexSet.add(pageNumber-1));const spread=document.createElement("div");if(spread.className="spread",this.isInPresentationMode){const dummyPage=document.createElement("div");dummyPage.className="dummyPage",spread.append(dummyPage)}for(const i of pageIndexSet){const pageView=this._pages[i];pageView&&(spread.append(pageView.div),state.pages.push(pageView))}viewer.append(spread)}else{const pageView=this._pages[pageNumber-1];viewer.append(pageView.div),state.pages.push(pageView)}state.scrollDown=pageNumber>=state.previousPageNumber,state.previousPageNumber=pageNumber}function _scrollIntoView2(pageView,pageSpot=null){const{div,id}=pageView;if(this._currentPageNumber!==id&&this._setCurrentPageNumber(id),this._scrollMode===_ui_utils.ScrollMode.PAGE&&(_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this),this.update()),!pageSpot&&!this.isInPresentationMode){const left=div.offsetLeft+div.clientLeft,right=left+div.clientWidth,{scrollLeft,clientWidth}=this.container;(this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL||left<scrollLeft||right>scrollLeft+clientWidth)&&(pageSpot={left:0,top:0})}(0,_ui_utils.scrollIntoView)(div,pageSpot),!this._currentScaleValue&&this._location&&(this._location=null)}function _isSameScale2(newScale){return newScale===this._currentScale||Math.abs(newScale-this._currentScale)<1e-15}function _setScaleUpdatePages2(newScale,newValue,{noScroll=!1,preset=!1,drawingDelay=-1}){if(this._currentScaleValue=newValue.toString(),_classPrivateMethodGet(this,_isSameScale,_isSameScale2).call(this,newScale))return void(preset&&this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:newValue}));this.viewer.style.setProperty("--scale-factor",newScale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS);const postponeDrawing=drawingDelay>=0&&drawingDelay<1e3;if(this.refresh(!0,{scale:newScale,drawingDelay:postponeDrawing?drawingDelay:-1}),postponeDrawing&&_classPrivateFieldSet(this,_scaleTimeoutId,setTimeout((()=>{_classPrivateFieldSet(this,_scaleTimeoutId,null),this.refresh()}),drawingDelay)),this._currentScale=newScale,!noScroll){let dest,page=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:preset?newValue:void 0}),this.defaultRenderingQueue&&this.update()}function _get_pageWidthScaleFactor(){return this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL?2:1}function _setScale2(value,options){let scale=parseFloat(value);if(scale>0)options.preset=!1,_classPrivateMethodGet(this,_setScaleUpdatePages,_setScaleUpdatePages2).call(this,scale,value,options);else{const currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;let hPadding=_ui_utils.SCROLLBAR_PADDING,vPadding=_ui_utils.VERTICAL_PADDING;this.isInPresentationMode?(hPadding=vPadding=4,this._spreadMode!==_ui_utils.SpreadMode.NONE&&(hPadding*=2)):this.removePageBorders?hPadding=vPadding=0:this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL&&([hPadding,vPadding]=[vPadding,hPadding]);const pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale/_classPrivateFieldGet(this,_pageWidthScaleFactor),pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":const horizontalScale=(0,_ui_utils.isPortraitOrientation)(currentPage)?pageWidthScale:Math.min(pageHeightScale,pageWidthScale);scale=Math.min(_ui_utils.MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error(`#setScale: "${value}" is an unknown zoom value.`)}options.preset=!0,_classPrivateMethodGet(this,_setScaleUpdatePages,_setScaleUpdatePages2).call(this,scale,value,options)}}function _resetCurrentPageView2(){const pageView=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,this._currentScaleValue,{noScroll:!0}),_classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,pageView)}function _ensurePdfPageLoaded2(_x6){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator((function*(pageView){if(pageView.pdfPage)return pageView.pdfPage;try{const pdfPage=yield this.pdfDocument.getPage(pageView.id);return pageView.pdfPage||pageView.setPdfPage(pdfPage),this.linkService._cachedPageNumber?.(pdfPage.ref)||this.linkService.cachePageRef(pageView.id,pdfPage.ref),pdfPage}catch(reason){return console.error("Unable to get page for page view",reason),null}}))).apply(this,arguments)}function _getScrollAhead2(visible){if(1===visible.first?.id)return!0;if(visible.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case _ui_utils.ScrollMode.PAGE:return _classPrivateFieldGet(this,_scrollModePageState).scrollDown;case _ui_utils.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _updateContainerHeightCss2(height=this.container.clientHeight){height!==_classPrivateFieldGet(this,_previousContainerHeight)&&(_classPrivateFieldSet(this,_previousContainerHeight,height),_ui_utils.docStyle.setProperty("--viewer-container-height",`${height}px`))}function _resizeObserverCallback2(entries){for(const entry of entries)if(entry.target===this.container){_classPrivateMethodGet(this,_updateContainerHeightCss,_updateContainerHeightCss2).call(this,Math.floor(entry.borderBoxSize[0].blockSize)),_classPrivateFieldSet(this,_containerTopLeft,null);break}}exports.PDFViewer=class PDFViewer{constructor(_options2){_classPrivateMethodInitSpec(this,_resizeObserverCallback),_classPrivateMethodInitSpec(this,_updateContainerHeightCss),_classPrivateMethodInitSpec(this,_getScrollAhead),_classPrivateMethodInitSpec(this,_ensurePdfPageLoaded),_classPrivateMethodInitSpec(this,_resetCurrentPageView),_classPrivateMethodInitSpec(this,_setScale),_classPrivateFieldInitSpec(this,_pageWidthScaleFactor,{get:_get_pageWidthScaleFactor,set:void 0}),_classPrivateMethodInitSpec(this,_setScaleUpdatePages),_classPrivateMethodInitSpec(this,_isSameScale),_classPrivateMethodInitSpec(this,_scrollIntoView),_classPrivateMethodInitSpec(this,_ensurePageViewVisible),_classPrivateMethodInitSpec(this,_copyCallback),_classPrivateMethodInitSpec(this,_onePageRenderedOrForceFetch),_classPrivateMethodInitSpec(this,_initializePermissions),_classPrivateMethodInitSpec(this,_layerProperties2),_classPrivateFieldInitSpec(this,_buffer,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_annotationEditorMode,{writable:!0,value:_pdfjsLib.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,_annotationEditorUIManager,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_annotationMode2,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS}),_classPrivateFieldInitSpec(this,_containerTopLeft,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_copyCallbackBound,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_enablePermissions2,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_getAllTextInProgress,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_hiddenCopyElement,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_interruptCopyCondition,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_previousContainerHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_resizeObserver,{writable:!0,value:new ResizeObserver(_classPrivateMethodGet(this,_resizeObserverCallback,_resizeObserverCallback2).bind(this))}),_classPrivateFieldInitSpec(this,_scrollModePageState,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_onVisibilityChange,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_scaleTimeoutId,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_textLayerMode2,{writable:!0,value:_ui_utils.TextLayerMode.ENABLE});if("3.7.107"!==_pdfjsLib.version)throw new Error(`The API version "${_pdfjsLib.version}" does not match the Viewer version "3.7.107".`);if(this.container=_options2.container,this.viewer=_options2.viewer||_options2.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");_classPrivateFieldGet(this,_resizeObserver).observe(this.container),this.eventBus=_options2.eventBus,this.linkService=_options2.linkService||new _pdf_link_service.SimpleLinkService,this.downloadManager=_options2.downloadManager||null,this.findController=_options2.findController||null,this.findController&&(this.findController.onIsPageVisible=pageNumber=>this._getVisiblePages().ids.has(pageNumber)),this._scriptingManager=_options2.scriptingManager||null,_classPrivateFieldSet(this,_textLayerMode2,_options2.textLayerMode??_ui_utils.TextLayerMode.ENABLE),_classPrivateFieldSet(this,_annotationMode2,_options2.annotationMode??_pdfjsLib.AnnotationMode.ENABLE_FORMS),_classPrivateFieldSet(this,_annotationEditorMode,_options2.annotationEditorMode??_pdfjsLib.AnnotationEditorType.NONE),this.imageResourcesPath=_options2.imageResourcesPath||"",this.enablePrintAutoRotate=_options2.enablePrintAutoRotate||!1,this.removePageBorders=_options2.removePageBorders||!1,this.useOnlyCssZoom=_options2.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=_options2.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=_options2.maxCanvasPixels,this.l10n=_options2.l10n||_l10n_utils.NullL10n,_classPrivateFieldSet(this,_enablePermissions2,_options2.enablePermissions||!1),this.pageColors=_options2.pageColors||null,!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!_options2.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _pdf_rendering_queue.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=_options2.renderingQueue,this.scroll=(0,_ui_utils.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=_ui_utils.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),_classPrivateMethodGet(this,_updateContainerHeightCss,_updateContainerHeightCss2).call(this),this.eventBus._on("thumbnailrendered",(({pageNumber,pdfPage})=>{const pageView=this._pages[pageNumber-1];_classPrivateFieldGet(this,_buffer).has(pageView)||pdfPage?.cleanup()}))}get pagesCount(){return this._pages.length}getPageView(index){return this._pages[index]}getCachedPageViews(){return new Set(_classPrivateFieldGet(this,_buffer))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every((pageView=>pageView?.pdfPage))}get renderForms(){return _classPrivateFieldGet(this,_annotationMode2)===_pdfjsLib.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(val){if(!Number.isInteger(val))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(val,!0)||console.error(`currentPageNumber: "${val}" is not a valid page.`))}_setCurrentPageNumber(val,resetCurrentPageView=!1){if(this._currentPageNumber===val)return resetCurrentPageView&&_classPrivateMethodGet(this,_resetCurrentPageView,_resetCurrentPageView2).call(this),!0;if(!(0<val&&val<=this.pagesCount))return!1;const previous=this._currentPageNumber;return this._currentPageNumber=val,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:val,pageLabel:this._pageLabels?.[val-1]??null,previous}),resetCurrentPageView&&_classPrivateMethodGet(this,_resetCurrentPageView,_resetCurrentPageView2).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(val){if(!this.pdfDocument)return;let page=0|val;if(this._pageLabels){const i=this._pageLabels.indexOf(val);i>=0&&(page=i+1)}this._setCurrentPageNumber(page,!0)||console.error(`currentPageLabel: "${val}" is not a valid page.`)}get currentScale(){return this._currentScale!==_ui_utils.UNKNOWN_SCALE?this._currentScale:_ui_utils.DEFAULT_SCALE}set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale.");this.pdfDocument&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,val,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(val){this.pdfDocument&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,val,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(rotation){if(!(0,_ui_utils.isValidRotation)(rotation))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((rotation%=360)<0&&(rotation+=360),this._pagesRotation===rotation)return;this._pagesRotation=rotation;const pageNumber=this._currentPageNumber;this.refresh(!0,{rotation}),this._currentScaleValue&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:rotation,pageNumber}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}getAllText(){var _this25=this;return _asyncToGenerator((function*(){const texts=[],buffer=[];for(let pageNum=1,pagesCount=_this25.pdfDocument.numPages;pageNum<=pagesCount;++pageNum){if(_classPrivateFieldGet(_this25,_interruptCopyCondition))return null;buffer.length=0;const page=yield _this25.pdfDocument.getPage(pageNum),{items}=yield page.getTextContent();for(const item of items)item.str&&buffer.push(item.str),item.hasEOL&&buffer.push("\n");texts.push((0,_ui_utils.removeNullCharacters)(buffer.join("")))}return texts.join("\n")}))()}setDocument(pdfDocument){var _this26=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),_classPrivateFieldGet(this,_annotationEditorUIManager)&&(_classPrivateFieldGet(this,_annotationEditorUIManager).destroy(),_classPrivateFieldSet(this,_annotationEditorUIManager,null))),this.pdfDocument=pdfDocument,!pdfDocument)return;const pagesCount=pdfDocument.numPages,firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig(),permissionsPromise=_classPrivateFieldGet(this,_enablePermissions2)?pdfDocument.getPermissions():Promise.resolve();if(pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const mode=this._scrollMode=_ui_utils.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount})}),(()=>{})),this._onBeforeDraw=evt=>{const pageView=this._pages[evt.pageNumber-1];pageView&&_classPrivateFieldGet(this,_buffer).push(pageView)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=evt=>{evt.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:evt.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([firstPagePromise,permissionsPromise]).then((([firstPdfPage,permissions])=>{if(pdfDocument!==this.pdfDocument)return;this._firstPageCapability.resolve(firstPdfPage),this._optionalContentConfigPromise=optionalContentConfigPromise;const{annotationEditorMode,annotationMode,textLayerMode}=_classPrivateMethodGet(this,_initializePermissions,_initializePermissions2).call(this,permissions);if(textLayerMode!==_ui_utils.TextLayerMode.DISABLE){const element=_classPrivateFieldSet(this,_hiddenCopyElement,document.createElement("div"));element.id="hiddenCopyElement",this.viewer.before(element)}if(annotationEditorMode!==_pdfjsLib.AnnotationEditorType.DISABLE){const mode=annotationEditorMode;pdfDocument.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):isValidAnnotationEditorMode(mode)?(_classPrivateFieldSet(this,_annotationEditorUIManager,new _pdfjsLib.AnnotationEditorUIManager(this.container,this.eventBus,pdfDocument?.annotationStorage)),mode!==_pdfjsLib.AnnotationEditorType.NONE&&_classPrivateFieldGet(this,_annotationEditorUIManager).updateMode(mode)):console.error(`Invalid AnnotationEditor mode: ${mode}`)}const layerProperties=_classPrivateMethodGet(this,_layerProperties2,_layerProperties3).bind(this),viewerElement=this._scrollMode===_ui_utils.ScrollMode.PAGE?null:this.viewer,scale=this.currentScale,viewport=firstPdfPage.getViewport({scale:scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",viewport.scale);for(let pageNum=1;pageNum<=pagesCount;++pageNum){const pageView=new _pdf_page_view.PDFPageView({container:viewerElement,eventBus:this.eventBus,id:pageNum,scale,defaultViewport:viewport.clone(),optionalContentConfigPromise,renderingQueue:this.renderingQueue,textLayerMode,annotationMode,imageResourcesPath:this.imageResourcesPath,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties});this._pages.push(pageView)}const firstPageView=this._pages[0];firstPageView&&(firstPageView.setPdfPage(firstPdfPage),this.linkService.cachePageRef(1,firstPdfPage.ref)),this._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._updateSpreadMode(),_classPrivateMethodGet(this,_onePageRenderedOrForceFetch,_onePageRenderedOrForceFetch2).call(this).then(_asyncToGenerator((function*(){if(_this26.findController?.setDocument(pdfDocument),_this26._scriptingManager?.setDocument(pdfDocument),_classPrivateFieldGet(_this26,_hiddenCopyElement)&&(_classPrivateFieldSet(_this26,_copyCallbackBound,_classPrivateMethodGet(_this26,_copyCallback,_copyCallback2).bind(_this26,textLayerMode)),document.addEventListener("copy",_classPrivateFieldGet(_this26,_copyCallbackBound))),_classPrivateFieldGet(_this26,_annotationEditorUIManager)&&_this26.eventBus.dispatch("annotationeditormodechanged",{source:_this26,mode:_classPrivateFieldGet(_this26,_annotationEditorMode)}),pdfDocument.loadingParams.disableAutoFetch||pagesCount>PagesCountLimit.FORCE_LAZY_PAGE_INIT)return void _this26._pagesCapability.resolve();let getPagesLeft=pagesCount-1;if(getPagesLeft<=0)_this26._pagesCapability.resolve();else for(let pageNum=2;pageNum<=pagesCount;++pageNum){const promise=pdfDocument.getPage(pageNum).then((pdfPage=>{const pageView=_this26._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),_this26.linkService.cachePageRef(pageNum,pdfPage.ref),0==--getPagesLeft&&_this26._pagesCapability.resolve()}),(reason=>{console.error(`Unable to get page ${pageNum} to initialize viewer`,reason),0==--getPagesLeft&&_this26._pagesCapability.resolve()}));pageNum%PagesCountLimit.PAUSE_EAGER_PAGE_INIT==0&&(yield promise)}}))),this.eventBus.dispatch("pagesinit",{source:this}),pdfDocument.getMetadata().then((({info})=>{pdfDocument===this.pdfDocument&&info.Language&&(this.viewer.lang=info.Language)})),this.defaultRenderingQueue&&this.update()})).catch((reason=>{console.error("Unable to initialize viewer",reason),this._pagesCapability.reject(reason)}))}setPageLabels(labels){if(this.pdfDocument){labels?Array.isArray(labels)&&this.pdfDocument.numPages===labels.length?this._pageLabels=labels:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i].setPageLabel(this._pageLabels?.[i]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=_ui_utils.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet(this,_buffer,new PDFPageViewBuffer(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new _pdfjsLib.PromiseCapability,this._onePageRenderedCapability=new _pdfjsLib.PromiseCapability,this._pagesCapability=new _pdfjsLib.PromiseCapability,this._scrollMode=_ui_utils.ScrollMode.VERTICAL,this._previousScrollMode=_ui_utils.ScrollMode.UNKNOWN,this._spreadMode=_ui_utils.SpreadMode.NONE,_classPrivateFieldSet(this,_scrollModePageState,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),_classPrivateFieldGet(this,_hiddenCopyElement)&&(document.removeEventListener("copy",_classPrivateFieldGet(this,_copyCallbackBound)),_classPrivateFieldSet(this,_copyCallbackBound,null),_classPrivateFieldGet(this,_hiddenCopyElement).remove(),_classPrivateFieldSet(this,_hiddenCopyElement,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}pageLabelToPageNumber(label){if(!this._pageLabels)return null;const i=this._pageLabels.indexOf(label);return i<0?null:i+1}scrollPageIntoView({pageNumber,destArray=null,allowNegativeOffset=!1,ignoreDestinationZoom=!1}){if(!this.pdfDocument)return;const pageView=Number.isInteger(pageNumber)&&this._pages[pageNumber-1];if(!pageView)return void console.error(`scrollPageIntoView: "${pageNumber}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!destArray)return void this._setCurrentPageNumber(pageNumber,!0);let widthScale,heightScale,x=0,y=0,width=0,height=0;const changeOrientation=pageView.rotation%180!=0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;let scale=0;switch(destArray[1].name){case"XYZ":x=destArray[2],y=destArray[3],scale=destArray[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=destArray[2],scale="page-width",null===y&&this._location?(x=this._location.left,y=this._location.top):("number"!=typeof y||y<0)&&(y=pageHeight);break;case"FitV":case"FitBV":x=destArray[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=destArray[2],y=destArray[3],width=destArray[4]-x,height=destArray[5]-y;let hPadding=_ui_utils.SCROLLBAR_PADDING,vPadding=_ui_utils.VERTICAL_PADDING;this.removePageBorders&&(hPadding=vPadding=0),widthScale=(this.container.clientWidth-hPadding)/width/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return void console.error(`scrollPageIntoView: "${destArray[1].name}" is not a valid destination type.`)}if(ignoreDestinationZoom||(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===_ui_utils.UNKNOWN_SCALE&&(this.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)),"page-fit"===scale&&!destArray[4])return void _classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,pageView);const boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];let left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);allowNegativeOffset||(left=Math.max(left,0),top=Math.max(top,0)),_classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,pageView,{left,top})}_updateLocation(firstPage){const currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id,currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);let pdfOpenParams=`#page=${pageNumber}`;this.isInPresentationMode||(pdfOpenParams+=`&zoom=${normalizedScaleValue},${intLeft},${intTop}`),this._location={pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,rotation:this._pagesRotation,pdfOpenParams}}update(){const visible=this._getVisiblePages(),visiblePages=visible.views,numVisiblePages=visiblePages.length;if(0===numVisiblePages)return;const newCacheSize=Math.max(10,2*numVisiblePages+1);_classPrivateFieldGet(this,_buffer).resize(newCacheSize,visible.ids),this.renderingQueue.renderHighestPriority(visible);const isSimpleLayout=this._spreadMode===_ui_utils.SpreadMode.NONE&&(this._scrollMode===_ui_utils.ScrollMode.PAGE||this._scrollMode===_ui_utils.ScrollMode.VERTICAL),currentId=this._currentPageNumber;let stillFullyVisible=!1;for(const page of visiblePages){if(page.percent<100)break;if(page.id===currentId&&isSimpleLayout){stillFullyVisible=!0;break}}this._setCurrentPageNumber(stillFullyVisible?currentId:visiblePages[0].id),this._updateLocation(visible.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(element){return this.container.contains(element)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const views=this._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateFieldGet(this,_scrollModePageState).pages:this._pages,horizontal=this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL,rtl=horizontal&&this._isContainerRtl;return(0,_ui_utils.getVisibleElements)({scrollEl:this.container,views,sortByVisibility:!0,horizontal,rtl})}cleanup(){for(const pageView of this._pages)pageView.renderingState!==_ui_utils.RenderingStates.FINISHED&&pageView.reset()}_cancelRendering(){for(const pageView of this._pages)pageView.cancelRendering()}forceRendering(currentlyVisiblePages){const visiblePages=currentlyVisiblePages||this._getVisiblePages(),scrollAhead=_classPrivateMethodGet(this,_getScrollAhead,_getScrollAhead2).call(this,visiblePages),preRenderExtra=this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL,pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,scrollAhead,preRenderExtra);return!!pageView&&(_classPrivateMethodGet(this,_ensurePdfPageLoaded,_ensurePdfPageLoaded2).call(this,pageView).then((()=>{this.renderingQueue.renderView(pageView)})),!0)}get hasEqualPageSizes(){const firstPageView=this._pages[0];for(let i=1,ii=this._pages.length;i<ii;++i){const pageView=this._pages[i];if(pageView.width!==firstPageView.width||pageView.height!==firstPageView.height)return!1}return!0}getPagesOverview(){let initialOrientation;return this._pages.map((pageView=>{const viewport=pageView.pdfPage.getViewport({scale:1}),orientation=(0,_ui_utils.isPortraitOrientation)(viewport);if(void 0===initialOrientation)initialOrientation=orientation;else if(this.enablePrintAutoRotate&&orientation!==initialOrientation)return{width:viewport.height,height:viewport.width,rotation:(viewport.rotation-90)%360};return{width:viewport.width,height:viewport.height,rotation:viewport.rotation}}))}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(promise){if(!(promise instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=promise,this.refresh(!1,{optionalContentConfigPromise:promise}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise}))}get scrollMode(){return this._scrollMode}set scrollMode(mode){if(this._scrollMode!==mode){if(!(0,_ui_utils.isValidScrollMode)(mode))throw new Error(`Invalid scroll mode: ${mode}`);this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=mode,this.eventBus.dispatch("scrollmodechanged",{source:this,mode}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(pageNumber=null){const scrollMode=this._scrollMode,viewer=this.viewer;viewer.classList.toggle("scrollHorizontal",scrollMode===_ui_utils.ScrollMode.HORIZONTAL),viewer.classList.toggle("scrollWrapped",scrollMode===_ui_utils.ScrollMode.WRAPPED),this.pdfDocument&&pageNumber&&(scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._previousScrollMode===_ui_utils.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(pageNumber,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(mode){if(this._spreadMode!==mode){if(!(0,_ui_utils.isValidSpreadMode)(mode))throw new Error(`Invalid spread mode: ${mode}`);this._spreadMode=mode,this.eventBus.dispatch("spreadmodechanged",{source:this,mode}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(pageNumber=null){if(!this.pdfDocument)return;const viewer=this.viewer,pages=this._pages;if(this._scrollMode===_ui_utils.ScrollMode.PAGE)_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this);else if(viewer.textContent="",this._spreadMode===_ui_utils.SpreadMode.NONE)for(const pageView of this._pages)viewer.append(pageView.div);else{const parity=this._spreadMode-1;let spread=null;for(let i=0,ii=pages.length;i<ii;++i)null===spread?(spread=document.createElement("div"),spread.className="spread",viewer.append(spread)):i%2===parity&&(spread=spread.cloneNode(!1),viewer.append(spread)),spread.append(pages[i].div)}pageNumber&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&_classPrivateMethodGet(this,_setScale,_setScale2).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(pageNumber,!0),this.update())}_getPageAdvance(currentPageNumber,previous=!1){switch(this._scrollMode){case _ui_utils.ScrollMode.WRAPPED:{const{views}=this._getVisiblePages(),pageLayout=new Map;for(const{id,y,percent,widthPercent}of views){if(0===percent||widthPercent<100)continue;let yArray=pageLayout.get(y);yArray||pageLayout.set(y,yArray||=[]),yArray.push(id)}for(const yArray of pageLayout.values()){const currentIndex=yArray.indexOf(currentPageNumber);if(-1===currentIndex)continue;const numPages=yArray.length;if(1===numPages)break;if(previous)for(let i=currentIndex-1,ii=0;i>=ii;i--){const currentId=yArray[i],expectedId=yArray[i+1]-1;if(currentId<expectedId)return currentPageNumber-expectedId}else for(let i=currentIndex+1,ii=numPages;i<ii;i++){const currentId=yArray[i],expectedId=yArray[i-1]+1;if(currentId>expectedId)return expectedId-currentPageNumber}if(previous){const firstId=yArray[0];if(firstId<currentPageNumber)return currentPageNumber-firstId+1}else{const lastId=yArray[numPages-1];if(lastId>currentPageNumber)return lastId-currentPageNumber+1}break}break}case _ui_utils.ScrollMode.HORIZONTAL:break;case _ui_utils.ScrollMode.PAGE:case _ui_utils.ScrollMode.VERTICAL:{if(this._spreadMode===_ui_utils.SpreadMode.NONE)break;const parity=this._spreadMode-1;if(previous&&currentPageNumber%2!==parity)break;if(!previous&&currentPageNumber%2===parity)break;const{views}=this._getVisiblePages(),expectedId=previous?currentPageNumber-1:currentPageNumber+1;for(const{id,percent,widthPercent}of views)if(id===expectedId){if(percent>0&&100===widthPercent)return 2;break}break}}return 1}nextPage(){const currentPageNumber=this._currentPageNumber,pagesCount=this.pagesCount;if(currentPageNumber>=pagesCount)return!1;const advance=this._getPageAdvance(currentPageNumber,!1)||1;return this.currentPageNumber=Math.min(currentPageNumber+advance,pagesCount),!0}previousPage(){const currentPageNumber=this._currentPageNumber;if(currentPageNumber<=1)return!1;const advance=this._getPageAdvance(currentPageNumber,!0)||1;return this.currentPageNumber=Math.max(currentPageNumber-advance,1),!0}increaseScale({drawingDelay,scaleFactor,steps}={}){if(!this.pdfDocument)return;let newScale=this._currentScale;if(scaleFactor>1)newScale=Math.round(newScale*scaleFactor*100)/100;else{steps??=1;do{newScale=Math.ceil(10*(newScale*_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--steps>0&&newScale<_ui_utils.MAX_SCALE)}_classPrivateMethodGet(this,_setScale,_setScale2).call(this,Math.min(_ui_utils.MAX_SCALE,newScale),{noScroll:!1,drawingDelay})}decreaseScale({drawingDelay,scaleFactor,steps}={}){if(!this.pdfDocument)return;let newScale=this._currentScale;if(scaleFactor>0&&scaleFactor<1)newScale=Math.round(newScale*scaleFactor*100)/100;else{steps??=1;do{newScale=Math.floor(10*(newScale/_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--steps>0&&newScale>_ui_utils.MIN_SCALE)}_classPrivateMethodGet(this,_setScale,_setScale2).call(this,Math.max(_ui_utils.MIN_SCALE,newScale),{noScroll:!1,drawingDelay})}get containerTopLeft(){return _classPrivateFieldGet(this,_containerTopLeft)||_classPrivateFieldSet(this,_containerTopLeft,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return _classPrivateFieldGet(this,_annotationEditorUIManager)?_classPrivateFieldGet(this,_annotationEditorMode):_pdfjsLib.AnnotationEditorType.DISABLE}set annotationEditorMode(mode){if(!_classPrivateFieldGet(this,_annotationEditorUIManager))throw new Error("The AnnotationEditor is not enabled.");if(_classPrivateFieldGet(this,_annotationEditorMode)!==mode){if(!isValidAnnotationEditorMode(mode))throw new Error(`Invalid AnnotationEditor mode: ${mode}`);this.pdfDocument&&(_classPrivateFieldSet(this,_annotationEditorMode,mode),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode}),_classPrivateFieldGet(this,_annotationEditorUIManager).updateMode(mode))}}set annotationEditorParams({type,value}){if(!_classPrivateFieldGet(this,_annotationEditorUIManager))throw new Error("The AnnotationEditor is not enabled.");_classPrivateFieldGet(this,_annotationEditorUIManager).updateParams(type,value)}refresh(noUpdate=!1,updateArgs=Object.create(null)){if(this.pdfDocument){for(const pageView of this._pages)pageView.update(updateArgs);null!==_classPrivateFieldGet(this,_scaleTimeoutId)&&(clearTimeout(_classPrivateFieldGet(this,_scaleTimeoutId)),_classPrivateFieldSet(this,_scaleTimeoutId,null)),noUpdate||this.update()}}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFRenderingQueue=void 0;var _pdfjsLib=__w_pdfjs_require__(4),_ui_utils=__w_pdfjs_require__(2);exports.PDFRenderingQueue=class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer}isHighestPriority(view){return this.highestPriorityPage===view.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(currentlyVisiblePages){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(visible,views,scrolledDown,preRenderExtra=!1){const visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return null;for(let i=0;i<numVisible;i++){const view=visibleViews[i].view;if(!this.isViewFinished(view))return view}const firstId=visible.first.id,lastId=visible.last.id;if(lastId-firstId+1>numVisible){const visibleIds=visible.ids;for(let i=1,ii=lastId-firstId;i<ii;i++){const holeId=scrolledDown?firstId+i:lastId-i;if(visibleIds.has(holeId))continue;const holeView=views[holeId-1];if(!this.isViewFinished(holeView))return holeView}}let preRenderIndex=scrolledDown?lastId:firstId-2,preRenderView=views[preRenderIndex];return preRenderView&&!this.isViewFinished(preRenderView)||preRenderExtra&&(preRenderIndex+=scrolledDown?1:-1,preRenderView=views[preRenderIndex],preRenderView&&!this.isViewFinished(preRenderView))?preRenderView:null}isViewFinished(view){return view.renderingState===_ui_utils.RenderingStates.FINISHED}renderView(view){switch(view.renderingState){case _ui_utils.RenderingStates.FINISHED:return!1;case _ui_utils.RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case _ui_utils.RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case _ui_utils.RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId,view.draw().finally((()=>{this.renderHighestPriority()})).catch((reason=>{reason instanceof _pdfjsLib.RenderingCancelledException||console.error(`renderView: "${reason}"`)}))}return!0}}}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}var __nested_webpack_exports__={};return(()=>{var exports=__nested_webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return _annotation_layer_builder.AnnotationLayerBuilder}}),exports.DefaultXfaLayerFactory=exports.DefaultTextLayerFactory=exports.DefaultStructTreeLayerFactory=exports.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(exports,"DownloadManager",{enumerable:!0,get:function(){return _download_manager.DownloadManager}}),Object.defineProperty(exports,"EventBus",{enumerable:!0,get:function(){return _event_utils.EventBus}}),Object.defineProperty(exports,"GenericL10n",{enumerable:!0,get:function(){return _genericl10n.GenericL10n}}),Object.defineProperty(exports,"LinkTarget",{enumerable:!0,get:function(){return _pdf_link_service.LinkTarget}}),Object.defineProperty(exports,"NullL10n",{enumerable:!0,get:function(){return _l10n_utils.NullL10n}}),Object.defineProperty(exports,"PDFFindController",{enumerable:!0,get:function(){return _pdf_find_controller.PDFFindController}}),Object.defineProperty(exports,"PDFHistory",{enumerable:!0,get:function(){return _pdf_history.PDFHistory}}),Object.defineProperty(exports,"PDFLinkService",{enumerable:!0,get:function(){return _pdf_link_service.PDFLinkService}}),Object.defineProperty(exports,"PDFPageView",{enumerable:!0,get:function(){return _pdf_page_view.PDFPageView}}),Object.defineProperty(exports,"PDFScriptingManager",{enumerable:!0,get:function(){return _pdf_scripting_manager.PDFScriptingManager}}),Object.defineProperty(exports,"PDFSinglePageViewer",{enumerable:!0,get:function(){return _pdf_single_page_viewer.PDFSinglePageViewer}}),Object.defineProperty(exports,"PDFViewer",{enumerable:!0,get:function(){return _pdf_viewer.PDFViewer}}),Object.defineProperty(exports,"ProgressBar",{enumerable:!0,get:function(){return _ui_utils.ProgressBar}}),Object.defineProperty(exports,"RenderingStates",{enumerable:!0,get:function(){return _ui_utils.RenderingStates}}),Object.defineProperty(exports,"ScrollMode",{enumerable:!0,get:function(){return _ui_utils.ScrollMode}}),Object.defineProperty(exports,"SimpleLinkService",{enumerable:!0,get:function(){return _pdf_link_service.SimpleLinkService}}),Object.defineProperty(exports,"SpreadMode",{enumerable:!0,get:function(){return _ui_utils.SpreadMode}}),Object.defineProperty(exports,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return _struct_tree_layer_builder.StructTreeLayerBuilder}}),Object.defineProperty(exports,"TextLayerBuilder",{enumerable:!0,get:function(){return _text_layer_builder.TextLayerBuilder}}),Object.defineProperty(exports,"XfaLayerBuilder",{enumerable:!0,get:function(){return _xfa_layer_builder.XfaLayerBuilder}}),Object.defineProperty(exports,"parseQueryString",{enumerable:!0,get:function(){return _ui_utils.parseQueryString}});var _pdf_link_service=__w_pdfjs_require__(1),_ui_utils=__w_pdfjs_require__(2),_annotation_layer_builder=__w_pdfjs_require__(3),_download_manager=__w_pdfjs_require__(6),_event_utils=__w_pdfjs_require__(7),_genericl10n=__w_pdfjs_require__(8),_l10n_utils=__w_pdfjs_require__(5),_pdf_find_controller=__w_pdfjs_require__(10),_pdf_history=__w_pdfjs_require__(12),_pdf_page_view=__w_pdfjs_require__(13),_pdf_scripting_manager=__w_pdfjs_require__(21),_pdf_single_page_viewer=__w_pdfjs_require__(23),_pdf_viewer=__w_pdfjs_require__(24),_struct_tree_layer_builder=__w_pdfjs_require__(16),_text_layer_builder=__w_pdfjs_require__(19),_xfa_layer_builder=__w_pdfjs_require__(20);exports.DefaultAnnotationLayerFactory=class DefaultAnnotationLayerFactory{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}};exports.DefaultStructTreeLayerFactory=class DefaultStructTreeLayerFactory{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}};exports.DefaultTextLayerFactory=class DefaultTextLayerFactory{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}};exports.DefaultXfaLayerFactory=class DefaultXfaLayerFactory{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}})(),__nested_webpack_exports__})()))},"./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>BehaviorSubject});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.ZT)(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){var hasError=this.hasError,thrownError=this.thrownError,_value=this._value;if(hasError)throw thrownError;return this._throwIfClosed(),_value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js").x)},"./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>fromEvent});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_Observable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),_operators_mergeMap__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),_util_isArrayLike__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js"),_util_isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),_util_mapOneOrManyArgs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js"),nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(target,eventName,options,resultSelector){if((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(options)&&(resultSelector=options,options=void 0),resultSelector)return fromEvent(target,eventName,options).pipe((0,_util_mapOneOrManyArgs__WEBPACK_IMPORTED_MODULE_1__.Z)(resultSelector));var _a=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.CR)(function isEventTarget(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.addEventListener)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.removeEventListener)}(target)?eventTargetMethods.map((function(methodName){return function(handler){return target[methodName](eventName,handler,options)}})):function isNodeStyleEventEmitter(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.addListener)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.removeListener)}(target)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(target,eventName)):function isJQueryStyleEventEmitter(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.on)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(target.off)}(target)?jqueryMethods.map(toCommonHandlerRegistry(target,eventName)):[],2),add=_a[0],remove=_a[1];if(!add&&(0,_util_isArrayLike__WEBPACK_IMPORTED_MODULE_3__.z)(target))return(0,_operators_mergeMap__WEBPACK_IMPORTED_MODULE_4__.z)((function(subTarget){return fromEvent(subTarget,eventName,options)}))((0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__.Xf)(target));if(!add)throw new TypeError("Invalid event target");return new _Observable__WEBPACK_IMPORTED_MODULE_6__.y((function(subscriber){var handler=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return subscriber.next(1<args.length?args:args[0])};return add(handler),function(){return remove(handler)}}))}function toCommonHandlerRegistry(target,eventName){return function(methodName){return function(handler){return target[methodName](eventName,handler)}}}},"./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>pairwise});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function pairwise(){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((function(source,subscriber){var prev,hasPrev=!1;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,(function(value){var p=prev;prev=value,hasPrev&&subscriber.next([p,value]),hasPrev=!0})))}))}},"./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>takeUntil});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_util_noop__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js");function takeUntil(notifier){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((function(source,subscriber){(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_1__.Xf)(notifier).subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__.x)(subscriber,(function(){return subscriber.complete()}),_util_noop__WEBPACK_IMPORTED_MODULE_3__.Z)),!subscriber.closed&&source.subscribe(subscriber)}))}},"./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>takeWhile});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function takeWhile(predicate,inclusive){return void 0===inclusive&&(inclusive=!1),(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,(function(value){var result=predicate(value,index++);(result||inclusive)&&subscriber.next(value),!result&&subscriber.complete()})))}))}},"./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>mapOneOrManyArgs});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_operators_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),isArray=Array.isArray;function mapOneOrManyArgs(fn){return(0,_operators_map__WEBPACK_IMPORTED_MODULE_1__.U)((function(args){return function callOrApply(fn,args){return isArray(args)?fn.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_0__.ev)([],(0,tslib__WEBPACK_IMPORTED_MODULE_0__.CR)(args))):fn(args)}(fn,args)}))}},"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./node_modules/@babel/runtime/helpers/checkPrivateRedeclaration.js":module=>{module.exports=function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js":module=>{module.exports=function _classApplyDescriptorGet(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classApplyDescriptorSet.js":module=>{module.exports=function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classCheckPrivateStaticAccess.js":module=>{module.exports=function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classCheckPrivateStaticFieldDescriptor.js":module=>{module.exports=function _classCheckPrivateStaticFieldDescriptor(descriptor,action){if(void 0===descriptor)throw new TypeError("attempted to "+action+" private static field before its declaration")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js":module=>{module.exports=function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classApplyDescriptorGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js"),classExtractFieldDescriptor=__webpack_require__("./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js");module.exports=function _classPrivateFieldGet(receiver,privateMap){var descriptor=classExtractFieldDescriptor(receiver,privateMap,"get");return classApplyDescriptorGet(receiver,descriptor)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js":(module,__unused_webpack_exports,__webpack_require__)=>{var checkPrivateRedeclaration=__webpack_require__("./node_modules/@babel/runtime/helpers/checkPrivateRedeclaration.js");module.exports=function _classPrivateFieldInitSpec(obj,privateMap,value){checkPrivateRedeclaration(obj,privateMap),privateMap.set(obj,value)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classApplyDescriptorSet=__webpack_require__("./node_modules/@babel/runtime/helpers/classApplyDescriptorSet.js"),classExtractFieldDescriptor=__webpack_require__("./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js");module.exports=function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=classExtractFieldDescriptor(receiver,privateMap,"set");return classApplyDescriptorSet(receiver,descriptor,value),value},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classPrivateMethodGet.js":module=>{module.exports=function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js":(module,__unused_webpack_exports,__webpack_require__)=>{var checkPrivateRedeclaration=__webpack_require__("./node_modules/@babel/runtime/helpers/checkPrivateRedeclaration.js");module.exports=function _classPrivateMethodInitSpec(obj,privateSet){checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classApplyDescriptorGet=__webpack_require__("./node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js"),classCheckPrivateStaticAccess=__webpack_require__("./node_modules/@babel/runtime/helpers/classCheckPrivateStaticAccess.js"),classCheckPrivateStaticFieldDescriptor=__webpack_require__("./node_modules/@babel/runtime/helpers/classCheckPrivateStaticFieldDescriptor.js");module.exports=function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){return classCheckPrivateStaticAccess(receiver,classConstructor),classCheckPrivateStaticFieldDescriptor(descriptor,"get"),classApplyDescriptorGet(receiver,descriptor)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classApplyDescriptorSet=__webpack_require__("./node_modules/@babel/runtime/helpers/classApplyDescriptorSet.js"),classCheckPrivateStaticAccess=__webpack_require__("./node_modules/@babel/runtime/helpers/classCheckPrivateStaticAccess.js"),classCheckPrivateStaticFieldDescriptor=__webpack_require__("./node_modules/@babel/runtime/helpers/classCheckPrivateStaticFieldDescriptor.js");module.exports=function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){return classCheckPrivateStaticAccess(receiver,classConstructor),classCheckPrivateStaticFieldDescriptor(descriptor,"set"),classApplyDescriptorSet(receiver,descriptor,value),value},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classStaticPrivateMethodGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classCheckPrivateStaticAccess=__webpack_require__("./node_modules/@babel/runtime/helpers/classCheckPrivateStaticAccess.js");module.exports=function _classStaticPrivateMethodGet(receiver,classConstructor,method){return classCheckPrivateStaticAccess(receiver,classConstructor),method},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toPropertyKey=__webpack_require__("./node_modules/@babel/runtime/helpers/toPropertyKey.js");module.exports=function _defineProperty(obj,key,value){return(key=toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js").default;module.exports=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js").default,toPrimitive=__webpack_require__("./node_modules/@babel/runtime/helpers/toPrimitive.js");module.exports=function _toPropertyKey(arg){var key=toPrimitive(arg,"string");return"symbol"===_typeof(key)?key:String(key)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/typeof.js":module=>{function _typeof(obj){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},module.exports.__esModule=!0,module.exports.default=module.exports,_typeof(obj)}module.exports=_typeof,module.exports.__esModule=!0,module.exports.default=module.exports}}]);